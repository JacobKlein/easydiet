(self.webpackChunkeasy_diet=self.webpackChunkeasy_diet||[]).push([[179],{6881:(E,h,s)=>{"use strict";var u=s(2313),t=s(5e3),a=s(3075),_=s(3092),f=s(7423),l=s(9224),b=s(508),d=s(6856),p=s(8966),m=s(3489),y=s(8326),Z=s(7531),x=s(9062),w=s(773),A=s(4107),S=s(7261),L=s(4847),j=s(2081),T=s(4999),$=s(6360),M=s(1083),tt=s(5439);class v{static today(){return this.formatToServer(new Date)}static getLocalFormat(){return tt.localeData().longDateFormat("L")}static toDate(r){return r instanceof Date?r:tt(r,v.getLocalFormat()).toDate()}static format(r,e=v.FORMAT_LOCAL,n=v.FORMAT_DATA){return r instanceof Date&&e==v.FORMAT_DATA?this.formatDateObject(r):r.toString()}static formatToClient(r){return r instanceof Date?r.toLocaleDateString(this.LOCALE):new Date(Date.parse(r)).toLocaleDateString(this.LOCALE)}static formatToServer(r){if(r instanceof Date)return this.formatDateObject(r);const e=new Date(Date.parse(r));return this.formatDateObject(e)}static formatDateObject(r){const e=r.getTimezoneOffset();return new Date(r.getTime()-60*e*1e3).toISOString().split("T")[0]}static getAge(r){const e=new Date(Date.parse(r));let n=Math.abs(Date.now()-e.getTime());return Math.floor(n/864e5/365.25)}}v.FORMAT_DATA="yyyy-MM-dd",v.FORMAT_LOCAL="FORMAT_LOCAL",v.LOCALE=navigator.language;var Q=s(3619),O=s(2076);class Y{static toInteger(r,e=!0){return null==r?0:e?Number((+r).toFixed(0)):parseInt(r)}static toDecimal(r,e=2){return null==r||""===r?0:+r.toFixed(e)}static percentage(r,e){return null==r||0==r?0:r/e*100}}let I=(()=>{class o{static getBmi(e,n){if(null==e||null==n)return null;const i=n/100;return Y.toDecimal(e/(i*i),1)}static getTargetCarbsPercent(e){switch(e){case"low_carbs":return 20;case"moderate_carbs":return 35;case"high_carbs":return 50}return 0}static getTargetFatPercent(e){switch(e){case"low_carbs":return 40;case"moderate_carbs":return 35;case"high_carbs":return 20}return 0}static getTargetProteinPercent(e){switch(e){case"low_carbs":return 40;case"moderate_carbs":case"high_carbs":return 30}return 0}static getTargetFat(e,n){return"moderate_carbs"===e?n*(this.getTargetFatPercent(e)/100)/9:null}static getTargetCarbs(e,n){return"moderate_carbs"===e?n*(this.getTargetCarbsPercent(e)/100)/4:null}static getTargetProtein(e,n){return"moderate_carbs"===e?n*(this.getTargetProteinPercent(e)/100)/4:null}static getTdee(e,n,i,c,C,F){if(null==e||null==this.genderOptions.find(N=>N.value===e)||this.anyInvalid(n,i,c,C))return-1;let J=null;"male"==e?J=66+13.7*n+5*i-6.8*c:"female"==e&&(J=655+9.6*n+1.8*i-4.7*c);let V=Y.toInteger(J*C);return"lose_weight"==F?V-=500:"gain_weight"==F&&(V+=500),V}static getCalories(e){let n=0;return null!=e.protein&&!isNaN(e.protein)&&(n+=4*e.protein),null!=e.fat&&!isNaN(e.fat)&&(n+=9*e.fat),null!=e.carb&&!isNaN(e.carb)&&(n+=4*e.carb),n}static anyInvalid(...e){return null!=e.find(n=>null==n||isNaN(n))}}return o.genderOptions=[{value:"male",label:"Male"},{value:"female",label:"Female"}],o.exerciseOptions=[{label:"Little or no exercise",value:1.2},{label:"Light Exercise (1-3 days/week)",value:1.375},{label:"Moderately Active (moderate exercise 6-7 days/week)",value:1.55},{label:"Very Active (Hard exercise every day)",value:1.725}],o.dietOptions=[{label:"Moderate Carbs",value:"moderate_carbs"},{label:"Low Carbs",value:"low_carbs"},{label:"High Carbs",value:"high_carbs"}],o.goalOptions=[{label:"Lose Weight",value:"lose_weight"},{label:"Maintain",value:"maintain"},{label:"Gain Weight",value:"gain_weight"}],o})();class g{constructor(){this.database=new Q.Z3(g.IDB_DATABASE)}init(){return new Promise((r,e)=>{this.database.init(g.migrations).then(()=>{r(!0)},n=>{console.error(n),e(n)})})}getDatabase(){return this.database}listFoodDate(){return(0,O.D)(new Promise((r,e)=>{this.database.selectFrom(g.IDB_TABLE_DATE_FOOD).fetch(n=>{r(n.items)},n=>{e(n)})}))}searchFoodDate(r){const e=null==r?v.today():r;return(0,O.D)(new Promise((n,i)=>{this.database.selectFrom(g.IDB_TABLE_DATE_FOOD).where((0,Q.KA)("date",e)).fetch(c=>{const C=c.items,F=C.map(J=>J.foodId);this.database.selectFrom(g.IDB_TABLE_FOOD).where((0,Q.YJ)("id",F)).fetch(J=>{const V=J.items;C.forEach(N=>{const X=V.find(Fo=>Fo.id===N.foodId);null!=X&&(N.name=X.name,N.protein=X.protein*N.qty,N.fat=X.fat*N.qty,N.carb=X.carb*N.qty,N.calories=I.getCalories(N))}),n(c.items)},J=>{i(J)})},c=>{i(c)})}))}deleteFoodDate(r){return(0,O.D)(new Promise((e,n)=>{this.database.delete(g.IDB_TABLE_DATE_FOOD).idEquals(g.IDB_TABLE_DATE_FOOD,"string"==typeof r?r:r.id).execute().then(()=>{e(!0)},i=>{n(i)})}))}createFoodDate(r){return(0,O.D)(new Promise((e,n)=>{this.database.put(g.IDB_TABLE_DATE_FOOD,r).execute(()=>{e(r)},i=>{n(i)})}))}listFood(){return(0,O.D)(new Promise((r,e)=>{this.database.selectFrom(g.IDB_TABLE_FOOD).where((0,Q.KO)("deleted")).fetch(n=>{n.items.sort((i,c)=>i.name.toLowerCase().localeCompare(c.name.toLowerCase())),r(n.items)},n=>{e(n)})}))}updateFood(r){return(0,O.D)(new Promise((e,n)=>{this.database.put(g.IDB_TABLE_FOOD,r).execute(()=>{e(r)},i=>{n(i)})}))}deleteFood(r){return(0,O.D)(new Promise((e,n)=>{const i=JSON.parse(JSON.stringify(r));i.deleted=!0,this.database.put(g.IDB_TABLE_FOOD,i).execute(()=>{e(!0)},c=>{n(c)})}))}}g.migrations=[new class extends Q.fe{migrate(){this.createTable(g.IDB_TABLE_DATE_FOOD,g.IDB_FIELD_DATE_FOOD_ID),this.createTable(g.IDB_TABLE_FOOD,g.IDB_FIELD_DATE_ID),this.createTable(g.IDB_TABLE_DATE_WEIGHT,g.IDB_FIELD_DATE_WEIGHT_ID),this.createTable(g.IDB_TABLE_PROFILE,g.IDB_FIELD_PROFILE_ID)}getVersion(){return 1}},new class extends Q.fe{migrate(){this.addFood({name:"Spicy Veg Supreme Classic Crust",protein:43.2,fat:24.8,carb:146.4}),this.addFood({name:"Spicy Veg Supreme Thin N Crispy",protein:36.8,fat:39.2,carb:96}),this.addFood({name:"Pepperoni Classic Crust",protein:45.6,fat:34.4,carb:135.2}),this.addFood({name:"Pepperoni Thin N Crispy",protein:39.2,fat:44,carb:91.2})}getVersion(){return 2}addFood(r){r.id=this.createId(r.name),this.createItem(g.IDB_TABLE_FOOD,r)}createId(r){return r.toLowerCase().replace(" ","_")}}],g.IDB_DATABASE="easy-diet",g.IDB_TABLE_FOOD="food",g.IDB_FIELD_DATE_ID="id",g.IDB_TABLE_DATE_FOOD="dateFood",g.IDB_FIELD_DATE_FOOD_ID="id",g.IDB_TABLE_DATE_WEIGHT="dateWeight",g.IDB_FIELD_DATE_WEIGHT_ID="id",g.IDB_TABLE_PROFILE="profile",g.IDB_FIELD_PROFILE_ID="id",g.\u0275fac=function(r){return new(r||g)},g.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac});let et,lt=(()=>{class o{constructor(e,n,i){this.injector=e,this.data=n,this._adapter=i}init(){return this._adapter.setLocale(v.LOCALE),tt.locale(navigator.language),et=this.injector,this.data.init()}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(t.zs3),t.LFG(g),t.LFG(b._A))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var Et=s(3099);let U=(()=>{class o{}return o.EVENT_PROFILE_UPDATED="EVENT_PROFILE_UPDATED",o.EVENT_WEIGHT_UPDATED="EVENT_WEIGHT_UPDATED",o.EVENT_FOOD_DATE_UPDATED="EVENT_WEIGHT_UPDATED",o})(),ot=(()=>{class o{constructor(){this.eventEmitter=new t.vpe,this.eventObservable=this.eventEmitter.asObservable()}sendEvent(e){const n=new U;n.type=e,this.eventEmitter.emit(n)}getSubscription(){return this.eventObservable.pipe((0,Et.B)())}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),ct=(()=>{class o{constructor(e){this.snackBar=e}open(e){this.snackBar.open(e,void 0,{duration:3e3})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(S.ux))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),q=(()=>{class o{static getErrorMessage(e){return e instanceof a.NI?this.getControlMessage(e):(console.log("Unknown Error",e),"Aww Snap")}static getControlMessage(e){return null==e||null==e.errors?o.MESSAGE_DEFAULT:e.hasError("matDatepickerParse")?"Date must be format "+v.getLocalFormat():e.hasError("required")?"Required":e.hasError("positiveNumber")?"Value must be a positive number":e.hasError("foodAutoComplete")?"Please select a value":(console.log("Unknown Error",e.errors),o.MESSAGE_DEFAULT)}}return o.MESSAGE_DEFAULT="Aww Snap",o})(),k=(()=>{class o{constructor(e){this.cd=e,this.loading=!1,this.error=null,this.subs=[],this.componentClasses=[],this.interfaceService=et.get(ot),this.toastService=et.get(ct),this.addSubscription(this.interfaceService.getSubscription().subscribe(n=>{null!=n&&null!=n.type?this.handleEvent(n):console.error("Null event triggered")}))}ngOnInit(){this.componentClasses=[],this.initClasses(),this.setClasses(),this.onInit()}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}onFormSubmit(e){return e.preventDefault(),!1}getField(e){return this.form.get(e)}getFieldError(e){return q.getErrorMessage(this.getField(e))}sendEvent(e){this.interfaceService.sendEvent(e)}handleEvent(e){}hasLoaded(){return!this.loading&&null==this.error}isLoading(){return this.loading&&null==this.error}hasError(){return null!=this.error}getErrorMsg(){return this.error}addSubscription(e){this.subs.push(e)}setError(e){console.error(e),this.error="Aww Snap",this.markForCheck()}initClasses(){}setClasses(){this.componentClass=this.componentClasses.join(" ")}setLoading(e){this.loading=e,null!=this.form&&(e?this.form.disable():this.form.enable()),this.markForCheck()}toast(e){this.toastService.open(e)}isFormInvalid(){return this.form.markAllAsTouched(),this.form.valid||(console.error("Form is invalid"),null!=this.form.errors&&console.error("FORM",this.form.errors),Object.keys(this.form.controls).forEach(e=>{var n;const i=this.form.get(e);null!=i&&!i.valid&&console.error(e,null===(n=this.form.get(e))||void 0===n?void 0:n.errors)}),this.toast("Please check the form and try again")),!this.form.valid}markForCheck(){null!=this.cd&&this.cd.markForCheck()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],hostVars:1,hostBindings:function(e,n){2&e&&t.Ikx("className",n.componentClass)},decls:0,vars:0,template:function(e,n){},encapsulation:2}),o})(),G=(()=>{class o extends k{constructor(e){super(e),this.class="page-component"}onInit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],hostVars:2,hostBindings:function(e,n){2&e&&t.Tol(n.class)},features:[t.qOj],decls:0,vars:0,template:function(e,n){},encapsulation:2}),o})(),B=(()=>{class o{constructor(e){this.dataService=e}getProfile(){return(0,O.D)(new Promise((e,n)=>{this.dataService.getDatabase().selectFrom(g.IDB_TABLE_PROFILE).fetch(i=>{e(i.items.length>0?i.items[0]:null)},i=>{n(i)})}))}saveProfile(e){return(0,O.D)(new Promise((n,i)=>{this.dataService.getDatabase().put(g.IDB_TABLE_PROFILE,e).execute(()=>{n(e)},c=>{i(c)})}))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(g))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var D=s(9808);function yt(o,r){if(1&o&&(t.TgZ(0,"button",2),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("routerLink",e.route),t.xp6(1),t.hij(" ",e.label," ")}}let nt=(()=>{class o{constructor(){this.nav=[{label:"Home",route:["/"]},{label:"Food",route:["/food"]},{label:"Profile",route:["/profile"]}]}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-navbar"]],decls:2,vars:1,consts:[[1,"navbar-container"],["mat-raised-button","",3,"routerLink",4,"ngFor","ngForOf"],["mat-raised-button","",3,"routerLink"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,yt,2,2,"button",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",n.nav))},directives:[D.sg,f.lW,M.rH],encapsulation:2}),o})();class P{static positiveNumber(r){const e=r.value;return null==e||""===e?null:isNaN(e)||+e<0?{positiveNumber:!0}:null}static foodAutoComplete(r){return e=>{const n=e.value;return null==n||""===n?null:null==(null==r?null:r.find(c=>c.id===n))?{foodAutoComplete:!0}:null}}}let W=(()=>{class o extends k{constructor(e){super(e)}initClasses(){if(this.componentClasses.push("widget"),null==this.size)this.componentClasses.push("widget-3");else{const e=+this.size;!isNaN(e)&&e>0&&e<=12&&this.componentClasses.push("widget-"+this.size)}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],inputs:{size:"size"},features:[t.qOj],decls:0,vars:0,template:function(e,n){},encapsulation:2}),o})(),R=(()=>{class o{constructor(e){this.dataService=e}listWeight(){return(0,O.D)(new Promise((e,n)=>{this.dataService.getDatabase().selectFrom(g.IDB_TABLE_DATE_WEIGHT).fetch(i=>{e(i.items)},i=>{n(i)})}))}getWeight(){return(0,O.D)(new Promise((e,n)=>{this.dataService.getDatabase().selectFrom(g.IDB_TABLE_DATE_WEIGHT).orderBy(g.IDB_FIELD_DATE_WEIGHT_ID,"DESC").fetch(i=>{e(i.items.length>0?i.items[0]:null)},i=>{n(i)})}))}saveWeight(e){return(0,O.D)(new Promise((n,i)=>{this.dataService.getDatabase().put(g.IDB_TABLE_DATE_WEIGHT,e).execute(()=>{n(e)},c=>{i(c)})}))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(g))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),rt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],inputs:{fieldControl:"fieldControl",label:"label",suffix:"suffix",hint:"hint",options:"options"},decls:0,vars:0,template:function(e,n){},encapsulation:2}),o})();const It=["input"];function vt(o,r){if(1&o&&(t.TgZ(0,"mat-label"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.label)}}function xt(o,r){if(1&o&&(t.TgZ(0,"span",5),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.suffix)}}let z=(()=>{class o extends rt{constructor(){super(...arguments),this.blur=new t.vpe}clearFocus(){this.input.nativeElement.blur()}getFieldError(){return q.getErrorMessage(this.fieldControl)}}return o.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["app-text-field"]],viewQuery:function(e,n){if(1&e&&t.Gf(It,5),2&e){let i;t.iGM(i=t.CRH())&&(n.input=i.first)}},outputs:{blur:"blur"},features:[t.qOj],decls:9,vars:5,consts:[["appearance","outline"],[4,"ngIf"],["matInput","",3,"formControl","blur"],["input",""],["matSuffix","",4,"ngIf"],["matSuffix",""]],template:function(e,n){1&e&&(t.TgZ(0,"mat-form-field",0),t.YNc(1,vt,2,1,"mat-label",1),t.TgZ(2,"input",2,3),t.NdJ("blur",function(c){return n.blur.emit(c)}),t.qZA(),t.YNc(4,xt,2,1,"span",4),t.TgZ(5,"mat-hint"),t._uU(6),t.qZA(),t.TgZ(7,"mat-error"),t._uU(8),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",null!=n.label),t.xp6(1),t.Q6J("formControl",n.fieldControl),t.xp6(2),t.Q6J("ngIf",null!=n.suffix),t.xp6(2),t.Oqu(n.hint),t.xp6(2),t.Oqu(n.getFieldError()))},directives:[m.KE,D.O5,Z.Nt,a.Fj,a.JJ,a.oH,m.bx,m.TO,m.hX,m.R9],encapsulation:2}),o})();function Ft(o,r){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.getErrorMsg())}}let At=(()=>{class o extends W{constructor(e,n,i){super(i),this.fb=e,this.weightService=n}onInit(){this.form=this.fb.group({id:new a.NI(v.today(),a.kI.required),weight:new a.NI(null,[a.kI.required,P.positiveNumber])}),this.load()}onSubmit(){this.isFormInvalid()||(this.setLoading(!0),this.weightService.saveWeight(this.form.value).subscribe(()=>{this.sendEvent(U.EVENT_WEIGHT_UPDATED),this.load()},e=>{console.error(e)},()=>{this.setLoading(!1)}))}getHint(){return null==this.item?"":`Last check in: ${v.formatToClient(this.item.id)}`}load(){this.setLoading(!0),this.weightService.getWeight().subscribe(e=>{this.item=e,this.form.patchValue({weight:this.item.weight}),this.setLoading(!1)},e=>{this.setError(e)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(R),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-weight"]],features:[t.qOj],decls:8,vars:3,consts:[[1,"mat-card-primary"],[4,"ngIf"],[3,"ngSubmit"],["suffix","KG",3,"fieldControl","hint","blur"],["input",""]],template:function(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"mat-card",0),t.TgZ(1,"mat-card-title"),t._uU(2,"Weight Check In"),t.qZA(),t.TgZ(3,"mat-card-content"),t.YNc(4,Ft,2,1,"div",1),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(C){t.CHM(i);const F=t.MAs(7);return n.onFormSubmit(C),F.clearFocus()}),t.TgZ(6,"app-text-field",3,4),t.NdJ("blur",function(){return n.onSubmit()}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.xp6(4),t.Q6J("ngIf",n.hasError),t.xp6(2),t.Q6J("fieldControl",n.getField("weight"))("hint",n.getHint()))},directives:[l.a8,l.n5,l.dn,D.O5,a._Y,a.JL,a.F,z],encapsulation:2,changeDetection:0}),o})();var H=s(4128);let it=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-loading"]],decls:2,vars:0,consts:[[2,"display","flex","justify-content","center"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"mat-spinner"),t.qZA())},directives:[w.$g],encapsulation:2}),o})();function Dt(o,r){1&o&&t._UZ(0,"app-loading")}function Zt(o,r){if(1&o&&(t.TgZ(0,"div"),t.TgZ(1,"table"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4,"BMI"),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"tr"),t.TgZ(8,"th"),t._uU(9,"TDEE"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(6),t.Oqu(null==e.bmi?"--":e.bmi),t.xp6(5),t.Oqu(null==e.tdee?"--":e.tdee)}}let dt=(()=>{class o extends W{constructor(e,n,i){super(i),this.weightService=e,this.profileService=n}handleEvent(e){-1!=[U.EVENT_PROFILE_UPDATED,U.EVENT_WEIGHT_UPDATED].indexOf(e.type)&&this.load()}onInit(){this.load()}load(){this.setLoading(!0),(0,H.D)([this.weightService.getWeight(),this.profileService.getProfile()]).subscribe(e=>{this.weight=e[0].weight,this.profile=e[1],this.tdee=I.getTdee(this.profile.gender,this.weight,this.profile.height,v.getAge(this.profile.dob),this.profile.exercise),this.bmi=I.getBmi(this.weight,this.profile.height),this.setLoading(!1)},e=>{console.error(e)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(R),t.Y36(B),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-metrics-widget"]],features:[t.qOj],decls:5,vars:2,consts:[[4,"ngIf"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2,"Metrics"),t.qZA(),t.YNc(3,Dt,1,0,"app-loading",0),t.YNc(4,Zt,12,2,"div",0),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",n.isLoading()),t.xp6(1),t.Q6J("ngIf",n.hasLoaded()))},directives:[l.a8,l.n5,D.O5,it],encapsulation:2}),o})();var wt=s(8675),ut=s(4004),pt=s(1042);class mt{static generateId(){return pt.Z()}}function Ot(o,r){if(1&o&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function St(o,r){if(1&o&&(t.TgZ(0,"mat-dialog-content"),t.TgZ(1,"mat-form-field",4),t.TgZ(2,"mat-label"),t._uU(3,"Food"),t.qZA(),t._UZ(4,"input",5),t.TgZ(5,"mat-autocomplete",6,7),t.YNc(7,Ot,2,2,"mat-option",8),t.ALo(8,"async"),t.qZA(),t.TgZ(9,"mat-error"),t._uU(10),t.qZA(),t.qZA(),t._UZ(11,"app-text-field",9),t.qZA()),2&o){const e=t.MAs(6),n=t.oxw();t.xp6(4),t.Q6J("formControl",n.getField("foodId"))("matAutocomplete",e),t.xp6(1),t.Q6J("displayWith",n.displayAutoComplete()),t.xp6(2),t.Q6J("ngForOf",t.lcZ(8,6,n.filteredOptions)),t.xp6(3),t.Oqu(n.getAutoCompleteError()),t.xp6(1),t.Q6J("fieldControl",n.getField("qty"))}}let Nt=(()=>{class o extends k{constructor(e,n,i,c,C){super(C),this.formBuilder=e,this.dataService=n,this.dialogRef=i,this.data=c}onInit(){this.load()}onSubmit(){this.isFormInvalid()||this.dialogRef.close(this.form.value)}onCancel(){this.dialogRef.close()}displayAutoComplete(){return e=>{const n=Array.isArray(this.foodItems)?this.foodItems.find(i=>i.id===e):null;return null!=n?n.name:""}}getAutoCompleteError(){return q.getErrorMessage(this.getField("foodId"))}load(){this.setLoading(!0),this.dataService.listFood().subscribe(e=>{this.foodItems=e,this.foodItems=e,this.form=this.formBuilder.group({id:new a.NI(null,a.kI.required),date:new a.NI(v.today(),a.kI.required),qty:new a.NI(null,a.kI.required),foodId:new a.NI(null,[a.kI.required,P.foodAutoComplete(this.foodItems)])}),this.form.patchValue(null==this.data?{id:mt.generateId()}:this.data),this.addSubscription(this.filteredOptions=this.getField("foodId").valueChanges.pipe((0,wt.O)(""),(0,ut.U)(n=>null==n||"string"==typeof n?n:n.name),(0,ut.U)(n=>n?this.filter(n):this.foodItems.slice())))})}filter(e){const n=e.toLowerCase();return this.foodItems.filter(i=>-1!==i.name.toLowerCase().indexOf(n))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(g),t.Y36(p.so),t.Y36(p.WI),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],features:[t.qOj],decls:8,vars:2,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],["appearance","outline"],["type","text","required","","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["label","Quantity",3,"fieldControl"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Food Journal"),t.qZA(),t.YNc(2,St,12,8,"mat-dialog-content",1),t.TgZ(3,"mat-card-actions"),t.TgZ(4,"button",2),t.NdJ("click",function(){return n.onCancel()}),t._uU(5,"Cancel"),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return n.onSubmit()}),t._uU(7),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",null!=n.form),t.xp6(5),t.hij(" ",null==n.data?"Create":"Update"," "))},directives:[p.uh,D.O5,l.hq,f.lW,p.xY,m.KE,m.hX,Z.Nt,a.Fj,_.ZL,a.Q7,a.JJ,a.oH,_.XC,D.sg,m.TO,z,b.ey],pipes:[D.Ov],encapsulation:2}),o})(),ft=(()=>{class o{constructor(e){this.dialog=e}open(e,n){return this.dialog.open(e,n)}confirm(e,n="Ok"){return new Promise(i=>{i(confirm(e))})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(p.uw))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),_t=(()=>{class o{transform(e,...n){return null==e||""===e?"":+e.toFixed(2)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"decimal",type:o,pure:!0}),o})(),at=(()=>{class o{transform(e,...n){return Y.toInteger(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"integer",type:o,pure:!0}),o})();function Pt(o,r){1&o&&t._UZ(0,"app-loading")}function Lt(o,r){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.getErrorMsg())}}function jt(o,r){1&o&&(t.TgZ(0,"th",32),t._uU(1," Quantity"),t.qZA())}function Ut(o,r){if(1&o&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.qty,"")}}function qt(o,r){1&o&&t._UZ(0,"td",34)}function Bt(o,r){1&o&&(t.TgZ(0,"th",35),t._uU(1," Name"),t.qZA())}function Jt(o,r){if(1&o&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name,"")}}function Yt(o,r){1&o&&(t.TgZ(0,"td",36),t._uU(1," Total"),t.qZA())}function kt(o,r){1&o&&(t.TgZ(0,"th",37),t._uU(1," Protein"),t.qZA())}function Rt(o,r){if(1&o&&(t.TgZ(0,"td",33),t._uU(1),t.ALo(2,"decimal"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.protein),"")}}function Mt(o,r){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.ALo(2,"decimal"),t.ALo(3,"integer"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE(" ",t.lcZ(2,2,e.total.protein)," (",t.lcZ(3,4,e.total.proteinPercentage),"%) ")}}function Qt(o,r){1&o&&(t.TgZ(0,"th",38),t._uU(1," Fat"),t.qZA())}function Wt(o,r){if(1&o&&(t.TgZ(0,"td",33),t._uU(1),t.ALo(2,"decimal"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.fat),"")}}function Ht(o,r){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.ALo(2,"decimal"),t.ALo(3,"integer"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE(" ",t.lcZ(2,2,e.total.fat)," (",t.lcZ(3,4,e.total.fatPercentage),"%) ")}}function Gt(o,r){1&o&&(t.TgZ(0,"th",39),t._uU(1," Carbs"),t.qZA())}function zt(o,r){if(1&o&&(t.TgZ(0,"td",33),t._uU(1),t.ALo(2,"decimal"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.carb),"")}}function Vt(o,r){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.ALo(2,"decimal"),t.ALo(3,"integer"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE(" ",t.lcZ(2,2,e.total.carb)," (",t.lcZ(3,4,e.total.carbPercentage),"%) ")}}function Xt(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1," Calories"),t.qZA())}function Kt(o,r){if(1&o&&(t.TgZ(0,"td",33),t._uU(1),t.ALo(2,"integer"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.calories),"")}}function $t(o,r){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.ALo(2,"integer"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.total.calories),"")}}function te(o,r){1&o&&t._UZ(0,"th",41)}function ee(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",42),t.TgZ(1,"button",43),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(2).onEdit(c)}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA(),t.qZA(),t.TgZ(4,"button",43),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(2).onDelete(c)}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA(),t.qZA(),t.qZA()}}function oe(o,r){1&o&&t._UZ(0,"td",44)}function ne(o,r){1&o&&t._UZ(0,"th",45)}function re(o,r){1&o&&t._UZ(0,"td",33)}function ie(o,r){1&o&&(t.TgZ(0,"td",34),t._uU(1,"Target Total"),t.qZA())}function ae(o,r){1&o&&t._UZ(0,"th",45)}function se(o,r){1&o&&t._UZ(0,"td",33)}function le(o,r){if(1&o&&(t.TgZ(0,"td",34),t._uU(1),t.ALo(2,"integer"),t.ALo(3,"integer"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE(" ",t.lcZ(2,2,e.target.protein)," (",t.lcZ(3,4,e.target.proteinPercentage),"%) ")}}function ce(o,r){1&o&&t._UZ(0,"th",45)}function de(o,r){1&o&&t._UZ(0,"td",33)}function ue(o,r){if(1&o&&(t.TgZ(0,"td",34),t._uU(1),t.ALo(2,"integer"),t.ALo(3,"integer"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE(" ",t.lcZ(2,2,e.target.carb)," (",t.lcZ(3,4,e.target.carbPercentage),"%) ")}}function pe(o,r){1&o&&t._UZ(0,"th",45)}function me(o,r){1&o&&t._UZ(0,"td",33)}function fe(o,r){if(1&o&&(t.TgZ(0,"td",34),t._uU(1),t.ALo(2,"integer"),t.ALo(3,"integer"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE(" ",t.lcZ(2,2,e.target.fat)," (",t.lcZ(3,4,e.target.fatPercentage),"%) ")}}function _e(o,r){1&o&&t._UZ(0,"th",45)}function he(o,r){1&o&&t._UZ(0,"td",33)}function ge(o,r){if(1&o&&(t.TgZ(0,"td",34),t._uU(1),t.ALo(2,"integer"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.target.calories)," ")}}function be(o,r){1&o&&t._UZ(0,"th",45)}function Ce(o,r){1&o&&t._UZ(0,"td",33)}function Te(o,r){1&o&&t._UZ(0,"td",34)}function Ee(o,r){1&o&&t._UZ(0,"tr",46)}function ye(o,r){1&o&&t._UZ(0,"tr",47)}function Ie(o,r){1&o&&t._UZ(0,"tr",48)}function ve(o,r){1&o&&t._UZ(0,"tr",48)}function xe(o,r){if(1&o&&(t.TgZ(0,"mat-card-content"),t.TgZ(1,"table",2),t.ynx(2,3),t.YNc(3,jt,2,0,"th",4),t.YNc(4,Ut,2,1,"td",5),t.YNc(5,qt,1,0,"td",6),t.BQk(),t.ynx(6,7),t.YNc(7,Bt,2,0,"th",8),t.YNc(8,Jt,2,1,"td",5),t.YNc(9,Yt,2,0,"td",9),t.BQk(),t.ynx(10,10),t.YNc(11,kt,2,0,"th",11),t.YNc(12,Rt,3,3,"td",5),t.YNc(13,Mt,4,6,"td",9),t.BQk(),t.ynx(14,12),t.YNc(15,Qt,2,0,"th",13),t.YNc(16,Wt,3,3,"td",5),t.YNc(17,Ht,4,6,"td",9),t.BQk(),t.ynx(18,14),t.YNc(19,Gt,2,0,"th",15),t.YNc(20,zt,3,3,"td",5),t.YNc(21,Vt,4,6,"td",9),t.BQk(),t.ynx(22,16),t.YNc(23,Xt,2,0,"th",17),t.YNc(24,Kt,3,3,"td",5),t.YNc(25,$t,3,3,"td",9),t.BQk(),t.ynx(26,18),t.YNc(27,te,1,0,"th",19),t.YNc(28,ee,7,0,"td",20),t.YNc(29,oe,1,0,"td",21),t.BQk(),t.ynx(30,22),t.YNc(31,ne,1,0,"th",23),t.YNc(32,re,1,0,"td",5),t.YNc(33,ie,2,0,"td",6),t.BQk(),t.ynx(34,24),t.YNc(35,ae,1,0,"th",23),t.YNc(36,se,1,0,"td",5),t.YNc(37,le,4,6,"td",6),t.BQk(),t.ynx(38,25),t.YNc(39,ce,1,0,"th",23),t.YNc(40,de,1,0,"td",5),t.YNc(41,ue,4,6,"td",6),t.BQk(),t.ynx(42,26),t.YNc(43,pe,1,0,"th",23),t.YNc(44,me,1,0,"td",5),t.YNc(45,fe,4,6,"td",6),t.BQk(),t.ynx(46,27),t.YNc(47,_e,1,0,"th",23),t.YNc(48,he,1,0,"td",5),t.YNc(49,ge,3,3,"td",6),t.BQk(),t.ynx(50,28),t.YNc(51,be,1,0,"th",23),t.YNc(52,Ce,1,0,"td",5),t.YNc(53,Te,1,0,"td",6),t.BQk(),t.YNc(54,Ee,1,0,"tr",29),t.YNc(55,ye,1,0,"tr",30),t.YNc(56,Ie,1,0,"tr",31),t.YNc(57,ve,1,0,"tr",31),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("dataSource",e.dataSource),t.xp6(53),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",e.targetFooter)}}let Fe=(()=>{class o extends W{constructor(e,n,i,c,C,F){super(F),this.dialogService=e,this.formBuilder=n,this.profileService=i,this.dataService=c,this.weightService=C,this.foodDateItems=[],this.displayedColumns=["name","qty","protein","fat","carb","calories","actions"],this.targetFooter=["targetTitle","placeholder","targetProtein","targetFat","targetCarb","targetCalories","placeholder"],this.resetTotal()}onInit(){this.setLoading(!0),this.loadProfile().then(()=>{this.loadData().then(()=>{this.setLoading(!1)})})}onCreate(){this.openDialog()}onEdit(e){this.openDialog(e)}onDelete(e){this.dialogService.confirm("Are you sure you want to delete this item?").then(n=>{!n||(this.setLoading(!0),this.dataService.deleteFoodDate(e).subscribe(()=>{this.sendEvent(U.EVENT_FOOD_DATE_UPDATED),this.reloadData()},i=>{console.error(i),this.toast(q.MESSAGE_DEFAULT)},()=>{}))})}reloadData(){this.setLoading(!0),this.loadData().then(()=>{this.setLoading(!1)})}openDialog(e){this.dialogService.open(Nt,{data:e,autoFocus:!1}).afterClosed().subscribe(n=>{null!=n&&(this.setLoading(!0),this.dataService.createFoodDate(n).subscribe(()=>{this.sendEvent(U.EVENT_FOOD_DATE_UPDATED)},()=>{},()=>{this.reloadData()}))})}loadProfile(){return this.target={name:"Total",protein:0,fat:0,carb:0,calories:0},new Promise((e,n)=>{(0,H.D)([this.profileService.getProfile(),this.weightService.getWeight()]).subscribe(i=>{this.profile=i[0];const C=I.getTdee(this.profile.gender,i[1].weight,this.profile.height,v.getAge(this.profile.dob),this.profile.exercise,this.profile.goal);this.target.protein=I.getTargetProtein(this.profile.diet,C),this.target.proteinPercentage=I.getTargetProteinPercent(this.profile.diet),this.target.fat=I.getTargetFat(this.profile.diet,C),this.target.fatPercentage=I.getTargetFatPercent(this.profile.diet),this.target.carb=I.getTargetCarbs(this.profile.diet,C),this.target.carbPercentage=I.getTargetCarbsPercent(this.profile.diet),this.target.calories=C,e(!0)},i=>{n(i)})})}loadData(){return new Promise((e,n)=>{this.dataService.searchFoodDate().subscribe(i=>{this.foodDateItems=i,this.dataSource=new T.by(i),this.dataSource.sort=this.sort,this.resetTotal(),this.foodDateItems.forEach(c=>{this.total.protein+=c.protein,this.total.fat+=c.fat,this.total.carb+=c.carb,this.total.calories+=c.calories}),this.total.proteinPercentage=Y.percentage(4*this.total.protein,this.total.calories),this.total.fatPercentage=Y.percentage(9*this.total.fat,this.total.calories),this.total.carbPercentage=Y.percentage(4*this.total.carb,this.total.calories),e(!0)},i=>{n(i)})})}resetTotal(){this.total={name:"Total",protein:0,fat:0,carb:0,calories:0}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(ft),t.Y36(a.qu),t.Y36(B),t.Y36(g),t.Y36(R),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-food-date"]],viewQuery:function(e,n){if(1&e&&t.Gf(L.YE,5),2&e){let i;t.iGM(i=t.CRH())&&(n.sort=i.first)}},features:[t.qOj],decls:9,vars:3,consts:[["mat-raised-button","","color","primary",3,"click"],[4,"ngIf"],["mat-table","","matSort","",1,"full-width",3,"dataSource"],["matColumnDef","qty"],["mat-header-cell","","mat-sort-header","qty",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","name",4,"matHeaderCellDef"],["mat-footer-cell","","class","column-total",4,"matFooterCellDef"],["matColumnDef","protein"],["mat-header-cell","","mat-sort-header","protein",4,"matHeaderCellDef"],["matColumnDef","fat"],["mat-header-cell","","mat-sort-header","fat",4,"matHeaderCellDef"],["matColumnDef","carb"],["mat-header-cell","","mat-sort-header","carb",4,"matHeaderCellDef"],["matColumnDef","calories"],["mat-header-cell","","mat-sort-header","calories",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","col-min",4,"matHeaderCellDef"],["mat-cell","","class","col-min icon-grey",4,"matCellDef"],["mat-footer-cell","","class","column-total col-min",4,"matFooterCellDef"],["matColumnDef","targetTitle"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","targetProtein"],["matColumnDef","targetCarb"],["matColumnDef","targetFat"],["matColumnDef","targetCalories"],["matColumnDef","placeholder"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],["mat-header-cell","","mat-sort-header","qty"],["mat-cell",""],["mat-footer-cell",""],["mat-header-cell","","mat-sort-header","name"],["mat-footer-cell","",1,"column-total"],["mat-header-cell","","mat-sort-header","protein"],["mat-header-cell","","mat-sort-header","fat"],["mat-header-cell","","mat-sort-header","carb"],["mat-header-cell","","mat-sort-header","calories"],["mat-header-cell","",1,"col-min"],["mat-cell","",1,"col-min","icon-grey"],["mat-icon-button","",3,"click"],["mat-footer-cell","",1,"column-total","col-min"],["mat-header-cell",""],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title-group"),t.TgZ(2,"mat-card-title"),t._uU(3,"Food Journal"),t.qZA(),t.TgZ(4,"button",0),t.NdJ("click",function(){return n.onCreate()}),t._uU(5,"Add"),t.qZA(),t.qZA(),t.YNc(6,Pt,1,0,"app-loading",1),t.YNc(7,Lt,2,1,"div",1),t.YNc(8,xe,58,5,"mat-card-content",1),t.qZA()),2&e&&(t.xp6(6),t.Q6J("ngIf",n.isLoading()),t.xp6(1),t.Q6J("ngIf",n.hasError()),t.xp6(1),t.Q6J("ngIf",n.hasLoaded()))},directives:[l.a8,l.C1,l.n5,f.lW,D.O5,it,l.dn,T.BZ,L.YE,T.w1,T.fO,T.Dz,T.mD,T.as,T.nj,T.Ke,T.ge,L.nU,T.ev,T.yh,y.Hw,T.XQ,T.Gk,T.Q2],pipes:[_t,at],encapsulation:2}),o})();function Ae(o,r){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.hij("",e.profile.name,"!")}}let De=(()=>{class o extends G{constructor(e,n){super(n),this.profileService=e}onInit(){this.setLoading(!0),this.profileService.getProfile().subscribe(e=>{this.profile=e},()=>{},()=>{this.setLoading(!1)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(B),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-home"]],features:[t.qOj],decls:8,vars:4,consts:[[4,"ngIf"],[1,"widget-container"],[3,"size"]],template:function(e,n){1&e&&(t._UZ(0,"app-navbar"),t.TgZ(1,"h1"),t._uU(2,"Welcome back "),t.YNc(3,Ae,2,1,"ng-container",0),t.qZA(),t.TgZ(4,"div",1),t._UZ(5,"app-weight",2),t._UZ(6,"app-metrics-widget",2),t._UZ(7,"app-food-date",2),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",n.hasLoaded()&&null!=n.profile),t.xp6(2),t.Q6J("size",6),t.xp6(1),t.Q6J("size",6),t.xp6(1),t.Q6J("size",12))},directives:[nt,D.O5,At,dt,Fe],encapsulation:2}),o})();function Ze(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(i){return t.CHM(e),t.oxw().onFormSubmit(i)}),t._UZ(1,"app-text-field",2),t._UZ(2,"app-text-field",3),t._UZ(3,"app-text-field",4),t._UZ(4,"app-text-field",5),t.TgZ(5,"mat-form-field",6),t.TgZ(6,"mat-label"),t._uU(7,"Calories"),t.qZA(),t._UZ(8,"input",7),t.qZA(),t.TgZ(9,"mat-card-actions"),t.TgZ(10,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(11,"Cancel"),t.qZA(),t.TgZ(12,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSubmit()}),t._uU(13),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("fieldControl",e.getField("name")),t.xp6(1),t.Q6J("fieldControl",e.getField("protein")),t.xp6(1),t.Q6J("fieldControl",e.getField("fat")),t.xp6(1),t.Q6J("fieldControl",e.getField("carb")),t.xp6(4),t.Q6J("value",e.getCalories(e.form.value)),t.xp6(5),t.hij(" ",null==e.data?"Create":"Update"," ")}}let we=(()=>{class o extends k{constructor(e,n,i,c,C){super(C),this.formBuilder=e,this.dataService=n,this.dialogRef=i,this.data=c}onInit(){this.load()}onCancel(){this.dialogRef.close()}onSubmit(){this.isFormInvalid()||this.dialogRef.close(this.form.value)}load(){this.setLoading(!0),this.form=this.formBuilder.group({id:new a.NI(null,a.kI.required),name:new a.NI(null,a.kI.required),protein:new a.NI(null,[a.kI.required,P.positiveNumber]),fat:new a.NI(null,[a.kI.required,P.positiveNumber]),carb:new a.NI(null,[a.kI.required,P.positiveNumber])}),this.form.patchValue(null==this.data?{id:mt.generateId()}:this.data)}getCalories(e){return Y.toInteger(I.getCalories(e))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(g),t.Y36(p.so),t.Y36(p.WI),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],features:[t.qOj],decls:1,vars:1,consts:[[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],["label","Name",3,"fieldControl"],["label","Protein",3,"fieldControl"],["label","Fat",3,"fieldControl"],["label","Carbs",3,"fieldControl"],["appearance","outline"],["matInput","","readonly","",3,"value"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,n){1&e&&t.YNc(0,Ze,14,6,"form",0),2&e&&t.Q6J("ngIf",null!=n.form)},directives:[D.O5,a._Y,a.JL,a.F,z,m.KE,m.hX,Z.Nt,l.hq,f.lW],encapsulation:2}),o})();function Oe(o,r){1&o&&(t.TgZ(0,"th",20),t._uU(1," Name"),t.qZA())}function Se(o,r){if(1&o&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name,"")}}function Ne(o,r){1&o&&(t.TgZ(0,"th",22),t._uU(1," Protein"),t.qZA())}function Pe(o,r){if(1&o&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.protein,"")}}function Le(o,r){1&o&&(t.TgZ(0,"th",23),t._uU(1," Fat"),t.qZA())}function je(o,r){if(1&o&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.fat,"")}}function Ue(o,r){1&o&&(t.TgZ(0,"th",24),t._uU(1," Carbs"),t.qZA())}function qe(o,r){if(1&o&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.carb,"")}}function Be(o,r){1&o&&(t.TgZ(0,"th",25),t._uU(1," Calories"),t.qZA())}function Je(o,r){if(1&o&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&o){const e=r.$implicit,n=t.oxw(2);t.xp6(1),t.hij(" ",n.getCalories(e),"")}}function Ye(o,r){1&o&&t._UZ(0,"th",26)}function ke(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",27),t.TgZ(1,"button",28),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(2).onEdit(c)}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA(),t.qZA(),t.TgZ(4,"button",28),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(2).onDelete(c)}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA(),t.qZA(),t.qZA()}}function Re(o,r){1&o&&t._UZ(0,"tr",29)}function Me(o,r){1&o&&t._UZ(0,"tr",30)}const Qe=function(){return[25,50,100]};function We(o,r){if(1&o&&(t.TgZ(0,"mat-card-content"),t.TgZ(1,"table",2),t.ynx(2,3),t.YNc(3,Oe,2,0,"th",4),t.YNc(4,Se,2,1,"td",5),t.BQk(),t.ynx(5,6),t.YNc(6,Ne,2,0,"th",7),t.YNc(7,Pe,2,1,"td",5),t.BQk(),t.ynx(8,8),t.YNc(9,Le,2,0,"th",9),t.YNc(10,je,2,1,"td",5),t.BQk(),t.ynx(11,10),t.YNc(12,Ue,2,0,"th",11),t.YNc(13,qe,2,1,"td",5),t.BQk(),t.ynx(14,12),t.YNc(15,Be,2,0,"th",13),t.YNc(16,Je,2,1,"td",5),t.BQk(),t.ynx(17,14),t.YNc(18,Ye,1,0,"th",15),t.YNc(19,ke,7,0,"td",16),t.BQk(),t.YNc(20,Re,1,0,"tr",17),t.YNc(21,Me,1,0,"tr",18),t.qZA(),t._UZ(22,"mat-paginator",19),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("dataSource",e.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(4,Qe))}}let He=(()=>{class o extends k{constructor(e,n,i,c){super(c),this.dialogService=e,this.fb=n,this.dataService=i,this.displayedColumns=["name","protein","fat","carb","calories","actions"],this.form=this.fb.group({id:new a.NI(null,a.kI.required),name:new a.NI(null,a.kI.required),protein:new a.NI(null,[a.kI.required,P.positiveNumber]),fat:new a.NI(null,[a.kI.required,P.positiveNumber]),carb:new a.NI(null,[a.kI.required,P.positiveNumber])}),this.reset()}reset(){this.form.reset(),this.form.markAsPristine(),this.form.patchValue({id:pt.Z()})}onInit(){this.load()}onCreate(){this.openDialog()}onEdit(e){this.openDialog(e)}onDelete(e){this.dialogService.confirm("Are you sure you want to delete this item?").then(n=>{!n||(this.setLoading(!0),this.dataService.deleteFood(e).subscribe(()=>{this.load()},i=>{console.error(i),this.toast(q.MESSAGE_DEFAULT)},()=>{}))})}getCalories(e){return Y.toInteger(I.getCalories(e))}openDialog(e){this.dialogService.open(we,{data:e,autoFocus:!1}).afterClosed().subscribe(n=>{null!=n&&(this.setLoading(!0),this.dataService.updateFood(n).subscribe(()=>{},()=>{},()=>{this.load()}))})}load(){this.setLoading(!0),this.dataService.listFood().subscribe(e=>{this.items=e,this.dataSource=new T.by(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.setLoading(!1)},e=>{this.setError(e)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(ft),t.Y36(a.qu),t.Y36(g),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-food-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(x.NW,5),t.Gf(L.YE,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.paginator=i.first),t.iGM(i=t.CRH())&&(n.sort=i.first)}},features:[t.qOj],decls:7,vars:1,consts:[["mat-raised-button","","color","primary",3,"click"],[4,"ngIf"],["mat-table","","matSort","",1,"full-width",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","name",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","protein"],["mat-header-cell","","mat-sort-header","protein",4,"matHeaderCellDef"],["matColumnDef","fat"],["mat-header-cell","","mat-sort-header","fat",4,"matHeaderCellDef"],["matColumnDef","carb"],["mat-header-cell","","mat-sort-header","carb",4,"matHeaderCellDef"],["matColumnDef","calories"],["mat-header-cell","","mat-sort-header","calories",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","col-min icon-grey",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of food",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header","name"],["mat-cell",""],["mat-header-cell","","mat-sort-header","protein"],["mat-header-cell","","mat-sort-header","fat"],["mat-header-cell","","mat-sort-header","carb"],["mat-header-cell","","mat-sort-header","calories"],["mat-header-cell",""],["mat-cell","",1,"col-min","icon-grey"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title-group"),t.TgZ(2,"mat-card-title"),t._uU(3,"Food Database"),t.qZA(),t.TgZ(4,"button",0),t.NdJ("click",function(){return n.onCreate()}),t._uU(5,"Create"),t.qZA(),t.qZA(),t.YNc(6,We,23,5,"mat-card-content",1),t.qZA()),2&e&&(t.xp6(6),t.Q6J("ngIf",n.hasLoaded))},directives:[l.a8,l.C1,l.n5,f.lW,D.O5,l.dn,T.BZ,L.YE,T.w1,T.fO,T.Dz,T.as,T.nj,x.NW,T.ge,L.nU,T.ev,y.Hw,T.XQ,T.Gk],encapsulation:2}),o})(),Ge=(()=>{class o extends G{}return o.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["app-food"]],features:[t.qOj],decls:2,vars:0,template:function(e,n){1&e&&(t._UZ(0,"app-navbar"),t._UZ(1,"app-food-list"))},directives:[nt,He],encapsulation:2}),o})();const ze=["input"];function Ve(o,r){if(1&o&&(t.TgZ(0,"mat-option",3),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.label)}}let ht=(()=>{class o extends rt{constructor(){super(...arguments),this.blur=new t.vpe}clearFocus(){this.input.nativeElement.blur()}getFieldError(){return q.getErrorMessage(this.fieldControl)}}return o.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["app-select-field"]],viewQuery:function(e,n){if(1&e&&t.Gf(ze,5),2&e){let i;t.iGM(i=t.CRH())&&(n.input=i.first)}},outputs:{blur:"blur"},features:[t.qOj],decls:9,vars:5,consts:[["appearance","outline"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-form-field",0),t.TgZ(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-select",1),t.YNc(4,Ve,2,2,"mat-option",2),t.qZA(),t.TgZ(5,"mat-hint"),t._uU(6),t.qZA(),t.TgZ(7,"mat-error"),t._uU(8),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Oqu(n.label),t.xp6(1),t.Q6J("formControl",n.fieldControl),t.xp6(1),t.Q6J("ngForOf",n.options),t.xp6(2),t.Oqu(n.hint),t.xp6(2),t.Oqu(n.getFieldError()))},directives:[m.KE,m.hX,A.gD,a.JJ,a.oH,D.sg,m.bx,m.TO,b.ey],encapsulation:2}),o})();const Xe=["input"];let gt=(()=>{class o extends rt{constructor(){super(...arguments),this.blur=new t.vpe}clearFocus(){this.input.nativeElement.blur()}getFieldError(){return q.getErrorMessage(this.fieldControl)}}return o.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["app-date-field"]],viewQuery:function(e,n){if(1&e&&t.Gf(Xe,5),2&e){let i;t.iGM(i=t.CRH())&&(n.input=i.first)}},outputs:{blur:"blur"},features:[t.qOj],decls:9,vars:5,consts:[["appearance","outline"],["matInput","",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["picker",""]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-form-field",0),t.TgZ(1,"mat-label"),t._uU(2),t.qZA(),t._UZ(3,"input",1),t.TgZ(4,"mat-error"),t._uU(5),t.qZA(),t._UZ(6,"mat-datepicker-toggle",2),t._UZ(7,"mat-datepicker",null,3),t.qZA()),2&e){const i=t.MAs(8);t.xp6(2),t.Oqu(n.label),t.xp6(1),t.Q6J("matDatepicker",i)("formControl",n.fieldControl),t.xp6(2),t.Oqu(n.getFieldError()),t.xp6(1),t.Q6J("for",i)}},directives:[m.KE,m.hX,Z.Nt,d.hl,a.Fj,a.JJ,a.oH,m.TO,d.nW,m.R9,d.Mq],encapsulation:2}),o})(),Ke=(()=>{class o extends k{constructor(e,n,i,c){super(c),this.profileService=e,this.fb=n,this.dataService=i}onInit(){this.form=this.fb.group({id:new a.NI("profile",a.kI.required),name:new a.NI(null),dob:new a.NI(null),gender:new a.NI(null),height:new a.NI(null,[P.positiveNumber]),exercise:new a.NI(null),targetDiet:new a.NI(null),diet:new a.NI(null),goal:new a.NI(null),setupComplete:new a.NI(!0,a.kI.required)}),this.load()}onSubmit(){this.isFormInvalid()||(this.setLoading(!0),this.profileService.saveProfile(this.form.value).subscribe(()=>{this.sendEvent(U.EVENT_PROFILE_UPDATED),this.toast("Profile was saved"),this.setLoading(!1)},e=>{this.toast(q.getErrorMessage(e)),this.setLoading(!1)}))}getExerciseOptions(){return I.exerciseOptions}getGenderOptions(){return I.genderOptions}getDietOptions(){return I.dietOptions}getGoalOptions(){return I.goalOptions}load(){this.setLoading(!0),this.profileService.getProfile().subscribe(e=>{this.form.patchValue(e),this.setLoading(!1)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(B),t.Y36(a.qu),t.Y36(g),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-profile"]],features:[t.qOj],decls:12,vars:13,consts:[[3,"label","fieldControl"],["label","Gender",3,"fieldControl","options"],["label","Date of Birth",3,"fieldControl"],["label","Height","suffix","CM",3,"fieldControl"],["label","Exercise",3,"fieldControl","options"],["label","Diet",3,"fieldControl","options"],["label","Goal",3,"fieldControl","options"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2,"Profile"),t.qZA(),t._UZ(3,"app-text-field",0),t._UZ(4,"app-select-field",1),t._UZ(5,"app-date-field",2),t._UZ(6,"app-text-field",3),t._UZ(7,"app-select-field",4),t._UZ(8,"app-select-field",5),t._UZ(9,"app-select-field",6),t.TgZ(10,"button",7),t.NdJ("click",function(){return n.onSubmit()}),t._uU(11,"Save"),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("label","Name")("fieldControl",n.getField("name")),t.xp6(1),t.Q6J("fieldControl",n.getField("gender"))("options",n.getGenderOptions()),t.xp6(1),t.Q6J("fieldControl",n.getField("dob")),t.xp6(1),t.Q6J("fieldControl",n.getField("height")),t.xp6(1),t.Q6J("fieldControl",n.getField("exercise"))("options",n.getExerciseOptions()),t.xp6(1),t.Q6J("fieldControl",n.getField("diet"))("options",n.getDietOptions()),t.xp6(1),t.Q6J("fieldControl",n.getField("goal"))("options",n.getGoalOptions()),t.xp6(1),t.Q6J("disabled",n.isLoading()))},directives:[l.a8,l.n5,z,ht,gt,f.lW],encapsulation:2}),o})(),$e=(()=>{class o extends G{}return o.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],features:[t.qOj],decls:2,vars:0,template:function(e,n){1&e&&(t._UZ(0,"app-navbar"),t._UZ(1,"app-profile"))},directives:[nt,Ke],encapsulation:2}),o})();class K{static resetFileEvent(r){r.target.value=null}static createDownload(r,e){const n=new Blob([e]),i=window.document.createElement("a");i.href=window.URL.createObjectURL(n),i.download=r,document.body.appendChild(i),i.click(),document.body.removeChild(i)}static readFile(r){return new Promise((e,n)=>{const i=new FileReader;i.onload=()=>{e(null!=i.result?"string"!=typeof i.result?String.fromCharCode.apply(null,new Uint16Array(i.result)):i.result:"")},i.onerror=c=>{console.error(c),n()},i.readAsText(r)})}}let to=(()=>{class o{constructor(e,n,i){this.weightService=e,this.dataService=n,this.profileService=i}export(){return(0,O.D)(new Promise((e,n)=>{(0,H.D)([this.dataService.listFood(),this.dataService.listFoodDate(),this.weightService.listWeight(),this.profileService.getProfile()]).subscribe(i=>{const c={};c.food=i[0],c.foodDate=i[1],c.weight=i[2],c.profile=i[3];const C=v.format(new Date,v.FORMAT_DATA).replace(/-/g,"_");K.createDownload(`easy_diet_${C}.json`,JSON.stringify(c,null,2)),e(!0)},i=>{n(i)})}))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(R),t.LFG(g),t.LFG(B))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),eo=(()=>{class o extends k{constructor(e,n,i,c,C,F){super(F),this.exportService=e,this.profileService=n,this.messageService=i,this.dataService=c,this.weightService=C}onInit(){}onExport(){this.setLoading(!0),this.exportService.export().subscribe(()=>{this.setLoading(!1)})}onFileSelect(e){const n=e.target.files;if(null==n||1!==n.length)return K.resetFileEvent(e),void this.messageService.open("Invalid files");this.setLoading(!0),K.readFile(n[0]).then(i=>{K.resetFileEvent(e);const c=JSON.parse(i),C=[];null!=c.profile&&C.push(this.profileService.saveProfile(c.profile)),null!=c.food&&c.food.forEach(F=>{C.push(this.dataService.updateFood(F))}),null!=c.foodDate&&c.foodDate.forEach(F=>{C.push(this.dataService.createFoodDate(F))}),null!=c.weight&&c.weight.forEach(F=>{C.push(this.weightService.saveWeight(F))}),new Promise(F=>{this.runObservables(C,F)}).then(()=>{this.messageService.open("Import Complete"),this.setLoading(!1)})})}runObservables(e,n){0!=e.length?e.pop().subscribe(()=>{},c=>{console.error(c)},()=>{this.runObservables(e,n)}):n(!0)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(to),t.Y36(B),t.Y36(ct),t.Y36(g),t.Y36(R),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-export"]],features:[t.qOj],decls:11,vars:2,consts:[["mat-raised-button","",3,"disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"hidden"],["type","file",3,"change"],["fileInput",""]],template:function(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2,"Export"),t.qZA(),t.TgZ(3,"mat-card-content"),t.TgZ(4,"button",0),t.NdJ("click",function(){return t.CHM(i),t.MAs(10).click()}),t._uU(5,"Import"),t.qZA(),t.TgZ(6,"button",1),t.NdJ("click",function(){return n.onExport()}),t._uU(7,"Export"),t.qZA(),t.qZA(),t.TgZ(8,"div",2),t.TgZ(9,"input",3,4),t.NdJ("change",function(C){return n.onFileSelect(C)}),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.xp6(4),t.Q6J("disabled",n.isLoading()),t.xp6(2),t.Q6J("disabled",n.isLoading()))},directives:[l.a8,l.n5,l.dn,f.lW],encapsulation:2}),o})(),oo=(()=>{class o extends G{}return o.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["page-settings"]],features:[t.qOj],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"app-export")},directives:[eo],encapsulation:2}),o})(),bt=(()=>{class o{constructor(e){this.router=e}navigateToHome(){this.router.navigate([""]).then(()=>{},e=>{console.error(e)})}navigateToSetup(){this.router.navigate(["setup"]).then(()=>{},e=>{console.error(e)})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(M.F0))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function no(o,r){1&o&&t._uU(0,"About You")}function ro(o,r){if(1&o&&(t._UZ(0,"app-text-field",5),t._UZ(1,"app-select-field",6),t._UZ(2,"app-date-field",7),t._UZ(3,"app-text-field",8),t._UZ(4,"app-text-field",9),t.TgZ(5,"div",10),t.TgZ(6,"button",11),t._uU(7,"Next"),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.Q6J("fieldControl",e.getProfileField("name")),t.xp6(1),t.Q6J("fieldControl",e.getProfileField("gender"))("options",e.getGenderOptions()),t.xp6(1),t.Q6J("fieldControl",e.getProfileField("dob")),t.xp6(1),t.Q6J("fieldControl",e.getProfileField("height")),t.xp6(1),t.Q6J("fieldControl",e.getWeightField("weight"))}}function io(o,r){1&o&&t.YNc(0,ro,8,6,"ng-template",4)}function ao(o,r){1&o&&t._uU(0,"Your Goals")}function so(o,r){if(1&o){const e=t.EpF();t._UZ(0,"app-select-field",12),t._UZ(1,"app-select-field",13),t._UZ(2,"app-select-field",14),t.TgZ(3,"div",10),t.TgZ(4,"button",15),t._uU(5,"Back"),t.qZA(),t.TgZ(6,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onSubmit()}),t._uU(7,"Submit"),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("fieldControl",e.getProfileField("exercise"))("options",e.getExerciseOptions()),t.xp6(1),t.Q6J("fieldControl",e.getProfileField("diet"))("options",e.getDietOptions()),t.xp6(1),t.Q6J("fieldControl",e.getProfileField("goal"))("options",e.getGoalOptions())}}function lo(o,r){1&o&&t.YNc(0,so,8,6,"ng-template",4)}let co=(()=>{class o extends G{constructor(e,n,i,c,C){super(C),this.fb=e,this.profileService=n,this.router=i,this.weightService=c}onInit(){const e=this.fb.group({id:new a.NI("profile",a.kI.required),name:new a.NI(null,a.kI.required),height:new a.NI(null,[a.kI.required,P.positiveNumber]),exercise:new a.NI(null,[a.kI.required]),diet:new a.NI(null,[a.kI.required]),gender:new a.NI(null,a.kI.required),dob:new a.NI(null,a.kI.required),goal:new a.NI(null,a.kI.required),setupComplete:new a.NI(!0,a.kI.required)}),n=this.fb.group({id:new a.NI(v.today(),a.kI.required),weight:new a.NI(null,[a.kI.required,P.positiveNumber])});this.form=this.fb.group({profile:e,weight:n}),this.setLoading(!0),(0,H.D)([this.profileService.getProfile(),this.weightService.getWeight()]).subscribe(i=>{this.getProfileForm().patchValue(i[0]),this.getWeightForm().patchValue(i[1])},()=>{},()=>{this.setLoading(!1)})}onSubmit(){this.isFormInvalid()||(this.setLoading(!0),(0,H.D)([this.profileService.saveProfile(this.getProfileForm().value),this.weightService.saveWeight(this.getWeightForm().value)]).subscribe(()=>{this.router.navigateToHome()}))}getExerciseOptions(){return I.exerciseOptions}getGenderOptions(){return I.genderOptions}getDietOptions(){return I.dietOptions}getProfileForm(){return this.form.get("profile")}getWeightForm(){return this.form.get("weight")}getGoalOptions(){return I.goalOptions}getProfileField(e){var n;const i=null===(n=this.getProfileForm())||void 0===n?void 0:n.get(e);return null==i?null:i}getWeightField(e){var n;const i=null===(n=this.getWeightForm())||void 0===n?void 0:n.get(e);return null==i?null:i}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(B),t.Y36(bt),t.Y36(R),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["page-setup"]],features:[t.qOj],decls:12,vars:2,consts:[["orientation","vertical","linear",""],["stepper",""],["matStepLabel",""],[4,"ngIf"],["matStepContent",""],["label","Name",3,"fieldControl"],["label","Gender",3,"fieldControl","options"],["label","Date of Birth",3,"fieldControl"],["label","Height","suffix","CM",3,"fieldControl"],["label","Weight","suffix","KG",3,"fieldControl"],[1,"actions"],["mat-raised-button","","color","primary","matStepperNext",""],["label","Exercise",3,"fieldControl","options"],["label","Diet",3,"fieldControl","options"],["label","Goal",3,"fieldControl","options"],["mat-raised-button","","matStepperPrevious",""],["mat-raised-button","","color","primary",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2,"Setup"),t.qZA(),t.TgZ(3,"mat-card-content"),t.TgZ(4,"mat-stepper",0,1),t.TgZ(6,"mat-step"),t.YNc(7,no,1,0,"ng-template",2),t.YNc(8,io,1,0,void 0,3),t.qZA(),t.TgZ(9,"mat-step"),t.YNc(10,ao,1,0,"ng-template",2),t.YNc(11,lo,1,0,void 0,3),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(8),t.Q6J("ngIf",null!=n.form),t.xp6(3),t.Q6J("ngIf",null!=n.form))},directives:[l.a8,l.n5,l.dn,j.Vq,j.C0,j.VY,D.O5,j.BY,z,ht,gt,f.lW,j.Ic,j.fd],encapsulation:2}),o})(),st=(()=>{class o{constructor(e,n){this.profileService=e,this.router=n}canActivate(e,n){return new Promise(i=>{this.profileService.getProfile().subscribe(c=>{if(null==c||null==c.setupComplete||!c.setupComplete)return console.log("Empty"),i(!1),void this.router.navigateToSetup();i(!0)},c=>{console.error(c),i(!1)})})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(B),t.LFG(bt))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const uo=[{path:"",component:De,canActivate:[st]},{path:"food",component:Ge,canActivate:[st]},{path:"profile",component:$e,canActivate:[st]},{path:"setup",component:co},{path:"settings",component:oo}];let po=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[M.Bz.forRoot(uo)],M.Bz]}),o})(),mo=(()=>{class o{constructor(e){this.router=e,this.title="easy-diet";let n=localStorage.getItem("path");n&&(localStorage.removeItem("path"),this.router.navigate([n]))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(M.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-root"]],decls:8,vars:0,consts:[["role","banner",1,"toolbar"],[1,"content"],["role","main",1,"content"],["id","clouds","xmlns","http://www.w3.org/2000/svg","width","2611.084","height","485.677","viewBox","0 0 2611.084 485.677"],["id","Path_39","data-name","Path 39","d","M2379.709,863.793c10-93-77-171-168-149-52-114-225-105-264,15-75,3-140,59-152,133-30,2.83-66.725,9.829-93.5,26.25-26.771-16.421-63.5-23.42-93.5-26.25-12-74-77-130-152-133-39-120-212-129-264-15-54.084-13.075-106.753,9.173-138.488,48.9-31.734-39.726-84.4-61.974-138.487-48.9-52-114-225-105-264,15a162.027,162.027,0,0,0-103.147,43.044c-30.633-45.365-87.1-72.091-145.206-58.044-52-114-225-105-264,15-75,3-140,59-152,133-53,5-127,23-130,83-2,42,35,72,70,86,49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33,61.112,8.015,113.854-5.72,150.492-29.764a165.62,165.62,0,0,0,110.861-3.236c47,94,178,113,251,33,31.385,4.116,60.563,2.495,86.487-3.311,25.924,5.806,55.1,7.427,86.488,3.311,73,80,204,61,251-33a165.625,165.625,0,0,0,120,0c51,13,108,15,157-5a147.188,147.188,0,0,0,33.5-18.694,147.217,147.217,0,0,0,33.5,18.694c49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33C2446.709,1093.793,2554.709,922.793,2379.709,863.793Z","transform","translate(142.69 -634.312)","fill","#eee"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.qZA(),t.TgZ(2,"div",2),t._UZ(3,"router-outlet"),t.O4$(),t.TgZ(4,"svg",3),t.TgZ(5,"title"),t._uU(6,"Gray Clouds Background"),t.qZA(),t._UZ(7,"path",4),t.qZA(),t.qZA())},directives:[M.lC],styles:["",'[_nghost-%COMP%] {\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }']}),o})(),yo=(()=>{class o extends b.LF{parse(e){return v.toDate(e)}}return o.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(o)))(n||o)}}(),o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const vo=[_t,at,(()=>{class o{transform(e,...n){return e instanceof a.NI?q.getErrorMessage(e):e}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"error",type:o,pure:!0}),o})()];let xo=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o,bootstrap:[mo]}),o.\u0275inj=t.cJS({providers:[g,lt,...vo,{provide:b._A,useClass:yo},{provide:t.ip1,useFactory:r=>()=>r.init(),deps:[lt,b._A],multi:!0}],imports:[[u.b2,po,$.PW,a.UX,a.u5,_.Bb,p.Is,m.lN,Z.c,A.LD,f.ot,l.QW,d.FA,b.XK,_.Bb,T.p0,x.TU,L.JX,y.Ps,S.ZX,j.T5,w.Cq]]}),o})();(0,t.G48)(),u.q6().bootstrapModule(xo).catch(o=>console.error(o))},2192:(E,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.EasyIdbDeleteResult=class{}},7231:(E,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.EasyIdbInsertResult=class{constructor(){this.items=[]}}},9569:(E,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.EasyIdbSelectResult=class{constructor(){this.items=[],this.total=0}}},9018:(E,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.EasyIdbFieldCondition=class{constructor(t){this.fieldName=t}getFieldName(){return this.fieldName}}},4489:(E,h,s)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});const u=s(9018),t=s(9399);class a extends u.EasyIdbFieldCondition{constructor(l,b){super(l),this.value=b}getKeyRange(){return t.EasyIdb.getIDBKeyRange().only(this.value)}hasPassed(l){return!(null==this.value||!l.hasOwnProperty(this.getFieldName()))&&l[this.getFieldName()]===this.value}getValue(){return this.value}}h.EasyIdbFieldEquals=a,h.fieldEquals=function(f,l){return new a(f,l)}},4953:(E,h,s)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});const u=s(9018);class t extends u.EasyIdbFieldCondition{constructor(f,l){super(f),this.values=l}getKeyRange(){return null}hasPassed(f){return!(null==this.values||!f.hasOwnProperty(this.fieldName))&&this.values.indexOf(f[this.fieldName])>-1}}h.EasyIdbFieldIn=t,h.fieldIn=function(_,f){return new t(_,f)}},4233:(E,h,s)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});const u=s(9018);class t extends u.EasyIdbFieldCondition{constructor(f){super(f)}getKeyRange(){return null}hasPassed(f){return!f.hasOwnProperty(this.fieldName)||null==f[this.fieldName]}}h.EasyIdbFieldIsNull=t,h.fieldIsNull=function(_){return new t(_)}},9399:(E,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.EasyIdb=(()=>{class u{static setLogging(a){this.logging=a}static isLoggingEnabled(){return this.logging}static setIndexedDB(a){u.indexedDB=a}static setIDBKeyRange(a){u.IDBKeyRange=a}static getIndexedDB(){return null==u.indexedDB?window.indexedDB:u.indexedDB}static getIDBKeyRange(){return null==u.IDBKeyRange?IDBKeyRange:u.IDBKeyRange}}return u.logging=!1,u})()},3619:(E,h,s)=>{"use strict";s(9399);var a=s(232);h.fe=a.EasyIdbMigration;var _=s(1645);h.Z3=_.EasyIdbDatabase,s(1419),s(2757),s(3736),s(3356),s(7231),s(9569),s(9018);var Z=s(4489);h.KA=Z.fieldEquals;var x=s(4953);h.YJ=x.fieldIn;var w=s(4233);h.KO=w.fieldIsNull},5154:(E,h,s)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});const u=s(9399),t=s(1419);h.EasyIdbBuilder=class{constructor(){this.READ_WRITE="readwrite",this.READ_ONLY="readwrite"}init(f,l,b,d){this.databaseName=f,this.databaseVersion=l,this.objectStoreName=b,this.indexStoreName=d}initTransaction(f,l,b=this.READ_ONLY){return new Promise(d=>{this.indexedDatabaseRequest=u.EasyIdb.getIndexedDB().open(this.databaseName,this.databaseVersion),this.indexedDatabaseRequest.onerror=p=>{this.close(),l(t.EasyIdbError.IDBError(p))},this.indexedDatabaseRequest.onsuccess=p=>{if(this.indexedDatabase=p.target.result,!this.indexedDatabase.objectStoreNames.contains(this.objectStoreName))return this.close(),void l(new t.EasyIdbError(t.EasyIdbError.SCHEMA_ERROR,`Database '${this.databaseName}' does not have object store '${this.objectStoreName}'`));this.indexedTransaction=this.indexedDatabase.transaction([this.objectStoreName],b),this.indexedTransaction.onerror=m=>{this.close(),l(t.EasyIdbError.IDBError(m))},this.indexedObjectStore=this.indexedTransaction.objectStore(this.objectStoreName),this.key=this.indexedObjectStore.keyPath,d()}})}close(){null!=this.indexedDatabase&&this.indexedDatabase.close()}executeOnSuccess(f,l){null==f||f(l)}executeOnError(f,l){if(null==f)throw Error(l);f(l)}}},3356:(E,h,s)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});const u=s(5154),t=s(2192),a=s(4489),_=s(1419);h.EasyIdbDeleteQuery=class extends u.EasyIdbBuilder{constructor(){super(...arguments),this.conditions=[]}idEquals(b,d){return this.conditions.push(new a.EasyIdbFieldEquals(b,d)),this}execute(){return new Promise((b,d)=>{if(1!=this.conditions.length)return void d(new _.EasyIdbError(_.EasyIdbError.NOT_IMPLEMENTED,`'Delete query with ${this.conditions.length} not implemented`));const p=this.conditions[0];this.initTransaction(b,d,this.READ_WRITE).then(()=>{const m=this.indexedObjectStore.delete(p.getValue());m.onerror=y=>{this.close(),d(_.EasyIdbError.IDBError(y))},m.onsuccess=()=>{this.close(),b(new t.EasyIdbDeleteResult)}})})}}},3736:(E,h,s)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});const u=s(7231),t=s(1419),a=s(5154);h.EasyIdbInsertQuery=class extends a.EasyIdbBuilder{constructor(){super(...arguments),this._items=[]}item(l){return this._items.push(l),this}execute(l,b){this.executePromise().then(d=>{this.executeOnError(l,d)},d=>{this.executeOnError(b,d)})}executePromise(){return new Promise((l,b)=>{this.initTransaction(l,b,this.READ_WRITE).then(()=>{if(this.indexedTransaction.oncomplete=()=>{const d=new u.EasyIdbInsertResult;d.items=this._items,l(d)},Array.isArray(this.indexedObjectStore.keyPath))return this.close(),void b(new t.EasyIdbError(t.EasyIdbError.NOT_IMPLEMENTED,"Array key path not supported"));for(const d of this._items){const p=this.indexedObjectStore.keyPath;if(!d.hasOwnProperty(p))return this.close(),void b(new t.EasyIdbError(t.EasyIdbError.MISSING_KEY_VALUE,`Item does not have value for key '${p}'`))}this._items.forEach(d=>{this.indexedObjectStore.add(d)})},d=>{b(t.EasyIdbError.IDBError(d))})})}}},2004:(E,h,s)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});const u=s(9399),t=s(1419),a=s(5154);h.EasyIdbPutItemBuilder=class extends a.EasyIdbBuilder{init(l,b,d,p){u.EasyIdb.isLoggingEnabled()&&console.log("[EasyIdbPutItemBuilder]",{databaseName:l,databaseVersion:b,objectStoreName:d,item:p}),super.init(l,b,d),this.item=p}execute(l,b){this.executePromise().then(d=>{this.executeOnError(l,d)},d=>{this.executeOnError(b,d)})}executePromise(){return new Promise((l,b)=>{this.initTransaction(l,b,this.READ_WRITE).then(()=>{try{const d=this.indexedObjectStore.put(this.item);d.onsuccess=()=>{this.close(),l()},d.onerror=p=>{this.close(),b(t.EasyIdbError.IDBError(p))}}catch(d){b(t.EasyIdbError.IDBError(d))}})})}}},2757:(E,h,s)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});const u=s(9569),t=s(4489),a=s(1419),_=s(1069),f=s(5154);class l extends f.EasyIdbBuilder{constructor(){super(...arguments),this.conditions=[],this.itemLimit=null,this.fieldOrderBy=null,this.fieldOrder=null}fetch(d,p){this.fetchPromise().then(m=>{this.executeOnSuccess(d,m)},m=>{this.executeOnError(p,m)})}fetchPromise(){return new Promise((d,p)=>{this.initTransaction(d,p,this.READ_WRITE).then(()=>{const m=this.getRangeKey(),y=this.openCursor(m);y.onerror=x=>{this.close(),p(a.EasyIdbError.IDBError(x))};const Z=[];y.onsuccess=x=>{const w=x.target.result;if(null!=w){const A=w.value;l.passFilter(A,this.conditions)&&Z.push(A),w.continue()}else{const A=new u.EasyIdbSelectResult;A.items=this.limitItems(this.sort(Z)),A.total=A.items.length,this.close(),d(A)}}},m=>{p(a.EasyIdbError.IDBError(m))})})}fetchOne(d,p){this.fetchPromise().then(m=>{m.total>1?this.executeOnError(p,new a.EasyIdbError(a.EasyIdbError.MULTIPLE_ITEMS)):null!=d&&d(0==m.total?null:m.items[0])},m=>{this.executeOnError(p,m)})}getRangeKey(){const d=this.conditions.filter(p=>p.getFieldName()===this.key);return 1==d.length?d[0].getKeyRange():null}sort(d){return null==this.fieldOrderBy?d:_.SortUtil.genericSort(d,this.fieldOrderBy,this.fieldOrder)}openCursor(d){return null!=this.indexedIndexStore?this.indexedIndexStore.openCursor(d):this.indexedObjectStore.openCursor(d)}static passFilter(d,p){let m=!0;if(null!=p)for(const y of p)if(m=y.hasPassed(d)&&m,!m)break;return m}limitItems(d){let m=d.length;return null!=this.itemLimit&&this.itemLimit>-1&&this.itemLimit<d.length&&(m=this.itemLimit),d.slice(0,m)}where(d){return this.conditions.push(d),this}and(d){return this.conditions.push(d),this}fieldEquals(d,p){return this.conditions.push(t.fieldEquals(d,p)),this}orderBy(d,p){return this.fieldOrderBy=d,this.fieldOrder=p,this}}h.EasyIdbSelectQuery=l},1645:(E,h,s)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});const u=s(9399),t=s(3356),a=s(3736),_=s(2004),f=s(2757),l=s(1419);h.EasyIdbDatabase=class{constructor(p){this.name=p}getMigrations(p){return Array.isArray(p)?p:[p]}init(p){return new Promise((m,y)=>{if(null==u.EasyIdb.getIndexedDB())return void y(new l.EasyIdbError(l.EasyIdbError.NOT_SUPPORTED,"IndexedDB is not supported"));Array.isArray(p)?(p.sort((x,w)=>x.getVersion()-w.getVersion()),this.version=p[p.length-1].getVersion()):this.version=p.getVersion();const Z=u.EasyIdb.getIndexedDB().open(this.name,this.version);Z.onerror=x=>{y(l.EasyIdbError.IDBError(x))},Z.onupgradeneeded=x=>{const w=x.target.result;w.onerror=S=>{y(l.EasyIdbError.IDBError(S))};const A=x.target.transaction;A.onerror=S=>{y(l.EasyIdbError.IDBError(S))},this.getMigrations(p).forEach(S=>{S.database=w,S.transaction=A,S.runMigration(x.oldVersion)})},Z.onsuccess=x=>{x.target.result.close();let A=[];this.getMigrations(p).forEach(S=>{const L=S.getMigrationItems();Object.keys(L).forEach(j=>{const T=L[j];null!=T&&T.forEach($=>{A.push(this.insertInto(j).item($))})})}),this.executeQueries(m,A)}})}executeQueries(p,m){0!=m.length?m.pop().execute(()=>{this.executeQueries(p,m)},()=>{this.executeQueries(p,m)}):p()}delete(p){const m=new t.EasyIdbDeleteQuery;return m.init(this.name,this.version,p),m}insertInto(p){const m=new a.EasyIdbInsertQuery;return m.init(this.name,this.version,p),m}put(p,m){const y=new _.EasyIdbPutItemBuilder;return y.init(this.name,this.version,p,m),y}selectFrom(p){const m=new f.EasyIdbSelectQuery;return m.init(this.name,this.version,p),m}}},1419:(E,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.EasyIdbError=(()=>{class u{constructor(a=u.ERROR,_="Error"){this.code=a,this.message=_}static IDBError(a){return console.error(a),null!=a&&null!=a.target&&null!=a.target.error&&null!=a.target.error.message?new u(u.IDB_ERROR,a.target.error.message):new u(u.IDB_ERROR)}}return u.ERROR="ERROR",u.NOT_SUPPORTED="IndexedDVNotSupported",u.NOT_IMPLEMENTED="NotImplemented",u.IDB_ERROR="IdbError",u.MISSING_KEY_VALUE="MissingKeyValue",u.SCHEMA_ERROR="SchemaError",u.MULTIPLE_ITEMS="MultipleItems",u})()},232:(E,h,s)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});const u=s(1419);h.EasyIdbMigration=class{constructor(){this.items={}}runMigration(_){_<=this.getVersion()&&this.migrate()}getMigrationItems(){return this.items}createItem(_,f){let l=this.items[_];null==l&&(l=[],this.items[_]=l),l.push(f)}createTable(_,f){this.database.createObjectStore(_,{keyPath:f})}createIndex(_,f,l,b){const d=this.transaction.objectStore(_);if(null==d)throw new u.EasyIdbError(u.EasyIdbError.SCHEMA_ERROR,`Could not create index '${f}', table '${_} does not exist`);if(d.indexNames.contains(f))throw new u.EasyIdbError(u.EasyIdbError.SCHEMA_ERROR,`Index '${f} already exists on table '${_}`);d.createIndex(f,l,{unique:b})}}},1069:(E,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.SortUtil=(()=>{class u{static genericSort(a,_,f){return a.sort((l,b)=>{const d=l.hasOwnProperty(_)?l[_]:null,p=b.hasOwnProperty(_)?b[_]:null;return this.compare(d,p,"ASC"==f?1:-1)})}static compare(a,_,f){if(null==a&&null==_)return 0;if(null==a)return this.LESS_THAN*f;if(null==_)return this.GREATER_THAN*f;const l=this.compareType(a,_);if(l!=this.EQUAL)return l*f;switch(typeof a){case"string":return this.compareString(a,_)*f;case"number":return this.compareNumber(a,_)*f;default:return 0}}static compareType(a,_){const f=["number","string"],l=f.indexOf(typeof a),b=f.indexOf(typeof _);return l==b?0:l>b?this.GREATER_THAN:this.LESS_THAN}static compareString(a,_){return a.toLowerCase()==_.toLowerCase()?0:a.toLowerCase()>_.toLowerCase()?this.GREATER_THAN:this.LESS_THAN}static compareNumber(a,_){return a>_?this.GREATER_THAN:this.LESS_THAN}}return u.LESS_THAN=-1,u.EQUAL=0,u.GREATER_THAN=1,u})()},6700:(E,h,s)=>{var u={"./af":7088,"./af.js":7088,"./ar":7038,"./ar-dz":2502,"./ar-dz.js":2502,"./ar-kw":128,"./ar-kw.js":128,"./ar-ly":4519,"./ar-ly.js":4519,"./ar-ma":5443,"./ar-ma.js":5443,"./ar-sa":7642,"./ar-sa.js":7642,"./ar-tn":8592,"./ar-tn.js":8592,"./ar.js":7038,"./az":1213,"./az.js":1213,"./be":9191,"./be.js":9191,"./bg":322,"./bg.js":322,"./bm":8042,"./bm.js":8042,"./bn":9620,"./bn-bd":5903,"./bn-bd.js":5903,"./bn.js":9620,"./bo":9645,"./bo.js":9645,"./br":5020,"./br.js":5020,"./bs":4792,"./bs.js":4792,"./ca":7980,"./ca.js":7980,"./cs":7322,"./cs.js":7322,"./cv":365,"./cv.js":365,"./cy":2092,"./cy.js":2092,"./da":7387,"./da.js":7387,"./de":4307,"./de-at":9459,"./de-at.js":9459,"./de-ch":3694,"./de-ch.js":3694,"./de.js":4307,"./dv":9659,"./dv.js":9659,"./el":3460,"./el.js":3460,"./en-au":4369,"./en-au.js":4369,"./en-ca":530,"./en-ca.js":530,"./en-gb":9998,"./en-gb.js":9998,"./en-ie":3391,"./en-ie.js":3391,"./en-il":5414,"./en-il.js":5414,"./en-in":9615,"./en-in.js":9615,"./en-nz":1248,"./en-nz.js":1248,"./en-sg":3767,"./en-sg.js":3767,"./eo":4530,"./eo.js":4530,"./es":6866,"./es-do":8944,"./es-do.js":8944,"./es-mx":9116,"./es-mx.js":9116,"./es-us":3609,"./es-us.js":3609,"./es.js":6866,"./et":6725,"./et.js":6725,"./eu":7931,"./eu.js":7931,"./fa":6417,"./fa.js":6417,"./fi":944,"./fi.js":944,"./fil":1766,"./fil.js":1766,"./fo":5867,"./fo.js":5867,"./fr":1636,"./fr-ca":6848,"./fr-ca.js":6848,"./fr-ch":7773,"./fr-ch.js":7773,"./fr.js":1636,"./fy":4940,"./fy.js":4940,"./ga":1402,"./ga.js":1402,"./gd":6924,"./gd.js":6924,"./gl":6398,"./gl.js":6398,"./gom-deva":2457,"./gom-deva.js":2457,"./gom-latn":2545,"./gom-latn.js":2545,"./gu":2641,"./gu.js":2641,"./he":7536,"./he.js":7536,"./hi":6335,"./hi.js":6335,"./hr":7458,"./hr.js":7458,"./hu":6540,"./hu.js":6540,"./hy-am":5283,"./hy-am.js":5283,"./id":8780,"./id.js":8780,"./is":4205,"./is.js":4205,"./it":4211,"./it-ch":9985,"./it-ch.js":9985,"./it.js":4211,"./ja":1003,"./ja.js":1003,"./jv":420,"./jv.js":420,"./ka":851,"./ka.js":851,"./kk":6074,"./kk.js":6074,"./km":3343,"./km.js":3343,"./kn":4799,"./kn.js":4799,"./ko":3549,"./ko.js":3549,"./ku":1037,"./ku.js":1037,"./ky":3125,"./ky.js":3125,"./lb":9586,"./lb.js":9586,"./lo":2349,"./lo.js":2349,"./lt":2400,"./lt.js":2400,"./lv":9991,"./lv.js":9991,"./me":8477,"./me.js":8477,"./mi":5118,"./mi.js":5118,"./mk":5943,"./mk.js":5943,"./ml":3849,"./ml.js":3849,"./mn":1977,"./mn.js":1977,"./mr":6184,"./mr.js":6184,"./ms":485,"./ms-my":4524,"./ms-my.js":4524,"./ms.js":485,"./mt":6681,"./mt.js":6681,"./my":2024,"./my.js":2024,"./nb":2688,"./nb.js":2688,"./ne":8914,"./ne.js":8914,"./nl":1758,"./nl-be":2272,"./nl-be.js":2272,"./nl.js":1758,"./nn":1510,"./nn.js":1510,"./oc-lnc":2797,"./oc-lnc.js":2797,"./pa-in":7944,"./pa-in.js":7944,"./pl":1605,"./pl.js":1605,"./pt":4225,"./pt-br":3840,"./pt-br.js":3840,"./pt.js":4225,"./ro":5128,"./ro.js":5128,"./ru":5127,"./ru.js":5127,"./sd":2525,"./sd.js":2525,"./se":9893,"./se.js":9893,"./si":3123,"./si.js":3123,"./sk":9635,"./sk.js":9635,"./sl":8106,"./sl.js":8106,"./sq":8799,"./sq.js":8799,"./sr":7949,"./sr-cyrl":2872,"./sr-cyrl.js":2872,"./sr.js":7949,"./ss":6167,"./ss.js":6167,"./sv":9713,"./sv.js":9713,"./sw":1982,"./sw.js":1982,"./ta":2732,"./ta.js":2732,"./te":3636,"./te.js":3636,"./tet":2115,"./tet.js":2115,"./tg":9801,"./tg.js":9801,"./th":2868,"./th.js":2868,"./tk":1310,"./tk.js":1310,"./tl-ph":2360,"./tl-ph.js":2360,"./tlh":6645,"./tlh.js":6645,"./tr":8374,"./tr.js":8374,"./tzl":256,"./tzl.js":256,"./tzm":1595,"./tzm-latn":1631,"./tzm-latn.js":1631,"./tzm.js":1595,"./ug-cn":6050,"./ug-cn.js":6050,"./uk":5610,"./uk.js":5610,"./ur":6077,"./ur.js":6077,"./uz":2862,"./uz-latn":2207,"./uz-latn.js":2207,"./uz.js":2862,"./vi":8093,"./vi.js":8093,"./x-pseudo":5590,"./x-pseudo.js":5590,"./yo":9058,"./yo.js":9058,"./zh-cn":7908,"./zh-cn.js":7908,"./zh-hk":8867,"./zh-hk.js":8867,"./zh-mo":1133,"./zh-mo.js":1133,"./zh-tw":3291,"./zh-tw.js":3291};function t(_){var f=a(_);return s(f)}function a(_){if(!s.o(u,_)){var f=new Error("Cannot find module '"+_+"'");throw f.code="MODULE_NOT_FOUND",f}return u[_]}t.keys=function(){return Object.keys(u)},t.resolve=a,E.exports=t,t.id=6700}},E=>{E.O(0,[736],()=>E(E.s=6881)),E.O()}]);