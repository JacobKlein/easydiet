(self.webpackChunkeasy_template=self.webpackChunkeasy_template||[]).push([[179],{1832:(D,p,r)=>{"use strict";var l=r(2313),e=r(5e3),g=r(3737),f=r(7423),m=r(5245),d=r(6087),h=r(2638),c=r(4847),_=r(2081),u=r(4999),F=r(4594),B=r(6360),M=r(1083);let j=(()=>{class n{constructor(){this.title="easy-template"}getVersion(){return"Build 2025-03-04"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-root"]],decls:9,vars:1,consts:[["role","banner",1,"toolbar"],["width","40","alt","Angular Logo","src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="],[1,"spacer"],["role","main",1,"content"],[2,"color","gray"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"span"),e._uU(3,"EasyDiet"),e.qZA(),e._UZ(4,"div",2),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"router-outlet"),e.TgZ(7,"div",4),e._uU(8),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Oqu(s.getVersion()))},directives:[M.lC],styles:["",'[_nghost-%COMP%] {\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-size: 14px;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%] {\n    margin: 8px 0;\n  }\n\n  p[_ngcontent-%COMP%] {\n    margin: 0;\n  }\n\n  .spacer[_ngcontent-%COMP%] {\n    flex: 1;\n  }\n\n  .toolbar[_ngcontent-%COMP%] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 60px;\n    display: flex;\n    align-items: center;\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n    margin: 0 16px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%] {\n    height: 40px;\n    margin: 0 8px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%] {\n    height: 40px;\n    margin: 0 16px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover {\n    opacity: 0.8;\n  }\n\n  .content[_ngcontent-%COMP%] {\n    margin: 82px auto 32px;\n    padding: 0 16px;\n    max-width: 960px;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  svg.material-icons[_ngcontent-%COMP%] {\n    height: 24px;\n    width: auto;\n  }\n\n  svg.material-icons[_ngcontent-%COMP%]:not(:last-child) {\n    margin-right: 8px;\n  }\n\n  .card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n    fill: #888;\n  }\n\n  .card-container[_ngcontent-%COMP%] {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    margin-top: 16px;\n  }\n\n  .card[_ngcontent-%COMP%] {\n    all: unset;\n    border-radius: 4px;\n    border: 1px solid #eee;\n    background-color: #fafafa;\n    height: 40px;\n    width: 200px;\n    margin: 0 8px 16px;\n    padding: 16px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    transition: all 0.2s ease-in-out;\n    line-height: 24px;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child) {\n    margin-right: 0;\n  }\n\n  .card.card-small[_ngcontent-%COMP%] {\n    height: 16px;\n    width: 168px;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card) {\n    cursor: pointer;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover {\n    transform: translateY(-3px);\n    box-shadow: 0 4px 17px rgba(0, 0, 0, 0.35);\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n    fill: rgb(105, 103, 103);\n  }\n\n  .card.highlight-card[_ngcontent-%COMP%] {\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n    border: none;\n    width: auto;\n    min-width: 30%;\n    position: relative;\n  }\n\n  .card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n    margin-left: 60px;\n  }\n\n  svg#rocket[_ngcontent-%COMP%] {\n    width: 80px;\n    position: absolute;\n    left: -10px;\n    top: -24px;\n  }\n\n  svg#rocket-smoke[_ngcontent-%COMP%] {\n    height: calc(100vh - 95px);\n    position: absolute;\n    top: 10px;\n    right: 180px;\n    z-index: -10;\n  }\n\n  a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover {\n    color: #1976d2;\n    text-decoration: none;\n  }\n\n  a[_ngcontent-%COMP%]:hover {\n    color: #125699;\n  }\n\n  .terminal[_ngcontent-%COMP%] {\n    position: relative;\n    width: 80%;\n    max-width: 600px;\n    border-radius: 6px;\n    padding-top: 45px;\n    margin-top: 8px;\n    overflow: hidden;\n    background-color: rgb(15, 15, 16);\n  }\n\n  .terminal[_ngcontent-%COMP%]::before {\n    content: "\\2022 \\2022 \\2022";\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 4px;\n    background: rgb(58, 58, 58);\n    color: #c2c3c4;\n    width: 100%;\n    font-size: 2rem;\n    line-height: 0;\n    padding: 14px 0;\n    text-indent: 4px;\n  }\n\n  .terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%] {\n    font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, monospace;\n    color: white;\n    padding: 0 1rem 1rem;\n    margin: 0;\n  }\n\n  .circle-link[_ngcontent-%COMP%] {\n    height: 40px;\n    width: 40px;\n    border-radius: 40px;\n    margin: 8px;\n    background-color: white;\n    border: 1px solid #eeeeee;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n    transition: 1s ease-out;\n  }\n\n  .circle-link[_ngcontent-%COMP%]:hover {\n    transform: translateY(-0.25rem);\n    box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n  }\n\n  footer[_ngcontent-%COMP%] {\n    margin-top: 8px;\n    display: flex;\n    align-items: center;\n    line-height: 20px;\n  }\n\n  footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n    display: flex;\n    align-items: center;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%] {\n    color: #24292e;\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    padding: 3px 10px;\n    border: 1px solid rgba(27, 31, 35, .2);\n    border-radius: 3px;\n    background-image: linear-gradient(-180deg, #fafbfc, #eff3f6 90%);\n    margin-left: 4px;\n    font-weight: 600;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%]:hover {\n    background-image: linear-gradient(-180deg, #f0f3f6, #e6ebf1 90%);\n    border-color: rgba(27, 31, 35, .35);\n    background-position: -.5em;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%] {\n    height: 16px;\n    width: 16px;\n    margin-right: 4px;\n  }\n\n  svg#clouds[_ngcontent-%COMP%] {\n    position: fixed;\n    bottom: -160px;\n    left: -230px;\n    z-index: -10;\n    width: 1920px;\n  }\n\n  \n  @media screen and (max-width: 767px) {\n    .card-container[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%] {\n      width: 100%;\n    }\n\n    .card[_ngcontent-%COMP%]:not(.highlight-card) {\n      height: 16px;\n      margin: 8px 0;\n    }\n\n    .card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n      margin-left: 72px;\n    }\n\n    svg#rocket-smoke[_ngcontent-%COMP%] {\n      right: 120px;\n      transform: rotate(-5deg);\n    }\n  }\n\n  @media screen and (max-width: 575px) {\n    svg#rocket-smoke[_ngcontent-%COMP%] {\n      display: none;\n      visibility: hidden;\n    }\n  }']}),n})();class R{constructor(){this.loading=!1,this.exception=null}}var q=r(5439),k=r(508);class O{constructor(o){this.adapter=o}setLocale(o){if(null==o||o==O.VALUE_BROWSER_DEFAULT)return void this.setLocaleValue(O.LOCALE_BROWSER_DEFAULT);let t=O.OPTIONS_LOCALES.find(i=>i.value==o),s=null==t?O.LOCALE_BROWSER_DEFAULT:t.value;null==t&&console.warn(`Could not find locale ${o}. Defaulting to ${s}`),this.setLocaleValue(s)}setLocaleValue(o){this.adapter.setLocale(o),q.locale(o)}}O.LOCALE_BROWSER_DEFAULT=navigator.language.valueOf(),O.VALUE_BROWSER_DEFAULT="BROWSER_DEFAULT",O.OPTION_BROWSER_DEFAULT={label:"Browser Default",value:O.VALUE_BROWSER_DEFAULT},O.OPTIONS_LOCALES=[{label:"English (Australia)",value:"en-AU"},{label:"English (United Kingdom)",value:"en-GB"},{label:"English (United States)",value:"en-US"}],O.\u0275fac=function(o){return new(o||O)(e.LFG(k._A))},O.\u0275prov=e.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"});let H,me=(()=>{class n{constructor(t,s,i){this.injector=t,this._adapter=s,this.localeService=i,H=t}init(){return this.localeService.setLocale(O.LOCALE_BROWSER_DEFAULT),Promise.resolve()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.zs3),e.LFG(k._A),e.LFG(O))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();let X=(()=>{class n{static isDeveloperMode(){return-1!==window.location.href.indexOf("?debug")||-1!==window.location.href.indexOf("&debug")}static getTitle(){return"App Title"}static getVersion(){return"0.1.0"}getTitle(){return n.getTitle()}getVersion(){return n.getVersion()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var se=r(8966);let Ee=(()=>{class n{constructor(){this.dialog=H.get(se.uw)}confirm(t){return new Promise(s=>s(confirm(t)))}openWithInstance(t){return this.dialog.open(t)}open(t,s,i){return this.dialog.open(t,{data:s,panelClass:"dialog",disableClose:null!=i&&null!=i.disableClose&&i.disableClose,autoFocus:null!=i&&null!=i.autoFocus&&i.autoFocus})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var pe=r(520),ut=r(2843);let I=(()=>{class n{static init(){}static now(){return new Date}static getYearLabel(t=null){return(null==t?new Date:this.parseDate(t)).getFullYear().toString()}static getMonthLabel(t=null){return null==t?this.getMonthLabel(new Date):this.parseDate(t).toLocaleString("default",{month:"long"})}static parseDate(t){return"string"==typeof t?new Date(t):t}static convertToDate(t,s=this.getLocalFormat()){const i=this.format(t,this.FORMAT_SERVER,s);return new Date(i)}static isValid(t,s=n.getLocalFormat()){return q(t,s,!0).isValid()}static getLocalFormat(){return q.localeData().longDateFormat("L")}static format(t,s,i=null){return null==t?null:t instanceof Date?q(t).format(s):this.isValid(t,i)?q(t,i,!0).format(s):null}static formatToServer(t){return n.format(t,n.FORMAT_SERVER,n.getLocalFormat())}static formatToClient(t){return n.format(t,n.getLocalFormat(),n.FORMAT_SERVER)}static getStartOfYear(t){let s="string"==typeof t?n.parseDate(t):t;return new Date(s.getFullYear(),0,1)}static getEndOfYear(t){let s="string"==typeof t?n.parseDate(t):t;return new Date(s.getFullYear(),11,31)}static getStartOfMonth(t){let s="string"==typeof t?n.parseDate(t):t;return new Date(s.getFullYear(),s.getMonth(),1)}static getEndOfMonth(t){let s="string"==typeof t?n.parseDate(t):t;return new Date(s.getFullYear(),s.getMonth()+1,0)}static dayDifference(t,s){const i=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),a=Date.UTC(s.getFullYear(),s.getMonth(),s.getDate());return Math.floor((a-i)/864e5)}static addMonths(t,s){return t.setMonth(t.getMonth()+s),t}static addDays(t,s){const i=new Date(t);return i.setDate(t.getDate()+s),i}static compare(t,s){return t.getTime()===s.getTime()?0:t.getTime()-s.getTime()}}return n.FORMAT_SERVER="YYYY-MM-DD",n.FORMAT_OFX="YYYYMMDD000000",n.FORMAT_QFX="YYYYMMDD",n})(),K=(()=>{class n{static logFormErrors(t){t.forEach(s=>{null!=s.formGroup.errors&&console.error("FORM",s.formGroup.errors),Object.keys(s.formGroup.controls).forEach(i=>{var a;const b=s.formGroup.get(i);null!=b&&!b.valid&&console.error(i,null===(a=s.formGroup.get(i))||void 0===a?void 0:a.errors)})})}static notImplemented(t){return(0,ut._)(null==t?"Not Implemented":`Not Implemented - ${t}`)}static getErrorMessage(t){return"string"==typeof t?t:t instanceof pe.UA&&null!=t.error&&null!=t.error.message?t.error.message:"Aww Snap"}static getControlError(t){return null==t?"Aww Snap":t.required?"Required":t.date?"Date must be in format "+t.date:t.matDatepickerParse?"Date must be in format "+I.getLocalFormat():t.number?"Value must be a number":t.positiveNumber?"Value must be a positive number":t.autoComplete?"Please select a value":t.email?"Must be a valid email address":t.maxlength?`${t.maxlength.actualLength}/${t.maxlength.requiredLength}`:t[Object.keys(t)[0]]}}return n.ERROR_GENERIC="Something bad happened",n.ERROR_FORM_VALIDATION="Please check the form and try again",n})();class E{constructor(){this.TEXT_RESET="\x1b[0m",this.TEXT_CYAN="\x1b[36m",this.TEXT_RED="\x1b[31m",this.TEXT_GREEN="\x1b[32m",this.TEXT_YELLOW="\x1b[33m"}static EasyLoggerFactory(o){const t=new E;return t.className="object"==typeof o?o.constructor.name:"string"==typeof o?o:o.name,t}error(...o){const t=[(new Date).toISOString(),"[ERROR]",`${this.className}:`,...o];console.error(t.join(" "))}warn(...o){this.logMessage(E.LEVEL_WARN,this.TEXT_YELLOW,...o)}info(...o){this.logMessage(E.LEVEL_INFO,this.TEXT_RESET,...o)}debug(...o){this.logMessage(E.LEVEL_DEBUG,this.TEXT_RESET,...o)}dev(...o){this.logMessage(E.LEVEL_DEV,this.TEXT_RESET,...o)}test(...o){this.logMessage(E.LEVEL_TEST,this.TEXT_RESET,...o)}logMessage(o,t,...s){if(E.LEVELS.indexOf(E.logLevel)>E.LEVELS.indexOf(o))return;const b=[(new Date).toISOString(),this.colour(`[${o.replace("LEVEL_","")}]`,t),this.colour(`[${this.className}]`,this.TEXT_GREEN),...s];console.log(b.join(" "))}colour(o,t){return`${t}${o}${this.TEXT_RESET}`}red(o){return o}}E.LEVEL_TEST="LEVEL_TEST",E.LEVEL_DEV="LEVEL_DEV",E.LEVEL_DEBUG="LEVEL_DEBUG",E.LEVEL_INFO="LEVEL_INFO",E.LEVEL_WARN="LEVEL_WARN",E.LEVEL_ERROR="LEVEL_ERROR",E.LEVEL_OFF="LEVEL_OFF",E.LEVELS=[E.LEVEL_TEST,E.LEVEL_DEV,E.LEVEL_DEBUG,E.LEVEL_INFO,E.LEVEL_WARN,E.LEVEL_ERROR],E.logLevel=X.isDeveloperMode()?E.LEVEL_DEV:E.LEVEL_INFO,E.\u0275fac=function(o){return new(o||E)},E.\u0275prov=e.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"});var Oe=r(7261);let Le=(()=>{class n{constructor(t){this.snack=t}error(t){console.error(t),this.snack.open(K.getErrorMessage(t),null,{duration:3e3})}toast(t){this.snack.open(t,null,{duration:3e3})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Oe.ux))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();class P{static send(o,t){const s=P.namedEvents[o];null!=s?s.forEach(i=>{null!=i&&i.receiveEvent(o,t)}):this.logger.info("No listeners for event",o)}register(o,...t){null!=t&&0!=t.length?t.forEach(s=>{let i=P.namedEvents[s];null==i&&(i=[],P.namedEvents[s]=i),i.push(o)}):P.logger.error(`'Cannot register ${o.constructor.name} with empty events')`)}deregister(o){Object.keys(P.namedEvents).forEach(t=>{const s=P.namedEvents[t];if(null!=s)for(;-1!==s.indexOf(o);)s.splice(s.indexOf(o),1)})}}P.namedEvents={},P.logger=E.EasyLoggerFactory("EasyEventService"),P.\u0275fac=function(o){return new(o||P)},P.\u0275prov=e.Yz7({token:P,factory:P.\u0275fac});let U=(()=>{class n{constructor(t){this.state=new R,this.subscriptions=[],this.componentClasses=[],this.cd=t,this.toastService=this.getInjected(Le),this.dialogService=this.getInjected(Ee),this.eventService=this.getInjected(P),this.logger=E.EasyLoggerFactory(this)}ngOnInit(){null!=this.route?this.subscriptions.push(this.route.params.subscribe(t=>{this.params=t,this.afterParamLoad()})):this.afterParamLoad()}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}getInjected(t){return null==H?null:H.get(t)}isDeveloperMode(){return X.isDeveloperMode()}ignoreDraggable(t){t.stopPropagation()}afterParamLoad(){this.initCommonParams(),this.initParams(),this.initClasses(),this.setClasses(),this.onInit()}onInit(){}initClasses(){}setClasses(){this.componentClass=this.componentClasses.join(" ")}registerEvent(t){this.eventService.register(this,t)}trySubmitForms(...t){return t.forEach(s=>s.markAsTouched()),K.logFormErrors(t),null==t.find(s=>!s.isValid())}hasException(){return null!=this.state.exception}getException(){return K.getErrorMessage(this.state.exception)}setException(t){console.error(t),this.state={loading:this.state.loading,exception:t},this.markForCheck()}isLoading(){return this.state.loading&&null==this.state.exception}hasLoaded(){return!this.state.loading&&null==this.state.exception}setLoading(t){this.state={loading:t,exception:this.state.exception},this.markForCheck()}toast(t){null!=this.toastService?this.toastService.toast(t):alert(t)}toastError(t){console.error(t);const s=K.getErrorMessage(t);null!=this.toastService&&this.toastService.toast(s)}detectChanges(){null!=this.cd?this.cd.detectChanges():X.isDeveloperMode()&&console.warn(`${this.constructor.name}.detectChanges: ChangeDetectionRef is null`)}markForCheck(){null!=this.cd?this.cd.markForCheck():X.isDeveloperMode()&&console.warn(`${this.constructor.name}.markForCheck: ChangeDetectionRef is null`)}addSubscription(t){this.subscriptions.push(t)}getState(){return this.state}initCommonParams(){}initParams(){}getRouteParam(t){return null==this.route?(console.error(`getRouteParam(component: ${this.constructor.name}, param: ${t}): ActivatedRoute is null`),null):null==this.params?(console.error(`getRouteParam(component: ${this.constructor.name}, param: ${t}): Params are null`),null):this.params[t]}unsubscribe(t){null!=t&&t.unsubscribe()}devLog(...t){!X.isDeveloperMode()||console.log("[DEV]",this.constructor.name,...t)}receiveEvent(t,s){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],hostVars:1,hostBindings:function(t,s){2&t&&e.Ikx("className",s.componentClass)},decls:0,vars:0,template:function(t,s){},encapsulation:2}),n})();var A=r(3075),dt=r(1042);let Y=(()=>{class n{static generateId(){return dt.Z()}static escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}static toTitleCase(t){return t.replace(/\w\S*/g,function(s){return s.charAt(0).toUpperCase()+s.substr(1).toLowerCase()})}static replace(t,s,i){return t.replace(new RegExp(this.escapeRegExp(s),"g"),i)}static removeSpecialCharacters(t){return t.replace(/\W/g,"")}static isBlank(t){return null==t||""===t}static isNotBlank(t){return!this.isBlank(t)}}return n.PATTERN_EMAIL="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$",n})(),ie=(()=>{class n{static email(t){return Y.isBlank(t.value)||new RegExp(Y.PATTERN_EMAIL).test(t.value)?null:{email:!0}}static date(t){return Y.isBlank(t.value)||I.isValid(t.value)?null:{date:I.getLocalFormat()}}static positiveNumber(t){const s=n.getRawNumber(t.value);return null==s||""===s?null:isNaN(s)?{number:!0}:+s<=0?{positiveNumber:!0}:null}static custom(t){return()=>Object.keys(t.customErrors).length>0?t.customErrors:null}static number(t){const s=n.getRawNumber(t.value);return null==s||""===s?null:isNaN(s)?{number:!0}:null}static getRawNumber(t){return t}static autoComplete(t){return s=>{const i=s.value;if(null==i||""===i)return null;const a=null==t?null:t.filter(b=>b.value===i);return 1==a.length?null:0==a.length?n.AUTOCOMPLETE_NONE_SELECTED:a.length>1?{autoComplete:"Multiple items found"}:{autoComplete:"Aww Snap"}}}}return n.AUTOCOMPLETE_NONE_SELECTED={autoComplete:"Please select a value"},n})();var y=(()=>{return(n=y||(y={})).id="id",n.text="text",n.textArea="textArea",n.number="number",n.decimal="decimal",n.date="date",n.autoComplete="autoComplete",n.select="select",n.multiSelect="multiSelect",n.email="email",n.password="password",n.file="file",n.checkbox="checkbox",y;var n})();class T{constructor(o){this.customErrors={},this.config=null==o?{}:o,this.config.type==y.id&&(this.config.readOnly=!0,this.config.label="id"),this.config.visible=this.defaultIfNull(this.config.visible,this.config.type!=y.id),this.config.options=this.defaultIfNull(this.config.options,[]);const t=this.config.options.find(b=>null==b.value);this.config.type!=y.select||null!=this.config.includeEmptyValue&&!this.config.includeEmptyValue||null!=t||(this.config.options=[{value:null,label:null}].concat(this.config.options));const i=[];switch(i.push(ie.custom(this)),this.config.required&&i.push(A.kI.required),this.config.requiredTrue&&i.push(A.kI.requiredTrue),this.config.type){case y.text:case y.textArea:const b=null==this.config.maxLength?200:this.config.maxLength;this.config.maxLength=200,i.push(A.kI.maxLength(b));break;case y.email:const L=null==this.config.maxLength?320:this.config.maxLength;this.config.maxLength=L,i.push(A.kI.maxLength(L)),i.push(ie.email);break;case y.date:i.push(ie.date);break;case y.number:case y.decimal:i.push(ie.number),o.positiveNumber&&i.push(ie.positiveNumber);break;case y.autoComplete:i.push(ie.autoComplete(this.config.options))}let a=T.getFieldValue(this.config.type,this.config.value);this.formControl=new A.NI(a,i),this.valueChanges=this.formControl.valueChanges}static id(o){return this.createField(y.id,o)}static file(o){return this.createField(y.file,o)}static date(o){return this.createField(y.date,o)}static text(o){return this.createField(y.text,o)}static textArea(o){return this.createField(y.textArea,o)}static checkbox(o){return this.createField(y.checkbox,o)}static decimal(o){return this.createField(y.decimal,o)}static autoComplete(o){return this.createField(y.autoComplete,o)}static select(o){return this.createField(y.select,o)}static number(o){return this.createField(y.number,o)}static email(o){return this.createField(y.email,o)}static password(o){return this.createField(y.password,o)}static multiSelect(o){return this.createField(y.multiSelect,o)}static createField(o,t){const s=null==t?{}:t;return s.type=o,new T(s)}static getFieldValue(o,t){return o===y.date&&"string"==typeof t?I.convertToDate(t,I.FORMAT_SERVER):t}isValid(){return this.formControl.valid}getValue(){const o=this.formControl.value;return this.config.type==y.date?I.formatToServer(o):o}setValue(o,t){this.formControl.setValue(o,t)}enable(o=!0){this.formControl.enable({emitEvent:o})}disable(o=!0){this.formControl.disable({emitEvent:o})}setEnabled(o,t=!0){o?this.enable(t):this.disable(t)}addCustomError(o,t){this.customErrors[o]=t,this.getFormControl().updateValueAndValidity()}clearCustomError(o){delete this.customErrors[o]}patchValue(o){}markAsTouched(){this.formControl.markAsTouched()}getFormControl(){return this.formControl}defaultIfNull(o,t){return null==o?t:o}}class W{constructor(o){this.valueChanges=new e.vpe,this.blur=new e.vpe,this.fields=[],this.fieldsByName={},this.formGroup=H.get(A.qu).group({}),null!=o&&(Object.keys(o).forEach(t=>{this.addField(t,o[t])}),this.formGroup.valueChanges.subscribe(()=>{this.valueChanges.emit()}))}enable(){this.formGroup.enable()}disable(){this.formGroup.disable()}setEnabled(o){o?this.enable():this.disable()}patchValue(o,t){null!=o&&Object.keys(o).forEach(s=>{this.setFieldValue(s,o[s],{warnMissingField:!1})})}getFieldNames(){return Object.keys(this.fieldsByName)}getValue(){const o={};return Object.keys(this.fieldsByName).forEach(t=>{o[t]=this.fieldsByName[t].getValue()}),o}getFieldValue(o){const t=this.fieldsByName[o];if(null==t)throw new Error("Could not find field "+o);return t.getValue()}setFieldValue(o,t,s){const i=null==s||null==s.warnMissingField||s.warnMissingField,a=this.getField(o);null!=a?a.setValue(T.getFieldValue(a.config.type,t),s):i&&console.error("Could not find field",o)}logErrors(){null!=this.formGroup.errors&&console.error("FORM",this.formGroup.errors),Object.keys(this.formGroup.controls).forEach(o=>{var t;const s=this.formGroup.get(o);null!=s&&!s.valid&&console.error(o,null===(t=this.formGroup.get(o))||void 0===t?void 0:t.errors)})}isValid(){return this.formGroup.valid}addField(o,t){this.fields.push(t),this.fieldsByName[o]=t,this.formGroup.addControl(o,t.getFormControl())}getFields(){return null==this.fields?[]:this.fields}getField(o){return this.fieldsByName[o]}markAsTouched(){this.formGroup.markAllAsTouched()}}var C=r(9808);let ee=(()=>{class n{constructor(){this.class="easy-field",this.blur=new e.vpe}getLabel(){return null!=this.label?this.label:null!=this.field&&null!=this.field.config&&null!=this.field.config.label?this.field.config.label:""}hasLabel(){return null!=this.label||null!=this.field&&null!=this.field.config&&null!=this.field.config.label}getReadyOnly(){return null!=this.field&&null!=this.field.config&&this.field.config.readOnly}onBlur(){this.blur.emit()}getFormControl(){return null!=this.fieldFormControl?this.fieldFormControl:null==this.field||null==this.field.getFormControl()?null:this.field.getFormControl()}getFieldOptions(){return null!=this.options?this.options:null!=this.field&&null!=this.field.config?this.field.config.options:[]}getControlErrors(){return null!=this.fieldFormControl?this.fieldFormControl.errors:null!=this.field&&null!=this.field.getFormControl()?this.field.getFormControl().errors:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],hostVars:2,hostBindings:function(t,s){2&t&&e.Tol(s.class)},inputs:{field:"field",fieldFormControl:"fieldFormControl",label:"label",options:"options"},outputs:{blur:"blur"},decls:0,vars:0,template:function(t,s){},encapsulation:2}),n})();var Z=r(3489),le=r(7531);let re=(()=>{class n{transform(t,...s){return K.getControlError(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"easyFieldError",type:n,pure:!0}),n})();function mt(n,o){if(1&n&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.getLabel())}}function pt(n,o){if(1&n&&(e.TgZ(0,"mat-hint"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.field.config.helpText," ")}}function gt(n,o){if(1&n&&(e.TgZ(0,"mat-hint",4),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ",null==t.field.getValue()?"0":t.field.getValue().length,"/",t.field.config.maxLength," ")}}let Ze=(()=>{class n extends ee{getType(){return this.field.config.type==y.password?"password":"text"}}return n.\u0275fac=function(){let o;return function(s){return(o||(o=e.n5z(n)))(s||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-text-field"]],features:[e.qOj],decls:8,vars:9,consts:[["appearance","outline"],[4,"ngIf"],["matInput","",3,"type","readonly","formControl","blur"],["align","end",4,"ngIf"],["align","end"]],template:function(t,s){1&t&&(e.TgZ(0,"mat-form-field",0),e.YNc(1,mt,2,1,"mat-label",1),e.TgZ(2,"input",2),e.NdJ("blur",function(){return s.onBlur()}),e.qZA(),e.YNc(3,pt,2,1,"mat-hint",1),e.YNc(4,gt,2,2,"mat-hint",3),e.TgZ(5,"mat-error"),e._uU(6),e.ALo(7,"easyFieldError"),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",s.hasLabel()),e.xp6(1),e.Q6J("type",s.getType())("readonly",s.getReadyOnly())("formControl",s.getFormControl()),e.xp6(1),e.Q6J("ngIf",null!=s.field.config.helpText),e.xp6(1),e.Q6J("ngIf",null!=s.field.config.maxLength),e.xp6(2),e.Oqu(e.lcZ(7,7,s.getControlErrors())))},directives:[Z.KE,C.O5,Z.hX,le.Nt,A.Fj,A.JJ,A.oH,Z.bx,Z.TO],pipes:[re],encapsulation:2}),n})();function ft(n,o){if(1&n&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.getLabel())}}function ht(n,o){if(1&n&&(e.TgZ(0,"mat-hint"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.field.config.helpText," ")}}function _t(n,o){if(1&n&&(e.TgZ(0,"mat-hint",4),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ",null==t.field.getValue()?"0":t.field.getValue().length,"/",t.field.config.maxLength," ")}}let Se=(()=>{class n extends ee{getType(){return this.field.config.type==y.password?"password":"text"}}return n.\u0275fac=function(){let o;return function(s){return(o||(o=e.n5z(n)))(s||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-text-area-field"]],features:[e.qOj],decls:9,vars:9,consts:[["appearance","outline"],[4,"ngIf"],["matInput","",3,"type","readonly","formControl","blur"],["align","end",4,"ngIf"],["align","end"]],template:function(t,s){1&t&&(e.TgZ(0,"mat-form-field",0),e.YNc(1,ft,2,1,"mat-label",1),e.TgZ(2,"textarea",2),e.NdJ("blur",function(){return s.onBlur()}),e._uU(3,"  "),e.qZA(),e.YNc(4,ht,2,1,"mat-hint",1),e.YNc(5,_t,2,2,"mat-hint",3),e.TgZ(6,"mat-error"),e._uU(7),e.ALo(8,"easyFieldError"),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",s.hasLabel()),e.xp6(1),e.Q6J("type",s.getType())("readonly",s.getReadyOnly())("formControl",s.getFormControl()),e.xp6(2),e.Q6J("ngIf",null!=s.field.config.helpText),e.xp6(1),e.Q6J("ngIf",null!=s.field.config.maxLength),e.xp6(2),e.Oqu(e.lcZ(8,7,s.getControlErrors())))},directives:[Z.KE,C.O5,Z.hX,le.Nt,A.Fj,A.JJ,A.oH,Z.bx,Z.TO],pipes:[re],encapsulation:2}),n})();var Me=r(4107);function bt(n,o){if(1&n&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.getLabel())}}function yt(n,o){if(1&n&&(e.TgZ(0,"mat-option",4),e._uU(1),e.qZA()),2&n){const t=o.$implicit,s=e.oxw();e.Tol(t.colour),e.ekj("option-header",null!=t.header&&!t.header),e.Q6J("value",t.value)("disabled",s.isDisabled(t)),e.xp6(1),e.hij(" ",t.label," ")}}let Ne=(()=>{class n extends ee{constructor(){super(...arguments),this.multi=!1}isDisabled(t){return null!=t.header&&!t.header||null!=t.selectable&&!t.selectable}}return n.\u0275fac=function(){let o;return function(s){return(o||(o=e.n5z(n)))(s||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-select-field"]],inputs:{multi:"multi"},features:[e.qOj],decls:7,vars:7,consts:[["appearance","outline"],[4,"ngIf"],[3,"formControl","multiple"],[3,"value","option-header","disabled","class",4,"ngFor","ngForOf"],[3,"value","disabled"]],template:function(t,s){1&t&&(e.TgZ(0,"mat-form-field",0),e.YNc(1,bt,2,1,"mat-label",1),e.TgZ(2,"mat-select",2),e.YNc(3,yt,2,7,"mat-option",3),e.qZA(),e.TgZ(4,"mat-error"),e._uU(5),e.ALo(6,"easyFieldError"),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",s.hasLabel()),e.xp6(1),e.Q6J("formControl",s.getFormControl())("multiple",!!s.multi||null),e.xp6(1),e.Q6J("ngForOf",s.getFieldOptions()),e.xp6(2),e.Oqu(e.lcZ(6,5,s.getControlErrors())))},directives:[Z.KE,C.O5,Z.hX,Me.gD,A.JJ,A.oH,C.sg,k.ey,Z.TO],pipes:[re],encapsulation:2}),n})();class je{static createDownload(o,t){const s=new Blob([t]),i=window.document.createElement("a");i.href=window.URL.createObjectURL(s),i.download=o,document.body.appendChild(i),i.click(),document.body.removeChild(i)}static readJson(o){return new Promise((t,s)=>{this.readFile(o).then(i=>{try{const a=JSON.parse(i);t(a)}catch(a){s(a)}},i=>{s(i)})})}static readFile(o){return new Promise((t,s)=>{const i=new FileReader;i.onload=()=>{t(null!=i.result?"string"!=typeof i.result?String.fromCharCode.apply(null,new Uint16Array(i.result)):i.result:null)},i.onerror=a=>{console.error(a),s()},i.readAsText(o)})}static clearFileEvent(o){o.target.value=null}}const Ct=["*"];let Q=(()=>{class n{getColor(){return this.color}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-button"]],inputs:{color:"color",disabled:"disabled"},ngContentSelectors:Ct,decls:2,vars:2,consts:[["mat-raised-button","",1,"easy-button",3,"color","disabled"]],template:function(t,s){1&t&&(e.F$t(),e.TgZ(0,"button",0),e.Hsn(1),e.qZA()),2&t&&e.Q6J("color",s.getColor())("disabled",!!s.disabled||null)},directives:[f.lW],encapsulation:2}),n})();function Et(n,o){if(1&n&&(e.TgZ(0,"label",7),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.getLabel())}}let Pe=(()=>{class n extends ee{onUploadEvent(t){const s=t.target.files;if(null==s||1!==s.length)return this.field.setValue(null),void je.clearFileEvent(t);this.field.setValue(t.target.files[0])}}return n.\u0275fac=function(){let o;return function(s){return(o||(o=e.n5z(n)))(s||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-file-field"]],features:[e.qOj],decls:9,vars:3,consts:[[1,"form-group","file-field"],["for","file-input",4,"ngIf"],[1,"flex"],[3,"click"],[2,"display","flex","align-items","center","margin-left","24px"],["type","file","id","file-input","name","file-input",2,"display","none",3,"accept","change"],["input",""],["for","file-input"]],template:function(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.YNc(1,Et,2,1,"label",1),e.TgZ(2,"div",2),e.TgZ(3,"easy-button",3),e.NdJ("click",function(){return e.CHM(i),e.MAs(8).click()}),e._uU(4,"Upload File"),e.qZA(),e.TgZ(5,"div",4),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"input",5,6),e.NdJ("change",function(b){return s.onUploadEvent(b)}),e.qZA(),e.qZA()}2&t&&(e.xp6(1),e.Q6J("ngIf",s.hasLabel()),e.xp6(5),e.Oqu(null==s.getFormControl().value?null:s.getFormControl().value.name),e.xp6(1),e.Q6J("accept",s.field.config.allowedFormats))},directives:[C.O5,Q],encapsulation:2}),n})();var Tt=r(8675),Be=r(4004),Te=r(1079);function xt(n,o){if(1&n&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.getLabel())}}function vt(n,o){if(1&n&&(e.TgZ(0,"mat-hint"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.field.config.helpText," ")}}function Ft(n,o){if(1&n&&(e.TgZ(0,"mat-option",6),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("disabled",null!=t.selectable&&!t.selectable)("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}let Re=(()=>{class n extends ee{ngOnInit(){this.filteredOptions=this.getFormControl().valueChanges.pipe((0,Tt.O)(""),(0,Be.U)(t=>null==t||"string"==typeof t?t:t.label),(0,Be.U)(t=>t?this.filter(t):this.getFieldOptions().slice()))}displayAutoComplete(){return t=>{const s=this.getFieldOptions().find(i=>null!=t&&i.value===t);return null!=s?s.label:""}}filter(t){const s=t.toLowerCase(),i=this.getFieldOptions().filter(b=>null!=b.label&&-1!==b.label.toLowerCase().indexOf(s));return 0==i.length?[{label:"No options available",selectable:!1}]:i}}return n.\u0275fac=function(){let o;return function(s){return(o||(o=e.n5z(n)))(s||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-autocomplete-field"]],features:[e.qOj],decls:11,vars:11,consts:[["appearance","outline"],[4,"ngIf"],["type","text","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith"],["auto","matAutocomplete"],[3,"disabled","value",4,"ngFor","ngForOf"],[3,"disabled","value"]],template:function(t,s){if(1&t&&(e.TgZ(0,"mat-form-field",0),e.YNc(1,xt,2,1,"mat-label",1),e._UZ(2,"input",2),e.YNc(3,vt,2,1,"mat-hint",1),e.TgZ(4,"mat-autocomplete",3,4),e.YNc(6,Ft,2,3,"mat-option",5),e.ALo(7,"async"),e.qZA(),e.TgZ(8,"mat-error"),e._uU(9),e.ALo(10,"easyFieldError"),e.qZA(),e.qZA()),2&t){const i=e.MAs(5);e.xp6(1),e.Q6J("ngIf",s.hasLabel()),e.xp6(1),e.Q6J("formControl",s.getFormControl())("matAutocomplete",i),e.xp6(1),e.Q6J("ngIf",null!=s.field.config.helpText),e.xp6(1),e.Q6J("displayWith",s.displayAutoComplete()),e.xp6(2),e.Q6J("ngForOf",e.lcZ(7,7,s.filteredOptions)),e.xp6(3),e.Oqu(e.lcZ(10,9,s.getControlErrors()))}},directives:[Z.KE,C.O5,Z.hX,le.Nt,A.Fj,Te.ZL,A.JJ,A.oH,Z.bx,Te.XC,C.sg,k.ey,Z.TO],pipes:[C.Ov,re],encapsulation:2}),n})();var ke=r(7446);let Ue=(()=>{class n extends ee{}return n.\u0275fac=function(){let o;return function(s){return(o||(o=e.n5z(n)))(s||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-checkbox-field"]],features:[e.qOj],decls:2,vars:2,consts:[[3,"formControl"]],template:function(t,s){1&t&&(e.TgZ(0,"mat-checkbox",0),e._uU(1),e.qZA()),2&t&&(e.Q6J("formControl",s.getFormControl()),e.xp6(1),e.Oqu(s.getLabel()))},directives:[ke.oG,A.JJ,A.oH],encapsulation:2}),n})();var ge=r(6856);function At(n,o){if(1&n&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.getLabel())}}let Je=(()=>{class n extends ee{}return n.\u0275fac=function(){let o;return function(s){return(o||(o=e.n5z(n)))(s||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-date-field"]],features:[e.qOj],decls:9,vars:7,consts:[["appearance","outline"],[4,"ngIf"],["matInput","",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["picker",""]],template:function(t,s){if(1&t&&(e.TgZ(0,"mat-form-field",0),e.YNc(1,At,2,1,"mat-label",1),e._UZ(2,"input",2),e.TgZ(3,"mat-error"),e._uU(4),e.ALo(5,"easyFieldError"),e.qZA(),e._UZ(6,"mat-datepicker-toggle",3),e._UZ(7,"mat-datepicker",null,4),e.qZA()),2&t){const i=e.MAs(8);e.xp6(1),e.Q6J("ngIf",s.hasLabel()),e.xp6(1),e.Q6J("matDatepicker",i)("formControl",s.getFormControl()),e.xp6(2),e.Oqu(e.lcZ(5,5,s.getControlErrors())),e.xp6(2),e.Q6J("for",i)}},directives:[Z.KE,C.O5,Z.hX,le.Nt,ge.hl,A.Fj,A.JJ,A.oH,Z.TO,ge.nW,Z.R9,ge.Mq],pipes:[re],encapsulation:2}),n})();function Dt(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Empty Field Config\n"),e.qZA())}function It(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"easy-text-field",6),e.NdJ("blur",function(){return e.CHM(t),e.oxw(2).onBlur()}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("field",t.field)("label",t.label)}}function wt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"easy-text-area-field",6),e.NdJ("blur",function(){return e.CHM(t),e.oxw(2).onBlur()}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("field",t.field)("label",t.label)}}function Ot(n,o){if(1&n&&e._UZ(0,"easy-select-field",7),2&n){const t=e.oxw(2);e.Q6J("multi","multiSelect"==t.field.config.type)("field",t.field)("label",t.label)}}function Lt(n,o){if(1&n&&e._UZ(0,"easy-file-field",8),2&n){const t=e.oxw(2);e.Q6J("field",t.field)("label",t.label)}}function Zt(n,o){if(1&n&&e._UZ(0,"easy-autocomplete-field",8),2&n){const t=e.oxw(2);e.Q6J("field",t.field)("label",t.label)}}function St(n,o){if(1&n&&e._UZ(0,"easy-checkbox-field",8),2&n){const t=e.oxw(2);e.Q6J("field",t.field)("label",t.label)}}function Mt(n,o){if(1&n&&e._UZ(0,"easy-date-field",8),2&n){const t=e.oxw(2);e.Q6J("field",t.field)("label",t.label)}}function Nt(n,o){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"json"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" Unknown Field ",e.lcZ(2,1,t.field.config)," ")}}function jt(n,o){if(1&n&&(e.ynx(0),e.ynx(1,1),e.YNc(2,It,1,2,"easy-text-field",2),e.YNc(3,wt,1,2,"easy-text-area-field",2),e.YNc(4,Ot,1,3,"easy-select-field",3),e.YNc(5,Lt,1,2,"easy-file-field",4),e.YNc(6,Zt,1,2,"easy-autocomplete-field",4),e.YNc(7,St,1,2,"easy-checkbox-field",4),e.YNc(8,Mt,1,2,"easy-date-field",4),e.YNc(9,Nt,3,3,"div",5),e.BQk(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngSwitch",t.field.config.type),e.xp6(1),e.Q6J("ngSwitchCase",t.isTextField()?t.field.config.type:""),e.xp6(1),e.Q6J("ngSwitchCase","textArea"),e.xp6(1),e.Q6J("ngSwitchCase",t.isSelectField()?t.field.config.type:""),e.xp6(1),e.Q6J("ngSwitchCase","file"),e.xp6(1),e.Q6J("ngSwitchCase","autoComplete"),e.xp6(1),e.Q6J("ngSwitchCase","checkbox"),e.xp6(1),e.Q6J("ngSwitchCase","date")}}let ce=(()=>{class n{constructor(){this.class="easy-field",this.blur=new e.vpe}isTextField(){return-1!==[y.decimal,y.id,y.email,y.number,y.password,y.text].indexOf(this.field.config.type)}isSelectField(){return-1!==[y.select,y.multiSelect].indexOf(this.field.config.type)}onBlur(){this.blur.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-field"]],hostVars:2,hostBindings:function(t,s){2&t&&e.Tol(s.class)},inputs:{field:"field",label:"label",options:"options"},outputs:{blur:"blur"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngSwitch"],[3,"field","label","blur",4,"ngSwitchCase"],[3,"multi","field","label",4,"ngSwitchCase"],[3,"field","label",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"field","label","blur"],[3,"multi","field","label"],[3,"field","label"]],template:function(t,s){1&t&&(e.YNc(0,Dt,2,0,"div",0),e.YNc(1,jt,10,8,"ng-container",0)),2&t&&(e.Q6J("ngIf",null==s.field),e.xp6(1),e.Q6J("ngIf",null!=s.field&&s.field.config.visible))},directives:[C.O5,C.RF,C.n9,Ze,Se,Ne,Pe,Re,Ue,Je,C.ED],pipes:[C.Ts],encapsulation:2}),n})();function Pt(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"Invalid Form"),e.qZA())}function Bt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"easy-field",4),e.NdJ("blurEvent",function(){return e.CHM(t),e.oxw().onBlur()}),e.qZA()}2&n&&e.Q6J("field",o.$implicit)}let ue=(()=>{class n{constructor(){this.submit=new e.vpe}onSubmit(t){t.preventDefault(),t.stopPropagation(),this.submit.emit()}getFields(){return null==this.form||null==this.form.getFields()?[]:this.form.getFields()}onBlur(){console.log(this.constructor.name,"blur"),this.form.blur.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-form"]],inputs:{form:"form"},outputs:{submit:"submit"},decls:4,vars:2,consts:[[4,"ngIf"],[3,"submit"],[3,"field","blurEvent",4,"ngFor","ngForOf"],["type","submit",2,"display","none"],[3,"field","blurEvent"]],template:function(t,s){1&t&&(e.YNc(0,Pt,2,0,"div",0),e.TgZ(1,"form",1),e.NdJ("submit",function(a){return s.onSubmit(a)}),e.YNc(2,Bt,1,1,"easy-field",2),e._UZ(3,"button",3),e.qZA()),2&t&&(e.Q6J("ngIf",null==s.form),e.xp6(2),e.Q6J("ngForOf",s.getFields()))},directives:[C.O5,A._Y,A.JL,A.F,C.sg,ce],encapsulation:2}),n})(),qe=(()=>{class n extends U{constructor(){super(...arguments),this.form=new W({username:T.email({label:"Email",required:!0}),password:T.password({label:"Password",required:!0})})}onSubmit(){this.trySubmitForms(this.form)||this.toast("Check the form and try again")}}return n.\u0275fac=function(){let o;return function(s){return(o||(o=e.n5z(n)))(s||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:3,vars:1,consts:[[3,"form","submit"],["color","primary",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"easy-form",0),e.NdJ("submit",function(){return s.onSubmit()}),e.qZA(),e.TgZ(1,"easy-button",1),e.NdJ("click",function(){return s.onSubmit()}),e._uU(2,"Login"),e.qZA()),2&t&&e.Q6J("form",s.form)},directives:[ue,Q],encapsulation:2}),n})(),Qe=(()=>{class n extends U{constructor(){super(...arguments),this.form=new W({username:T.email({label:"Email",required:!0}),password:T.password({label:"Password",required:!0})})}onSubmit(){this.trySubmitForms(this.form)||this.toast("Check the form and try again")}}return n.\u0275fac=function(){let o;return function(s){return(o||(o=e.n5z(n)))(s||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:3,vars:1,consts:[[3,"form","submit"],["color","primary",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"easy-form",0),e.NdJ("submit",function(){return s.onSubmit()}),e.qZA(),e.TgZ(1,"easy-button",1),e.NdJ("click",function(){return s.onSubmit()}),e._uU(2,"Login"),e.qZA()),2&t&&e.Q6J("form",s.form)},directives:[ue,Q],encapsulation:2}),n})(),Ye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:2,vars:0,template:function(t,s){1&t&&(e.TgZ(0,"h1"),e._uU(1,"404"),e.qZA())},encapsulation:2}),n})();const Rt={paramsInheritanceStrategy:"always",relativeLinkResolution:"legacy"};var te=r(9355);let x=(()=>{class n{}return n.IDB_DATABASE="easy-diet",n.IDB_TABLE_FOOD="food",n.IDB_FIELD_DATE_ID="id",n.IDB_TABLE_DATE_FOOD="dateFood",n.IDB_FIELD_DATE_FOOD_ID="id",n.IDB_TABLE_DATE_WEIGHT="dateWeight",n.IDB_FIELD_DATE_WEIGHT_ID="id",n.IDB_FIELD_DATE_DATE="date",n.IDB_TABLE_PROFILE="profile",n.IDB_FIELD_PROFILE_ID="id",n})();var J=r(2076);class v{static add(o,t){return+(+o+ +t).toFixed(10)}static subtract(o,t){return+(o-t).toFixed(10)}static isNumber(o){return!isNaN(o)}static getNumberValue(o){return+o}static toCurrency(o){return this.toDecimal(o).replace(/\B(?=(\d{3})+(?!\d))/g,",")}static toDecimal(o,t=2){return null==o||""===o?"0.00":(Math.round(100*+o)/100).toFixed(t)}static isEqual(o,t){return+o==+t}static toInteger(o){return this.toDecimal(o,0)}}class fe{static getCalories(o){let t=0;return null!=o.protein&&!isNaN(o.protein)&&(t=v.add(t,4*o.protein)),null!=o.fat&&!isNaN(o.fat)&&(t=v.add(t,9*o.fat)),null!=o.carb&&!isNaN(o.carb)&&(t=v.add(t,4*o.carb)),null!=o.misc&&!isNaN(o.misc)&&(t=v.add(t,o.misc)),t}}class S{constructor(){this.database=new te.Z3(x.IDB_DATABASE)}init(){return new Promise((o,t)=>{this.database.setLogging(!0),this.database.init(S.migrations).then(()=>{o(!0)},s=>{console.error(s),t(s)})})}getDatabase(){return this.database}getProfile(){return(0,J.D)(new Promise((o,t)=>{this.getDatabase().selectFrom(x.IDB_TABLE_PROFILE).fetch(s=>{o(s.items.length>0?s.items[0]:null)},s=>{t(s)})}))}saveProfile(o){return this.setItemId(o),(0,J.D)(new Promise((t,s)=>{this.getDatabase().put(x.IDB_TABLE_PROFILE,o).execute(()=>{t(o)},i=>{s(i)})}))}listFood(){return(0,J.D)(new Promise((o,t)=>{this.database.selectFrom(x.IDB_TABLE_FOOD).where((0,te.KO)("deleted")).fetch(s=>{s.items.forEach(i=>{i.favourite=null!=i.favourite&&i.favourite}),s.items.sort((i,a)=>i.favourite==a.favourite?i.name.toLowerCase().localeCompare(a.name.toLowerCase()):i.favourite<a.favourite?1:-1),o(s.items)},s=>{t(s)})}))}updateFood(o){return this.setItemId(o),(0,J.D)(new Promise((t,s)=>{this.database.put(x.IDB_TABLE_FOOD,o).execute(()=>{t(o)},i=>{s(i)})}))}deleteFood(o){return(0,J.D)(new Promise((t,s)=>{const i=JSON.parse(JSON.stringify(o));i.deleted=!0,this.database.put(x.IDB_TABLE_FOOD,i).execute(()=>{t(!0)},a=>{s(a)})}))}searchFoodDate(o){const t=null==o?I.formatToServer(I.now()):o;return(0,J.D)(new Promise((s,i)=>{this.database.selectFrom(x.IDB_TABLE_DATE_FOOD).where((0,te.KA)("date",t)).fetch(a=>{const b=a.items,L=b.map(w=>w.foodId);this.database.selectFrom(x.IDB_TABLE_FOOD).where((0,te.YJ)("id",L)).fetch(w=>{const oe=w.items;b.forEach(N=>{const $=oe.find(po=>po.id===N.foodId);null!=$&&(N.name=$.name,N.protein=$.protein*N.qty,N.fat=$.fat*N.qty,N.carb=$.carb*N.qty,N.fibre=$.fibre*N.qty,N.misc=$.misc*N.qty,N.calories=fe.getCalories(N),N.price=$.price*N.qty)}),s(a.items)},w=>{i(w)})},a=>{i(a)})}))}deleteFoodDate(o){return(0,J.D)(new Promise((t,s)=>{this.database.delete(x.IDB_TABLE_DATE_FOOD).idEquals(x.IDB_TABLE_DATE_FOOD,"string"==typeof o?o:o.id).execute().then(()=>{t(!0)},i=>{s(i)})}))}createFoodDate(o){return this.setItemId(o),(0,J.D)(new Promise((t,s)=>{this.database.put(x.IDB_TABLE_DATE_FOOD,o).execute(()=>{t(o)},i=>{s(i)})}))}listFoodDate(){return(0,J.D)(new Promise((o,t)=>{this.getDatabase().selectFrom(x.IDB_TABLE_DATE_FOOD).fetch(s=>{o(s.items)},s=>{t(s)})}))}getCurrentWeight(){return(0,J.D)(new Promise((o,t)=>{this.getDatabase().selectFrom(x.IDB_TABLE_DATE_WEIGHT).orderBy(x.IDB_FIELD_DATE_WEIGHT_ID,"DESC").fetch(s=>{o(s.items.length>0?s.items[0]:null)},s=>{t(s)})}))}getWeight(o){return(0,J.D)(new Promise((t,s)=>{this.getDatabase().selectFrom(x.IDB_TABLE_DATE_WEIGHT).where((0,te.KA)(x.IDB_FIELD_DATE_DATE,o)).orderBy(x.IDB_FIELD_DATE_WEIGHT_ID,"DESC").fetch(i=>{t(i.items.length>0?i.items[0]:null)},i=>{s(i)})}))}listWeight(){return(0,J.D)(new Promise((o,t)=>{this.getDatabase().selectFrom(x.IDB_TABLE_DATE_WEIGHT).orderBy(x.IDB_FIELD_DATE_WEIGHT_ID,"DESC").fetch(s=>{o(s.items)},s=>{t(s)})}))}saveWeight(o){return(0,J.D)(new Promise((t,s)=>{this.getDatabase().put(x.IDB_TABLE_DATE_WEIGHT,o).execute(()=>{t(o)},i=>{s(i)})}))}setItemId(o){o.id=null==o.id?Y.generateId():o.id}}S.migrations=[new class kt extends te.fe{migrate(){this.createTable(x.IDB_TABLE_DATE_FOOD,x.IDB_FIELD_DATE_FOOD_ID),this.createTable(x.IDB_TABLE_FOOD,x.IDB_FIELD_DATE_ID),this.createTable(x.IDB_TABLE_DATE_WEIGHT,x.IDB_FIELD_DATE_WEIGHT_ID),this.createTable(x.IDB_TABLE_PROFILE,x.IDB_FIELD_PROFILE_ID)}getVersion(){return 1}},new class Ut extends te.fe{migrate(){this.addFood({name:"Domino's Spicy Veg Supreme Classic Crust",protein:43.2,fat:24.8,carb:146.4}),this.addFood({name:"Domino's Spicy Veg Supreme Thin N Crispy",protein:36.8,fat:39.2,carb:96}),this.addFood({name:"Domino's Pepperoni Classic Crust",protein:45.6,fat:34.4,carb:135.2}),this.addFood({name:"Domino's Pepperoni Thin N Crispy",protein:39.2,fat:44,carb:91.2})}getVersion(){return 2}addFood(o){o.id=Y.generateId(),this.createItem(x.IDB_TABLE_FOOD,o)}}],S.\u0275fac=function(o){return new(o||S)},S.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac});const Jt=function(){return["/"]},qt=function(){return["/food"]},Qt=function(){return["/profile"]},Yt=function(){return["/history"]};let he=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["navbar"]],decls:9,vars:8,consts:[[1,"nav"],[3,"routerLink"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"easy-button",1),e._uU(2,"Home"),e.qZA(),e.TgZ(3,"easy-button",1),e._uU(4,"Food"),e.qZA(),e.TgZ(5,"easy-button",1),e._uU(6,"Profile"),e.qZA(),e.TgZ(7,"easy-button",1),e._uU(8,"History"),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("routerLink",e.DdM(4,Jt)),e.xp6(2),e.Q6J("routerLink",e.DdM(5,qt)),e.xp6(2),e.Q6J("routerLink",e.DdM(6,Qt)),e.xp6(2),e.Q6J("routerLink",e.DdM(7,Yt)))},directives:[Q,M.rH],encapsulation:2}),n})();var xe=r(9224);const Vt=["*"];let G=(()=>{class n{constructor(){this.componentClasses=[]}ngOnInit(){this.componentClasses=["easy-card"],null!=this.colour&&this.componentClasses.push("easy-card-"+this.colour),this.componentClass=this.componentClasses.join(" ")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-card"]],hostVars:2,hostBindings:function(t,s){2&t&&e.Tol(s.componentClass)},inputs:{colour:"colour"},ngContentSelectors:Vt,decls:2,vars:0,template:function(t,s){1&t&&(e.F$t(),e.TgZ(0,"mat-card"),e.Hsn(1),e.qZA())},directives:[xe.a8],encapsulation:2,changeDetection:0}),n})();var ve=r(773);let Ve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["loading"]],decls:2,vars:0,consts:[[1,"loading","fade-in"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"mat-spinner"),e.qZA())},directives:[ve.$g],encapsulation:2,changeDetection:0}),n})();function Ht(n,o){1&n&&e._UZ(0,"loading")}function Wt(n,o){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.getErrorMessage())}}let V=(()=>{class n{constructor(t){this.cd=t}ngOnChanges(){this.cd.markForCheck()}getErrorMessage(){return K.getErrorMessage(this.state.exception)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-state"]],inputs:{state:"state"},features:[e.TTD],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(t,s){1&t&&(e.YNc(0,Ht,1,0,"loading",0),e.YNc(1,Wt,2,1,"div",0)),2&t&&(e.Q6J("ngIf",null!=s.state&&s.state.loading&&null==s.state.exception),e.xp6(1),e.Q6J("ngIf",null!=s.state&&null!=s.state.exception))},directives:[C.O5,Ve],encapsulation:2,changeDetection:0}),n})(),Fe=(()=>{class n{}return n.EVENT_WEIGHT_UPDATED="EVENT_WEIGHT_UPDATED",n})();const Gt=["*"];let _e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-card-title"]],ngContentSelectors:Gt,decls:2,vars:0,template:function(t,s){1&t&&(e.F$t(),e.TgZ(0,"mat-card-title"),e.Hsn(1),e.qZA())},directives:[xe.n5],encapsulation:2,changeDetection:0}),n})();function zt(n,o){1&n&&(e.TgZ(0,"div",1),e.TgZ(1,"div"),e.TgZ(2,"strong"),e._uU(3,"Dev Debug"),e.qZA(),e.qZA(),e.Hsn(4),e.qZA())}const $t=["*"];let He=(()=>{class n extends U{}return n.\u0275fac=function(){let o;return function(s){return(o||(o=e.n5z(n)))(s||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["dev-debug"]],features:[e.qOj],ngContentSelectors:$t,decls:1,vars:1,consts:[["class","dev-debug",4,"ngIf"],[1,"dev-debug"]],template:function(t,s){1&t&&(e.F$t(),e.YNc(0,zt,5,0,"div",0)),2&t&&e.Q6J("ngIf",s.isDeveloperMode())},directives:[C.O5],styles:[".dev-debug[_ngcontent-%COMP%]{border-style:dashed;border-width:1px;padding:8px;border-color:gray;color:gray}"]}),n})(),We=(()=>{class n extends U{constructor(t,s){super(s),this.dataService=t,this.weightUpdate=new e.vpe}onInit(){const t=I.now();this.form=new W({id:T.date({label:"Date",value:I.formatToServer(t)}),weight:T.number({label:"Weight"}),fatPercentage:T.number({label:"Fat %"}),musclePercentage:T.number({label:"Muscle %"})}),this.load(t)}load(t){this.setLoading(!0),this.dataService.getCurrentWeight().subscribe(s=>{null!=s&&this.form.patchValue({weight:s.weight,fatPercentage:s.fatPercentage}),this.setLoading(!1)})}onBlur(){this.onSubmit()}onSubmit(){!this.trySubmitForms(this.form)||(this.setLoading(!0),this.form.disable(),this.dataService.saveWeight(this.form.getValue()).subscribe(()=>{P.send(Fe.EVENT_WEIGHT_UPDATED)},t=>{console.error(t)},()=>{this.form.enable(),this.setLoading(!1)}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["daily-weight"]],inputs:{currentDate:"currentDate"},outputs:{weightUpdate:"weightUpdate"},features:[e.qOj],decls:11,vars:5,consts:[[3,"field","blur"],[1,"flex"],[1,"full-width"]],template:function(t,s){1&t&&(e.TgZ(0,"easy-card"),e.TgZ(1,"easy-card-title"),e._uU(2,"Check In"),e.qZA(),e.TgZ(3,"div"),e.TgZ(4,"easy-field",0),e.NdJ("blur",function(){return s.onSubmit()}),e.qZA(),e.qZA(),e.TgZ(5,"div",1),e.TgZ(6,"div",2),e.TgZ(7,"easy-field",0),e.NdJ("blur",function(){return s.onSubmit()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"dev-debug"),e._uU(9),e.ALo(10,"json"),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("field",s.form.getField("weight")),e.xp6(3),e.Q6J("field",s.form.getField("fatPercentage")),e.xp6(2),e.Oqu(e.lcZ(10,3,s.form.getValue())))},directives:[G,_e,ce,He],pipes:[C.Ts],encapsulation:2}),n})();var de=r(4128);let ne=(()=>{class n{static getTdee(t,s,i,a,b){const L=this.getAge(t);let w=10*+s;switch(w=v.add(w,6.25*+i),w=v.add(w,-5*+L),a){case"male":w=v.add(w,5);break;case"female":w=v.add(w,-161)}return v.toInteger(w*+b)}static getTargetCalories(t,s,i,a,b,L){if(null!=[t,s,a,b].find(N=>null==N||""==N))return null;const w=this.getTdee(a,i,s,t,b);let oe=0;switch(L){case"lose_weight":oe=.8;break;case"gain_weight":oe=1.2}return Math.floor(w*oe)}static getBmiLabel(t){return t>40?"Obese class III":t>35?"Obese class II":t>30?"Obese class I":t>25?"Overweight":t>18.5?"Healthy":"Underweight"}static getAge(t){return Math.floor(I.dayDifference(I.parseDate(t),new Date)/365)}static getTdeeByProfile(t,s){return null==t||null==s?null:this.getTdee(t.dob,s,t.height,t.gender,t.exercise)}static getTargetCaloriesByProfile(t,s){return null==t||null==s?null:this.getTargetCalories(t.gender,t.height,s,t.dob,t.exercise,t.goal)}}return n.genderOptions=[{value:"male",label:"Male"},{value:"female",label:"Female"}],n.exerciseOptions=[{label:"Little or no exercise",value:1.2},{label:"Light Exercise (1-3 days/week)",value:1.375},{label:"Moderately Active (moderate exercise 6-7 days/week)",value:1.55},{label:"Very Active (Hard exercise every day)",value:1.725}],n.dietOptions=[{label:"Moderate Carbs",value:"moderate_carbs"},{label:"Low Carbs",value:"low_carbs"},{label:"High Carbs",value:"high_carbs"}],n.goalOptions=[{label:"Lose Weight",value:"lose_weight"},{label:"Maintain",value:"maintain"},{label:"Gain Weight",value:"gain_weight"}],n})();function Xt(n,o){if(1&n&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij("Fat: ",t.fatMass," KG")}}function Kt(n,o){if(1&n&&(e.TgZ(0,"div",2),e.TgZ(1,"div",5),e._uU(2),e.qZA(),e.TgZ(3,"div",5),e._uU(4),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.AsE(" BMI: ",t.currentBmi," - ",t.currentBmiLabel,""),e.xp6(2),e.AsE(" Healthy Range: ",t.healthyMin," - ",t.healthyMax,"")}}function en(n,o){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij("TDEE: ",t.tdee,"")}}function tn(n,o){if(1&n&&(e.TgZ(0,"easy-card"),e.TgZ(1,"div",2),e.YNc(2,Xt,2,1,"div",3),e.qZA(),e.YNc(3,Kt,5,4,"div",4),e.YNc(4,en,2,1,"div",1),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",null!=t.fatMass),e.xp6(1),e.Q6J("ngIf",null!=t.currentBmi),e.xp6(1),e.Q6J("ngIf",null!=t.tdee)}}let Ge=(()=>{class n extends U{constructor(t,s){super(s),this.dataService=t,this.currentBmi=null,this.healthyMin=null,this.healthyMax=null,this.currentBmiLabel=null,this.muscleMass=null,this.fatMass=null}onInit(){this.registerEvent(Fe.EVENT_WEIGHT_UPDATED),this.load()}receiveEvent(t,s){t==Fe.EVENT_WEIGHT_UPDATED&&this.load()}load(){this.setLoading(!0),(0,de.D)([this.dataService.getProfile(),this.dataService.getCurrentWeight()]).subscribe(t=>{this.profile=t[0];const s=t[1],i=null!=s&&null!=s.weight&&!isNaN(s.weight);i&&(this.tdee=ne.getTdeeByProfile(this.profile,s.weight),this.calculate(s.weight)),i&&null!=s.musclePercentage&&(this.muscleMass=v.toDecimal(s.weight*(s.musclePercentage/100),1)),i&&null!=s.fatPercentage&&(this.fatMass=v.toDecimal(s.weight*(s.fatPercentage/100),1)),this.setLoading(!1)})}calculate(t){if(null!=this.profile&&null!=this.profile.height&&!isNaN(this.profile.height)&&null!=t){const i=+this.profile.height/100;this.currentBmi=v.toDecimal(t/(i*i)),this.healthyMin=v.toDecimal(i*i*18.5),this.healthyMax=v.toDecimal(i*i*24.9),this.currentBmiLabel=this.currentBmi>40?"Obese class III":this.currentBmi>35?"Obese class II":this.currentBmi>30?"Obese class I":this.currentBmi>25?"Overweight":this.currentBmi>18.5?"Healthy":"Underweight"}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["metrics"]],features:[e.qOj],decls:2,vars:2,consts:[[3,"state"],[4,"ngIf"],[1,"flex"],["class","full-width",4,"ngIf"],["class","flex",4,"ngIf"],[1,"full-width"]],template:function(t,s){1&t&&(e._UZ(0,"easy-state",0),e.YNc(1,tn,5,3,"easy-card",1)),2&t&&(e.Q6J("state",s.getState()),e.xp6(1),e.Q6J("ngIf",s.hasLoaded()))},directives:[V,C.O5,G],encapsulation:2}),n})();class ze{constructor(){this.actions=[],this.hasFooter=!1,this.matDataSource=new u.by,this.onInit(),this.setFilter()}onInit(){}setFilter(){this.matDataSource.filterPredicate=(o,t)=>null==t||this.filterKeyword(o,t)&&this.filterCustom(o,t)}filterKeyword(o,t){let s=t.keyword;if(null==s||""===s)return!0;s=s.toLowerCase();let i=!1;return Object.keys(o).forEach(a=>{i=i||null!=o[a]&&-1!=o[a].toString().toLowerCase().indexOf(s)}),i}filterCustom(o,t){return!0}hasLoaded(){return!this.loading}setActions(o){this.actions=o,this.initActionColumn()}getActions(){return null==this.actions?[]:this.actions}setLoading(o){this.loading=o}setCustomData(o){this.customData=o}setColumns(o){this.columns=o,this.initActionColumn()}getColumns(){return null==this.columns?[]:this.columns}getColumnClasses(o){return[]}getData(){return null==this.data?[]:this.data}setData(o){this.data=o,this.matDataSource.data=o}getColumnGlobalClasses(o){return[]}getColumnFooterClasses(o){return[]}getColumnHeaderClasses(o){return[]}getColumnHeader(o){return Y.toTitleCase(o)}getColumnFooter(o){return""}getColumnRoute(o,t){return null}getColumnValue(o,t){return o[t]}setMat(o,t){this.matDataSource.paginator=o,this.matDataSource.sort=t}initActionColumn(){}}class Ae extends ze{constructor(){super(),this.hasFooter=!0,this.setColumns(["name","qty","protein","fat","carb","total","action"])}getColumnGlobalClasses(o){switch(o){case"protein":case"fat":case"carb":case"price":case"fibre":case"qty":return["small-display-hidden","text-right"];case"total":return["text-right"]}return[]}getColumnValue(o,t){switch(t){case"protein":case"fat":case"carb":case"fibre":const s=o[t];return null==s||isNaN(s)?0:v.toInteger(s);case"total":return v.toInteger(fe.getCalories(o));case"price":let i=null==o[t]||isNaN(o[t])?0:o[t];return v.toDecimal(i)}return super.getColumnValue(o,t)}getColumnFooter(o){switch(o){case"protein":case"fat":case"carb":case"fibre":return this.getTotalMacro(o);case"price":return v.toDecimal(this.getTotalMacro(o));case"name":let t="Total";return null!=this.targetCalories&&(t+=" (Target)"),t;case"total":let s=v.toInteger(this.getTotalCalories());return null!=this.targetCalories&&(s+=` (${v.toInteger(this.targetCalories)})`),s}return""}getTotalCalories(){let o=0;return this.getData().forEach(t=>{o=v.add(o,fe.getCalories(t))}),o}getTotalMacro(o){let t=0;return this.getData().forEach(s=>{null==s[o]||isNaN(s[o])||(t=v.add(t,+s[o]))}),v.toInteger(t)}}class $e extends U{constructor(o){super(o)}onClose(o){null!=this.dialogRef?this.dialogRef.close(o):this.toast("onClose: DialogRef is null")}}const nn=["*"];let be=(()=>{class n{constructor(){this.class="easy-card-buttons"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-card-buttons"]],hostVars:2,hostBindings:function(t,s){2&t&&e.Tol(s.class)},ngContentSelectors:nn,decls:2,vars:0,template:function(t,s){1&t&&(e.F$t(),e.TgZ(0,"div"),e.Hsn(1),e.qZA())},encapsulation:2,changeDetection:0}),n})();function on(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e._UZ(1,"easy-field",2),e._UZ(2,"easy-field",2),e.TgZ(3,"easy-card-buttons"),e.TgZ(4,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCancel()}),e._uU(5,"Cancel"),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmit()}),e._uU(7,"Create"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("field",t.form.getField("foodId")),e.xp6(1),e.Q6J("field",t.form.getField("qty"))}}let Xe=(()=>{class n extends $e{constructor(t,s,i,a){super(a),this.data=t,this.dataService=s,this.dialogRef=i}onInit(){this.setLoading(!0),this.dataService.listFood().subscribe(t=>{const s=t.map(i=>({value:i.id,label:(i.favourite?"\u2605 ":"")+i.name}));this.form=new W({id:T.id(),date:T.text({value:I.formatToServer(I.now()),required:!0}),qty:T.decimal({label:"Quantity",value:1,required:!0}),foodId:T.autoComplete({label:"Food",required:!0,options:s})}),null!=this.data&&this.form.patchValue(this.data),this.setLoading(!1)})}onCancel(){this.onClose()}onSubmit(){this.setLoading(!0);const t=this.form.getValue();this.dataService.createFoodDate(t).subscribe(()=>{this.onClose(t)},s=>{console.error(s),this.toast("Something bad happened"),this.setLoading(!1)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(se.WI),e.Y36(S),e.Y36(se.so),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:2,vars:2,consts:[[3,"state"],[4,"ngIf"],[3,"field"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,s){1&t&&(e._UZ(0,"easy-state",0),e.YNc(1,on,8,2,"div",1)),2&t&&(e.Q6J("state",s.getState()),e.xp6(1),e.Q6J("ngIf",s.hasLoaded()))},directives:[V,C.O5,ce,be,f.lW],encapsulation:2}),n})();class sn{}let z=(()=>{class n{static getCreateIcon(){return this.createIcon(n.ACTION_CREATE,"create","Create")}static getUpdateIcon(){return this.createIcon(n.ACTION_UPDATE,"edit","Update")}static getDeleteIcon(){return this.createIcon(n.ACTION_DELETE,"delete","Delete")}static createIcon(t,s,i){const a=new sn;return a.label=i,a.systemName=t,a.icon=s,a}}return n.ACTION_CREATE="create",n.ACTION_UPDATE="update",n.ACTION_DELETE="delete",n})();class rn extends Ae{constructor(){super(),this.setColumns(["name","protein","fat","carb","fibre"])}getColumnGlobalClasses(o){switch(o){case"protein":case"fat":case"carb":case"price":case"qty":case"fibre":case"total":return["text-right"]}return[]}}class an extends Ae{constructor(){super(),this.setColumns(["name","price"])}getColumnGlobalClasses(o){switch(o){case"protein":case"fat":case"carb":case"price":case"qty":case"fibre":case"total":return["text-right"]}return[]}}var ae=r(7238);const ln=["*"];let Ke=(()=>{class n extends Q{}return n.\u0275fac=function(){let o;return function(s){return(o||(o=e.n5z(n)))(s||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-button-icon"]],inputs:{iconMirrored:"iconMirrored",tooltip:"tooltip"},features:[e.qOj],ngContentSelectors:ln,decls:3,vars:5,consts:[["mat-icon-button","",1,"easy-button",3,"color","disabled","matTooltip"]],template:function(t,s){1&t&&(e.F$t(),e.TgZ(0,"button",0),e.TgZ(1,"mat-icon"),e.Hsn(2),e.qZA(),e.qZA()),2&t&&(e.Q6J("color",s.getColor())("disabled",!!s.disabled||null)("matTooltip",s.tooltip),e.xp6(1),e.ekj("icon-mirrored",s.iconMirrored))},directives:[f.lW,ae.gM,m.Hw],encapsulation:2}),n})();function cn(n,o){if(1&n&&(e.TgZ(0,"div",5),e._UZ(1,"easy-field",6),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("field",t)}}function un(n,o){if(1&n&&(e.TgZ(0,"div",3),e.YNc(1,cn,2,1,"div",4),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.search.getFields())}}function dn(n,o){if(1&n&&(e.TgZ(0,"th",19),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,s=e.oxw(2);e.Tol(s.getColumnClasses(t,s.table.getColumnHeaderClasses(t))),e.Q6J("mat-sort-header",t),e.xp6(1),e.hij(" ",s.table.getColumnHeader(t)," ")}}function mn(n,o){if(1&n&&(e.TgZ(0,"a",22),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,s=e.oxw().$implicit,i=e.oxw(2);e.Q6J("routerLink",i.table.getColumnRoute(t,s)),e.xp6(1),e.hij(" ",i.table.getColumnValue(t,s)," ")}}function pn(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,s=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Oqu(i.table.getColumnValue(t,s))}}function gn(n,o){if(1&n&&(e.TgZ(0,"td",20),e.YNc(1,mn,2,2,"a",21),e.YNc(2,pn,2,1,"span",15),e.qZA()),2&n){const t=o.$implicit,s=e.oxw().$implicit,i=e.oxw(2);e.Tol(i.getColumnClasses(s,i.table.getColumnClasses(s))),e.xp6(1),e.Q6J("ngIf",null!=i.table.getColumnRoute(t,s)),e.xp6(1),e.Q6J("ngIf",null==i.table.getColumnRoute(t,s))}}function fn(n,o){if(1&n&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,s=e.oxw(2);e.Tol(s.getColumnClasses(t,s.table.getColumnFooterClasses(t))),e.xp6(1),e.hij(" ",s.table.getColumnFooter(t)," ")}}function hn(n,o){1&n&&(e.ynx(0,9),e.YNc(1,dn,2,5,"th",16),e.YNc(2,gn,3,5,"td",17),e.YNc(3,fn,2,4,"td",18),e.BQk()),2&n&&e.Q6J("matColumnDef",o.$implicit)}function _n(n,o){1&n&&e._UZ(0,"th",24)}function bn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"easy-button",29),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw().$implicit;return e.oxw(2).onClickAction(i,a)}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.label)}}function yn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"easy-button-icon",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw().$implicit;return e.oxw(2).onClickAction(i,a)}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("matTooltip",t.label),e.xp6(1),e.hij(" ",t.icon," ")}}function Cn(n,o){if(1&n&&(e.ynx(0),e.YNc(1,bn,2,1,"easy-button",27),e.YNc(2,yn,2,2,"easy-button-icon",28),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null==t.icon),e.xp6(1),e.Q6J("ngIf",null!=t.icon)}}function En(n,o){if(1&n&&(e.TgZ(0,"td",25),e.YNc(1,Cn,3,2,"ng-container",26),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.getRowActions())}}function Tn(n,o){1&n&&e._UZ(0,"td",23)}function xn(n,o){1&n&&e._UZ(0,"tr",31)}function vn(n,o){1&n&&e._UZ(0,"tr",32)}function Fn(n,o){1&n&&e._UZ(0,"tr",34)}function An(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Fn,1,0,"tr",33),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("matFooterRowDef",t.table.getColumns())}}function Dn(n,o){if(1&n&&(e.TgZ(0,"table",7),e.YNc(1,hn,4,1,"ng-container",8),e.ynx(2,9),e.YNc(3,_n,1,0,"th",10),e.YNc(4,En,2,1,"td",11),e.YNc(5,Tn,1,0,"td",12),e.BQk(),e.YNc(6,xn,1,0,"tr",13),e.YNc(7,vn,1,0,"tr",14),e.YNc(8,An,2,1,"ng-container",15),e.qZA()),2&n){const t=e.oxw();e.Q6J("dataSource",t.table.matDataSource),e.xp6(1),e.Q6J("ngForOf",t.getTableColumns()),e.xp6(1),e.Q6J("matColumnDef","action"),e.xp6(4),e.Q6J("matHeaderRowDef",t.table.getColumns()),e.xp6(1),e.Q6J("matRowDefColumns",t.table.getColumns()),e.xp6(1),e.Q6J("ngIf",t.table.hasFooter)}}const In=function(){return[25,50,100]};let De=(()=>{class n extends U{constructor(t,s){super(s),this.route=t,this.search=new W,this.rowActions=[],this.onRowAction=new e.vpe}ngAfterViewInit(){this.table.setMat(this.matPaginator,this.matSort),this.addSubscription(this.search.valueChanges.subscribe(()=>{this.table.matDataSource.filter=this.search.getValue(),this.markForCheck()})),null!=this.rowActions&&this.rowActions.length>0&&-1==this.table.getColumns().indexOf("action")&&console.warn(this.table.constructor.name,"Row actions have been added but action column is not present")}getColumnClasses(t,s){return null!=this.table.getColumnGlobalClasses(t)?this.table.getColumnGlobalClasses(t).concat(s):s}getRowActions(){return this.rowActions}getTableColumns(){return this.table.getColumns().filter(t=>"action"!==t)}onClickAction(t,s){this.onRowAction.emit({action:t,data:s})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(M.gz),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["easy-table"]],viewQuery:function(t,s){if(1&t&&(e.Gf(d.NW,5),e.Gf(c.YE,5)),2&t){let i;e.iGM(i=e.CRH())&&(s.matPaginator=i.first),e.iGM(i=e.CRH())&&(s.matSort=i.first)}},inputs:{search:"search",table:"table",rowActions:"rowActions"},outputs:{onRowAction:"onRowAction"},features:[e.qOj],decls:3,vars:4,consts:[["class","search-field-container",4,"ngIf"],["mat-table","","matSort","","class","full-width",3,"dataSource",4,"ngIf"],[3,"pageSizeOptions"],[1,"search-field-container"],["class","search-field",4,"ngFor","ngForOf"],[1,"search-field"],[3,"field"],["mat-table","","matSort","",1,"full-width",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","column-min",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["mat-header-cell","",3,"mat-sort-header","class",4,"matHeaderCellDef"],["mat-cell","",3,"class",4,"matCellDef"],["mat-footer-cell","",3,"class",4,"matFooterCellDef"],["mat-header-cell","",3,"mat-sort-header"],["mat-cell",""],[3,"routerLink",4,"ngIf"],[3,"routerLink"],["mat-footer-cell",""],["mat-header-cell",""],["mat-cell","",1,"column-min"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"matTooltip","click",4,"ngIf"],[3,"click"],[3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",4,"matFooterRowDef"],["mat-footer-row",""]],template:function(t,s){1&t&&(e.YNc(0,un,2,1,"div",0),e.YNc(1,Dn,9,6,"table",1),e._UZ(2,"mat-paginator",2)),2&t&&(e.Q6J("ngIf",null!=s.search&&s.table.hasLoaded()),e.xp6(1),e.Q6J("ngIf",null!=s.table&&s.table.hasLoaded()),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(3,In)))},directives:[C.O5,C.sg,ce,u.BZ,c.YE,u.w1,u.fO,u.ge,c.nU,u.Dz,u.ev,M.yS,u.mD,u.yh,Q,Ke,ae.gM,u.as,u.XQ,u.nj,u.Gk,u.Ke,u.Q2,d.NW],styles:[".search-field-container[_ngcontent-%COMP%]{display:flex;margin:0 -16px}.search-field[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 16px}  .search-field .mat-form-field-wrapper{padding:0}"],changeDetection:0}),n})();function wn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"easy-button",7),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).onActionClick(a)}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit;e.Q6J("matTooltip",t.tooltip),e.xp6(1),e.hij(" ",t.label," ")}}function On(n,o){if(1&n&&(e.TgZ(0,"div",5),e.YNc(1,wn,2,2,"easy-button",6),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.actions)}}function Ln(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"easy-table",8),e.NdJ("onRowAction",function(i){return e.CHM(t),e.oxw().onRowAction(i)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("rowActions",t.rowActions)("table",t.table)}}let et=(()=>{class n extends U{constructor(t,s,i){super(i),this.dataService=t,this.dialog=s,this.table=null,this.tables=["main","macro","price"],this.tableCurrent=this.tables[0],this.actions=[{systemName:"create",label:"Add"}],this.rowActions=[z.getUpdateIcon(),z.getDeleteIcon()]}onInit(){this.onLoad()}onLoad(){this.setLoading(!0),(0,de.D)([this.dataService.searchFoodDate(),this.dataService.getProfile(),this.dataService.getCurrentWeight()]).subscribe(t=>{this.targetCalories=ne.getTargetCaloriesByProfile(t[1],null==t[2]?null:t[2].weight),this.tableData=t[0],this.initTable(),this.setLoading(!1)})}onActionClick(t){"create"!=t.systemName||this.openDialog()}openDialog(t){this.dialogService.open(Xe,t).afterClosed().subscribe(s=>{null!=s&&this.onLoad()})}onRowAction(t){switch(t.action.systemName){case z.ACTION_DELETE:return void this.onDelete(t.data);case z.ACTION_UPDATE:return void this.openDialog(t.data)}console.log(t),this.toast("Not Implemented")}onDelete(t){this.dialogService.confirm("Are you sure you want to delete this item?").then(s=>{!s||(this.setLoading(!0),this.dataService.deleteFoodDate(t).subscribe(()=>{this.onLoad()},i=>{console.error(i),this.toast("Something bad happened"),this.setLoading(!1)}))})}onTableAlt(){this.table=null,this.detectChanges();let t=this.tables.indexOf(this.tableCurrent);this.logger.dev("onTableAlt.pre",t,this.tableCurrent),t=-1==t?t:t+1,(t>this.tables.length-1||-1==t)&&(t=0),this.tableCurrent=this.tables[t],this.logger.dev("onTableAlt.post",t,this.tableCurrent,this.tables.length-1),this.initTable()}initTable(){switch(this.tableCurrent){case"main":this.table=new Ae;break;case"macro":this.table=new rn;break;case"price":this.table=new an;break;default:this.table=null}null!=this.table&&(this.table.targetCalories=this.targetCalories,this.table.setData(this.tableData),this.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S),e.Y36(Ee),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["food-journal"]],features:[e.qOj],decls:8,vars:3,consts:[[3,"state"],[1,"flex"],["class","easy-button-row flex-grow",4,"ngIf"],[3,"click"],[3,"rowActions","table","onRowAction",4,"ngIf"],[1,"easy-button-row","flex-grow"],["color","primary",3,"matTooltip","click",4,"ngFor","ngForOf"],["color","primary",3,"matTooltip","click"],[3,"rowActions","table","onRowAction"]],template:function(t,s){1&t&&(e.TgZ(0,"easy-card"),e._UZ(1,"easy-state",0),e.TgZ(2,"div",1),e.YNc(3,On,2,1,"div",2),e.TgZ(4,"div"),e.TgZ(5,"easy-button",3),e.NdJ("click",function(){return s.onTableAlt()}),e._uU(6,"View"),e.qZA(),e.qZA(),e.qZA(),e.YNc(7,Ln,1,2,"easy-table",4),e.qZA()),2&t&&(e.xp6(1),e.Q6J("state",s.getState()),e.xp6(2),e.Q6J("ngIf",s.hasLoaded()),e.xp6(4),e.Q6J("ngIf",null!=s.table&&s.hasLoaded()))},directives:[G,V,C.O5,C.sg,Q,ae.gM,De],encapsulation:2}),n})();function Zn(n,o){if(1&n&&(e.TgZ(0,"easy-card"),e._UZ(1,"easy-state",1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("state",t.getState())}}function Sn(n,o){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"h1"),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._UZ(4,"daily-weight",2),e.qZA(),e.TgZ(5,"div"),e._UZ(6,"metrics"),e.qZA(),e.TgZ(7,"div"),e._UZ(8,"food-journal"),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.hij("Welcome ",t.getName(),"!"),e.xp6(2),e.Q6J("currentDate",t.currentDate)}}let tt=(()=>{class n extends U{constructor(t,s){super(s),this.dataService=t}onInit(){this.currentDate=new Date,this.setLoading(!0),this.dataService.getProfile().subscribe(t=>{this.profile=t,this.setLoading(!1)})}getName(){return null==this.profile||null==this.profile.name||""==this.profile.name?"Back":this.profile.name}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf"],[3,"state"],[3,"currentDate"]],template:function(t,s){1&t&&(e._UZ(0,"navbar"),e.YNc(1,Zn,2,1,"easy-card",0),e.YNc(2,Sn,9,2,"div",0)),2&t&&(e.xp6(1),e.Q6J("ngIf",s.isLoading()),e.xp6(1),e.Q6J("ngIf",s.hasLoaded()))},directives:[he,C.O5,G,V,We,Ge,et],encapsulation:2}),n})();function Mn(n,o){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"easy-form",3),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("form",t.form)}}let nt=(()=>{class n extends U{constructor(t,s){super(s),this.dataService=t}onInit(){this.form=new W({id:T.id(),name:T.text({label:"Name"}),dob:T.date({label:"Date of Birth"}),gender:T.select({label:"Gender",options:ne.genderOptions}),exercise:T.select({label:"Exercise",options:ne.exerciseOptions}),diet:T.select({label:"Diet Type",options:ne.dietOptions}),height:T.number({label:"Height"}),goal:T.select({label:"Goal",options:ne.goalOptions})}),this.setLoading(!0),(0,de.D)([this.dataService.getProfile(),this.dataService.getCurrentWeight()]).subscribe(t=>{this.form.patchValue(t[0]),this.currentWeight=null==t[1]?this.currentWeight:t[1].weight,this.setLoading(!1)})}onSubmit(){this.setLoading(!0),this.dataService.saveProfile(this.form.getValue()).subscribe(()=>{this.setLoading(!1),this.toast("Profile saved")})}getTargetCalories(){if(null==this.form)return"N/A";const t=ne.getTargetCaloriesByProfile(this.form.getValue(),this.currentWeight);return null==t?"N/A":t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["profile"]],features:[e.qOj],decls:8,vars:2,consts:[[3,"state"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[3,"form"]],template:function(t,s){1&t&&(e.TgZ(0,"easy-card"),e.TgZ(1,"easy-card-title"),e._uU(2,"Profile"),e.qZA(),e._UZ(3,"easy-state",0),e.YNc(4,Mn,2,1,"div",1),e.TgZ(5,"easy-card-buttons"),e.TgZ(6,"button",2),e.NdJ("click",function(){return s.onSubmit()}),e._uU(7,"Save"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("state",s.getState()),e.xp6(1),e.Q6J("ngIf",s.hasLoaded()))},directives:[G,_e,V,C.O5,ue,be,f.lW],encapsulation:2}),n})(),ot=(()=>{class n extends U{}return n.\u0275fac=function(){let o;return function(s){return(o||(o=e.n5z(n)))(s||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:2,vars:0,template:function(t,s){1&t&&(e._UZ(0,"navbar"),e._UZ(1,"profile"))},directives:[he,nt],encapsulation:2}),n})();class Nn extends ze{constructor(){super(),this.setColumns(["name","protein","fat","carb","total","price","action"])}getColumnValue(o,t){switch(t){case"protein":case"fat":case"carb":case"price":return v.toDecimal(super.getColumnValue(o,t),1);case"total":return v.toInteger(fe.getCalories(o))}return super.getColumnValue(o,t)}getColumnGlobalClasses(o){switch(o){case"protein":case"fat":case"carb":case"price":return["small-display-hidden"]}return[]}getColumnClasses(o){switch(o){case"protein":case"fat":case"carb":case"price":case"total":return["text-right"]}return[]}}function jn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e._UZ(1,"easy-form",2),e.TgZ(2,"easy-card-buttons"),e.TgZ(3,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCancel()}),e._uU(4,"Cancel"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmit()}),e._uU(6,"Create"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("form",t.form)}}let st=(()=>{class n extends $e{constructor(t,s,i,a){super(a),this.data=t,this.dataService=s,this.dialogRef=i}onInit(){this.form=new W({id:T.id(),name:T.text({label:"Label"}),protein:T.number({label:"Protein"}),fat:T.number({label:"Fat"}),carb:T.number({label:"Carbs"}),fibre:T.number({label:"Fibre"}),misc:T.number({label:"Misc Calories"}),price:T.number({label:"Price"}),favourite:T.checkbox({label:"Favourite"})}),null!=this.data&&this.form.patchValue(this.data)}onCancel(){this.onClose()}onSubmit(){this.setLoading(!0);const t=this.form.getValue();this.dataService.updateFood(t).subscribe(()=>{this.onClose(t)},s=>{console.error(s),this.toast("Something bad happened"),this.setLoading(!1)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(se.WI),e.Y36(S),e.Y36(se.so),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:2,vars:2,consts:[[3,"state"],[4,"ngIf"],[3,"form"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,s){1&t&&(e._UZ(0,"easy-state",0),e.YNc(1,jn,7,1,"div",1)),2&t&&(e.Q6J("state",s.getState()),e.xp6(1),e.Q6J("ngIf",s.hasLoaded()))},directives:[V,C.O5,ue,be,f.lW],encapsulation:2}),n})();function Pn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"easy-button",6),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).onActionClick(a)}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit;e.Q6J("matTooltip",t.tooltip),e.xp6(1),e.hij(" ",t.label," ")}}function Bn(n,o){if(1&n&&(e.TgZ(0,"div",4),e.YNc(1,Pn,2,2,"easy-button",5),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.actions)}}function Rn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"easy-table",7),e.NdJ("onRowAction",function(i){return e.CHM(t),e.oxw().onRowAction(i)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("search",t.searchForm)("rowActions",t.rowActions)("table",t.table)}}let it=(()=>{class n extends U{constructor(t,s){super(s),this.dataService=t,this.table=new Nn,this.actions=[],this.rowActions=[],this.searchForm=new W({keyword:T.text({label:"Search"})}),this.actions=[{systemName:"create",label:"Create"}],this.rowActions=[z.getUpdateIcon(),z.getDeleteIcon()]}onInit(){this.onLoad()}onLoad(){this.setLoading(!0),this.dataService.listFood().subscribe(t=>{this.table.setData(t),this.setLoading(!1)})}onActionClick(t){"create"!=t.systemName||this.openDialog()}onDelete(t){this.dialogService.confirm("Are you sure you want to delete this item?").then(s=>{!s||(this.setLoading(!0),this.dataService.deleteFood(t).subscribe(()=>{this.onLoad()},i=>{console.error(i),this.toast("Something bad happened"),this.setLoading(!1)}))})}onRowAction(t){switch(t.action.systemName){case z.ACTION_DELETE:return void this.onDelete(t.data);case z.ACTION_UPDATE:return void this.openDialog(t.data)}console.log(t),this.toast("Not Implemented")}openDialog(t){this.dialogService.open(st,t).afterClosed().subscribe(s=>{null!=s&&this.onLoad()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["food-list"]],features:[e.qOj],decls:6,vars:3,consts:[[1,"full-width"],[3,"state"],["class","easy-button-row",4,"ngIf"],[3,"search","rowActions","table","onRowAction",4,"ngIf"],[1,"easy-button-row"],["color","primary",3,"matTooltip","click",4,"ngFor","ngForOf"],["color","primary",3,"matTooltip","click"],[3,"search","rowActions","table","onRowAction"]],template:function(t,s){1&t&&(e.TgZ(0,"easy-card",0),e.TgZ(1,"easy-card-title"),e._uU(2,"Food List"),e.qZA(),e._UZ(3,"easy-state",1),e.YNc(4,Bn,2,1,"div",2),e.YNc(5,Rn,1,3,"easy-table",3),e.qZA()),2&t&&(e.xp6(3),e.Q6J("state",s.getState()),e.xp6(1),e.Q6J("ngIf",s.hasLoaded()),e.xp6(1),e.Q6J("ngIf",s.hasLoaded()))},directives:[G,_e,V,C.O5,C.sg,Q,ae.gM,De],styles:["[_nghost-%COMP%]{display:block}"]}),n})(),rt=(()=>{class n extends U{constructor(t,s){super(s),this.dataService=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:2,vars:0,template:function(t,s){1&t&&(e._UZ(0,"navbar"),e._UZ(1,"food-list"))},directives:[he,it],encapsulation:2}),n})();var Ie=r(5861);function kn(n,o){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.qZA()),2&n){const t=o.$implicit;e.xp6(2),e.Oqu(t.date),e.xp6(2),e.Oqu(t.actual),e.xp6(2),e.Oqu(t.average),e.xp6(2),e.Oqu(t.calories)}}function Un(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"easy-card"),e.TgZ(1,"div"),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"div"),e.TgZ(5,"easy-button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().onExport()}),e._uU(6,"Export"),e.qZA(),e.qZA(),e.TgZ(7,"table",5),e.TgZ(8,"tr"),e.TgZ(9,"th"),e._uU(10,"Date"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Actual"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Average"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Calories"),e.qZA(),e.qZA(),e.YNc(17,kn,9,4,"tr",6),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.AsE("Max: ",t.max.weight," - ",e.lcZ(3,3,t.max.id),""),e.xp6(15),e.Q6J("ngForOf",t.table)}}const Jn=function(){return["/"]},qn=function(){return["/food"]},Qn=function(){return["/profile"]},Yn=function(){return["/history"]};const Vn=[{path:"",component:tt},{path:"food",component:rt},{path:"profile",component:ot},{path:"login",component:qe},{path:"history",component:(()=>{class n extends U{constructor(t,s){super(s),this.dataService=t,this.table=[],this.days=28,this.max=null}onInit(){this.setLoading(!0),this.calculate().then(()=>{this.setLoading(!1)})}onExport(){this.setLoading(!0),(0,de.D)([this.dataService.listWeight(),this.dataService.listFood(),this.dataService.listFoodDate(),this.dataService.getProfile()]).subscribe(t=>{let s=0;const i={weight:t[s++],food:t[s++],foodDate:t[s++],profile:t[s++]};let a="easy-diet";a=Y.replace(a," ","_"),a=Y.removeSpecialCharacters(a);let b=I.format(new Date,I.FORMAT_SERVER);b=Y.replace(b,"-","_"),je.createDownload(`${a}.json`,JSON.stringify(i,null,2)),this.setLoading(!1)})}calculate(){var t=this;return(0,Ie.Z)(function*(){return new Promise((s,i)=>{(0,de.D)([t.dataService.listWeight()]).subscribe(a=>{t.process(a[0]),s(!0)})})})()}process(t){var s=this;return(0,Ie.Z)(function*(){t.forEach(i=>{const a=+i.weight;null==i.weight||isNaN(+a)||(null==s.max||+s.max.weight<a)&&(s.max=i)});for(let i=0;i<s.days;i++){const a=I.addDays(I.now(),-i),b=I.parseDate(I.formatToServer(a)),L=t.find(oe=>oe.id==I.formatToServer(a)),w=yield s.getCalories(a);s.table.push({date:I.formatToClient(b),average:s.getMovingAverage(t,b),actual:null==L?null:+L.weight,calories:w}),(i+1)%7==0&&(s.table.push({date:" ",average:null,actual:null,calories:null}),s.table.push({date:" ",average:null,actual:null,calories:null}))}return!0})()}getCalories(t){var s=this;return(0,Ie.Z)(function*(){return new Promise((i,a)=>{s.dataService.searchFoodDate(I.formatToServer(t)).subscribe(b=>{let L=0;b.forEach(w=>{L=v.add(L,w.calories)}),i(L)})})})()}getMovingAverage(t,s){const i=I.addDays(s,-7),a=t.filter(L=>{const w=I.parseDate(L.id);return null!=L.weight&&!isNaN(L.weight)&&w.getTime()>i.getTime()&&w.getTime()<=s.getTime()});if(0==a.length)return null;let b=0;return a.forEach(L=>{b=v.add(b,+L.weight)}),v.toDecimal(b/a.length)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["weight-history"]],features:[e.qOj],decls:11,vars:10,consts:[[1,"nav"],[3,"routerLink"],[3,"state"],[4,"ngIf"],[3,"click"],[1,"full-width"],[4,"ngFor","ngForOf"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"easy-button",1),e._uU(2,"Home"),e.qZA(),e.TgZ(3,"easy-button",1),e._uU(4,"Food"),e.qZA(),e.TgZ(5,"easy-button",1),e._uU(6,"Profile"),e.qZA(),e.TgZ(7,"easy-button",1),e._uU(8,"History"),e.qZA(),e.qZA(),e._UZ(9,"easy-state",2),e.YNc(10,Un,18,5,"easy-card",3)),2&t&&(e.xp6(1),e.Q6J("routerLink",e.DdM(6,Jn)),e.xp6(2),e.Q6J("routerLink",e.DdM(7,qn)),e.xp6(2),e.Q6J("routerLink",e.DdM(8,Qn)),e.xp6(2),e.Q6J("routerLink",e.DdM(9,Yn)),e.xp6(2),e.Q6J("state",s.getState()),e.xp6(1),e.Q6J("ngIf",s.hasLoaded()))},directives:[Q,M.rH,V,C.O5,G,C.sg],pipes:[C.uU],styles:["td[_ngcontent-%COMP%]{border-right:1px solid rgba(0,0,0,.12);border-bottom:1px solid rgba(0,0,0,.12)}"]}),n})()},{path:"register",component:Qe},{path:"**",component:Ye}];let Hn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[M.Bz.forRoot(Vn,Rt)],M.Bz]}),n})();var Wn=r(3170),ye=r(2181);let ro=(()=>{class n{constructor(t){this.http=t}get(t){return this.http.get(t,this.options())}post(t,s){return this.http.post(t,s,this.options())}put(t,s){return this.http.put(t,s,this.options())}delete(t){return this.http.delete(t,this.options())}options(){return{withCredentials:!0,headers:new pe.WM({"Content-Type":"application/json"})}}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(pe.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();const lo=[(()=>{class n{transform(t,...s){return v.toDecimal(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"decimal",type:n,pure:!0}),n})(),re];let lt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[...lo,ro,X],imports:[[M.Bz,B.PW,A.u5,A.UX,pe.JF,Te.Bb,f.ot,xe.QW,ke.p9,se.Is,Wn.Yd,Z.lN,le.c,d.TU,ve.Cq,Oe.ZX,Me.LD,c.JX,m.Ps,ge.FA,ye.Tx,u.p0,ae.AV]]}),n})(),ct=(()=>{class n extends me{constructor(t,s,i,a){super(s,i,a),this.dataService=t}init(){return this.localeService.setLocale(O.LOCALE_BROWSER_DEFAULT),this.dataService.init()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(S),e.LFG(e.zs3),e.LFG(k._A),e.LFG(O))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();const co=[];let uo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[...co,ct,S,Ee,Le,P,{provide:e.ip1,useFactory:o=>()=>o.init(),deps:[ct],multi:!0}],imports:[[lt,C.ez,ae.AV,f.ot,M.Bz]]}),n})(),mo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n,bootstrap:[j]}),n.\u0275inj=e.cJS({imports:[[lt,uo,l.b2,Hn,B.PW,h.SJ,m.Ps,F.g0,f.ot,g._t,_.T5,u.p0,d.TU,c.JX]]}),n})();(0,e.G48)(),l.q6().bootstrapModule(mo).catch(n=>console.error(n))},8055:(D,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.EasyIdbDeleteResult=class r{}},7017:(D,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.EasyIdbInsertResult=class r{constructor(){this.items=[]}}},5437:(D,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.EasyIdbSelectResult=class r{constructor(){this.items=[],this.total=0}}},3541:(D,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.EasyIdbFieldCondition=class r{constructor(e){this.fieldName=e}getFieldName(){return this.fieldName}}},8850:(D,p,r)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const l=r(3541),e=r(3938);class g extends l.EasyIdbFieldCondition{constructor(d,h){super(d),this.value=h}getKeyRange(){return e.EasyIdb.getIDBKeyRange().only(this.value)}hasPassed(d){return!(null==this.value||!d.hasOwnProperty(this.getFieldName()))&&d[this.getFieldName()]===this.value}getValue(){return this.value}}p.EasyIdbFieldEquals=g,p.fieldEquals=function f(m,d){return new g(m,d)}},5750:(D,p,r)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const l=r(3541);class e extends l.EasyIdbFieldCondition{constructor(m,d){super(m),this.values=d}getKeyRange(){return null}hasPassed(m){return!(null==this.values||!m.hasOwnProperty(this.fieldName))&&this.values.indexOf(m[this.fieldName])>-1}}p.EasyIdbFieldIn=e,p.fieldIn=function g(f,m){return new e(f,m)}},4172:(D,p,r)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const l=r(3541);class e extends l.EasyIdbFieldCondition{constructor(m){super(m)}getKeyRange(){return null}hasPassed(m){return!m.hasOwnProperty(this.fieldName)||null==m[this.fieldName]}}p.EasyIdbFieldIsNull=e,p.fieldIsNull=function g(f){return new e(f)}},3938:(D,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.EasyIdb=(()=>{class l{static setLogging(g){this.logging=g}static isLoggingEnabled(){return this.logging}static setIndexedDB(g){l.indexedDB=g}static setIDBKeyRange(g){l.IDBKeyRange=g}static getIndexedDB(){return null==l.indexedDB?window.indexedDB:l.indexedDB}static getIDBKeyRange(){return null==l.IDBKeyRange?IDBKeyRange:l.IDBKeyRange}}return l.logging=!1,l})()},9355:(D,p,r)=>{"use strict";r(3938);var g=r(6305);p.fe=g.EasyIdbMigration;var f=r(9159);p.Z3=f.EasyIdbDatabase,r(367),r(3429),r(9972),r(8837),r(7017),r(5437),r(3541);var B=r(8850);p.KA=B.fieldEquals;var M=r(5750);p.YJ=M.fieldIn;var j=r(4172);p.KO=j.fieldIsNull},6469:(D,p,r)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const l=r(3938),e=r(367);p.EasyIdbBuilder=class g{constructor(){this.READ_WRITE="readwrite",this.READ_ONLY="readwrite"}init(m,d,h,c){this.databaseName=m,this.databaseVersion=d,this.objectStoreName=h,this.indexStoreName=c}initTransaction(m,d,h=this.READ_ONLY){return new Promise(c=>{this.indexedDatabaseRequest=l.EasyIdb.getIndexedDB().open(this.databaseName,this.databaseVersion),this.indexedDatabaseRequest.onerror=_=>{this.close(),d(e.EasyIdbError.IDBError(_))},this.indexedDatabaseRequest.onsuccess=_=>{if(this.indexedDatabase=_.target.result,!this.indexedDatabase.objectStoreNames.contains(this.objectStoreName))return this.close(),void d(new e.EasyIdbError(e.EasyIdbError.SCHEMA_ERROR,`Database '${this.databaseName}' does not have object store '${this.objectStoreName}'`));this.indexedTransaction=this.indexedDatabase.transaction([this.objectStoreName],h),this.indexedTransaction.onerror=u=>{this.close(),d(e.EasyIdbError.IDBError(u))},this.indexedObjectStore=this.indexedTransaction.objectStore(this.objectStoreName),this.key=this.indexedObjectStore.keyPath,c()}})}close(){null!=this.indexedDatabase&&this.indexedDatabase.close()}executeOnSuccess(m,d){null==m||m(d)}executeOnError(m,d){if(null==m)throw Error(d);m(d)}}},8837:(D,p,r)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const l=r(6469),e=r(8055),g=r(8850),f=r(367);p.EasyIdbDeleteQuery=class m extends l.EasyIdbBuilder{constructor(){super(...arguments),this.conditions=[]}idEquals(h,c){return this.conditions.push(new g.EasyIdbFieldEquals(h,c)),this}execute(){return new Promise((h,c)=>{if(1!=this.conditions.length)return void c(new f.EasyIdbError(f.EasyIdbError.NOT_IMPLEMENTED,`'Delete query with ${this.conditions.length} not implemented`));const _=this.conditions[0];this.initTransaction(h,c,this.READ_WRITE).then(()=>{const u=this.indexedObjectStore.delete(_.getValue());u.onerror=F=>{this.close(),c(f.EasyIdbError.IDBError(F))},u.onsuccess=()=>{this.close(),h(new e.EasyIdbDeleteResult)}})})}}},9972:(D,p,r)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const l=r(7017),e=r(367),g=r(6469);p.EasyIdbInsertQuery=class f extends g.EasyIdbBuilder{constructor(){super(...arguments),this._items=[]}item(d){return this._items.push(d),this}execute(d,h){this.executePromise().then(c=>{this.executeOnError(d,c)},c=>{this.executeOnError(h,c)})}executePromise(){return new Promise((d,h)=>{this.initTransaction(d,h,this.READ_WRITE).then(()=>{if(this.indexedTransaction.oncomplete=()=>{const c=new l.EasyIdbInsertResult;c.items=this._items,d(c)},Array.isArray(this.indexedObjectStore.keyPath))return this.close(),void h(new e.EasyIdbError(e.EasyIdbError.NOT_IMPLEMENTED,"Array key path not supported"));for(const c of this._items){const _=this.indexedObjectStore.keyPath;if(!c.hasOwnProperty(_))return this.close(),void h(new e.EasyIdbError(e.EasyIdbError.MISSING_KEY_VALUE,`Item does not have value for key '${_}'`))}this._items.forEach(c=>{this.indexedObjectStore.add(c)})},c=>{h(e.EasyIdbError.IDBError(c))})})}}},1152:(D,p,r)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const l=r(3938),e=r(367),g=r(6469);p.EasyIdbPutItemBuilder=class f extends g.EasyIdbBuilder{init(d,h,c,_){l.EasyIdb.isLoggingEnabled()&&console.log("[EasyIdbPutItemBuilder]",{databaseName:d,databaseVersion:h,objectStoreName:c,item:_}),super.init(d,h,c),this.item=_}execute(d,h){this.executePromise().then(c=>{this.executeOnError(d,c)},c=>{this.executeOnError(h,c)})}executePromise(){return new Promise((d,h)=>{this.initTransaction(d,h,this.READ_WRITE).then(()=>{try{const c=this.indexedObjectStore.put(this.item);c.onsuccess=()=>{this.close(),d()},c.onerror=_=>{this.close(),h(e.EasyIdbError.IDBError(_))}}catch(c){h(e.EasyIdbError.IDBError(c))}})})}}},3429:(D,p,r)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const l=r(5437),e=r(8850),g=r(367),f=r(2165),m=r(6469);class d extends m.EasyIdbBuilder{constructor(){super(...arguments),this.conditions=[],this.itemLimit=null,this.fieldOrderBy=null,this.fieldOrder=null}fetch(c,_){this.fetchPromise().then(u=>{this.executeOnSuccess(c,u)},u=>{this.executeOnError(_,u)})}fetchPromise(){return new Promise((c,_)=>{this.initTransaction(c,_,this.READ_WRITE).then(()=>{const u=this.getRangeKey(),F=this.openCursor(u);F.onerror=M=>{this.close(),_(g.EasyIdbError.IDBError(M))};const B=[];F.onsuccess=M=>{const j=M.target.result;if(null!=j){const R=j.value;d.passFilter(R,this.conditions)&&B.push(R),j.continue()}else{const R=new l.EasyIdbSelectResult;R.items=this.limitItems(this.sort(B)),R.total=R.items.length,this.close(),c(R)}}},u=>{_(g.EasyIdbError.IDBError(u))})})}fetchOne(c,_){this.fetchPromise().then(u=>{u.total>1?this.executeOnError(_,new g.EasyIdbError(g.EasyIdbError.MULTIPLE_ITEMS)):null!=c&&c(0==u.total?null:u.items[0])},u=>{this.executeOnError(_,u)})}getRangeKey(){const c=this.conditions.filter(_=>_.getFieldName()===this.key);return 1==c.length?c[0].getKeyRange():null}sort(c){return null==this.fieldOrderBy?c:f.SortUtil.genericSort(c,this.fieldOrderBy,this.fieldOrder)}openCursor(c){return null!=this.indexedIndexStore?this.indexedIndexStore.openCursor(c):this.indexedObjectStore.openCursor(c)}static passFilter(c,_){let u=!0;if(null!=_)for(const F of _)if(u=F.hasPassed(c)&&u,!u)break;return u}limitItems(c){let u=c.length;return null!=this.itemLimit&&this.itemLimit>-1&&this.itemLimit<c.length&&(u=this.itemLimit),c.slice(0,u)}where(c){return this.conditions.push(c),this}and(c){return this.conditions.push(c),this}fieldEquals(c,_){return this.conditions.push(e.fieldEquals(c,_)),this}orderBy(c,_){return this.fieldOrderBy=c,this.fieldOrder=_,this}}p.EasyIdbSelectQuery=d},9159:(D,p,r)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const l=r(3938),e=r(8837),g=r(9972),f=r(1152),m=r(3429),d=r(367),h=r(5149);p.EasyIdbDatabase=class c{constructor(u){this.name=u}getMigrations(u){return Array.isArray(u)?u:[u]}setLogging(u){h.LogUtil.logging=u}init(u){return new Promise((F,B)=>{if(null==l.EasyIdb.getIndexedDB())return void B(new d.EasyIdbError(d.EasyIdbError.NOT_SUPPORTED,"IndexedDB is not supported"));Array.isArray(u)?(u.sort((j,R)=>j.getVersion()-R.getVersion()),this.version=u[u.length-1].getVersion()):this.version=u.getVersion(),h.LogUtil.log("version",this.version);const M=l.EasyIdb.getIndexedDB().open(this.name,this.version);M.onerror=j=>{B(d.EasyIdbError.IDBError(j))},M.onupgradeneeded=j=>{const R=j.target.result;R.onerror=k=>{B(d.EasyIdbError.IDBError(k))};const q=j.target.transaction;q.onerror=k=>{B(d.EasyIdbError.IDBError(k))},this.getMigrations(u).forEach(k=>{k.database=R,k.transaction=q,k.runMigration(j.oldVersion)})},M.onsuccess=j=>{j.target.result.close();let q=[];this.getMigrations(u).forEach(k=>{const O=k.getMigrationItems();Object.keys(O).forEach(H=>{const me=O[H];null!=me&&me.forEach(Ce=>{q.push(this.insertInto(H).item(Ce))})})}),this.executeQueries(F,q)}})}executeQueries(u,F){0!=F.length?F.pop().execute(()=>{this.executeQueries(u,F)},()=>{this.executeQueries(u,F)}):u()}delete(u){const F=new e.EasyIdbDeleteQuery;return F.init(this.name,this.version,u),F}insertInto(u){const F=new g.EasyIdbInsertQuery;return F.init(this.name,this.version,u),F}put(u,F){const B=new f.EasyIdbPutItemBuilder;return B.init(this.name,this.version,u,F),B}selectFrom(u){const F=new m.EasyIdbSelectQuery;return F.init(this.name,this.version,u),F}}},367:(D,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.EasyIdbError=(()=>{class l{constructor(g=l.ERROR,f="Error"){this.code=g,this.message=f}static IDBError(g){return console.error(g),null!=g&&null!=g.target&&null!=g.target.error&&null!=g.target.error.message?new l(l.IDB_ERROR,g.target.error.message):new l(l.IDB_ERROR)}}return l.ERROR="ERROR",l.NOT_SUPPORTED="IndexedDVNotSupported",l.NOT_IMPLEMENTED="NotImplemented",l.IDB_ERROR="IdbError",l.MISSING_KEY_VALUE="MissingKeyValue",l.SCHEMA_ERROR="SchemaError",l.MULTIPLE_ITEMS="MultipleItems",l})()},6305:(D,p,r)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});const l=r(367),e=r(5149);p.EasyIdbMigration=class g{constructor(){this.items={},this.logging=!1}runMigration(m){m<=this.getVersion()&&this.migrate()}getMigrationItems(){return this.items}createItem(m,d){let h=this.items[m];null==h&&(h=[],this.items[m]=h),h.push(d)}createTable(m,d){e.LogUtil.log(`createTable(tableName: ${m}, key: ${d})`),this.database.createObjectStore(m,{keyPath:d})}createIndex(m,d,h,c){e.LogUtil.log(`'createIndex(tableName: ${m}, indexName: ${d}, indexKey: ${h})`);const _=this.transaction.objectStore(m);if(null==_)throw new l.EasyIdbError(l.EasyIdbError.SCHEMA_ERROR,`Could not create index '${d}', table '${m} does not exist`);if(_.indexNames.contains(d))throw new l.EasyIdbError(l.EasyIdbError.SCHEMA_ERROR,`Index '${d} already exists on table '${m}`);_.createIndex(d,h,{unique:c})}}},5149:(D,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.LogUtil=(()=>{class l{static log(...g){if(!this.logging)return;const f=["[EasyIdb]"].concat(...g);console.log(...f)}}return l.logging=!1,l})()},2165:(D,p)=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SortUtil=(()=>{class l{static genericSort(g,f,m){return g.sort((d,h)=>{const c=d.hasOwnProperty(f)?d[f]:null,_=h.hasOwnProperty(f)?h[f]:null;return this.compare(c,_,"ASC"==m?1:-1)})}static compare(g,f,m){if(null==g&&null==f)return 0;if(null==g)return this.LESS_THAN*m;if(null==f)return this.GREATER_THAN*m;const d=this.compareType(g,f);if(d!=this.EQUAL)return d*m;switch(typeof g){case"string":return this.compareString(g,f)*m;case"number":return this.compareNumber(g,f)*m;default:return 0}}static compareType(g,f){const m=["number","string"],d=m.indexOf(typeof g),h=m.indexOf(typeof f);return d==h?0:d>h?this.GREATER_THAN:this.LESS_THAN}static compareString(g,f){return g.toLowerCase()==f.toLowerCase()?0:g.toLowerCase()>f.toLowerCase()?this.GREATER_THAN:this.LESS_THAN}static compareNumber(g,f){return g>f?this.GREATER_THAN:this.LESS_THAN}}return l.LESS_THAN=-1,l.EQUAL=0,l.GREATER_THAN=1,l})()},6700:(D,p,r)=>{var l={"./af":7088,"./af.js":7088,"./ar":7038,"./ar-dz":2502,"./ar-dz.js":2502,"./ar-kw":128,"./ar-kw.js":128,"./ar-ly":4519,"./ar-ly.js":4519,"./ar-ma":5443,"./ar-ma.js":5443,"./ar-sa":7642,"./ar-sa.js":7642,"./ar-tn":8592,"./ar-tn.js":8592,"./ar.js":7038,"./az":1213,"./az.js":1213,"./be":9191,"./be.js":9191,"./bg":322,"./bg.js":322,"./bm":8042,"./bm.js":8042,"./bn":9620,"./bn-bd":5903,"./bn-bd.js":5903,"./bn.js":9620,"./bo":9645,"./bo.js":9645,"./br":5020,"./br.js":5020,"./bs":4792,"./bs.js":4792,"./ca":7980,"./ca.js":7980,"./cs":7322,"./cs.js":7322,"./cv":365,"./cv.js":365,"./cy":2092,"./cy.js":2092,"./da":7387,"./da.js":7387,"./de":4307,"./de-at":9459,"./de-at.js":9459,"./de-ch":3694,"./de-ch.js":3694,"./de.js":4307,"./dv":9659,"./dv.js":9659,"./el":3460,"./el.js":3460,"./en-au":4369,"./en-au.js":4369,"./en-ca":530,"./en-ca.js":530,"./en-gb":9998,"./en-gb.js":9998,"./en-ie":3391,"./en-ie.js":3391,"./en-il":5414,"./en-il.js":5414,"./en-in":9615,"./en-in.js":9615,"./en-nz":1248,"./en-nz.js":1248,"./en-sg":3767,"./en-sg.js":3767,"./eo":4530,"./eo.js":4530,"./es":6866,"./es-do":8944,"./es-do.js":8944,"./es-mx":9116,"./es-mx.js":9116,"./es-us":3609,"./es-us.js":3609,"./es.js":6866,"./et":6725,"./et.js":6725,"./eu":7931,"./eu.js":7931,"./fa":6417,"./fa.js":6417,"./fi":944,"./fi.js":944,"./fil":1766,"./fil.js":1766,"./fo":5867,"./fo.js":5867,"./fr":1636,"./fr-ca":6848,"./fr-ca.js":6848,"./fr-ch":7773,"./fr-ch.js":7773,"./fr.js":1636,"./fy":4940,"./fy.js":4940,"./ga":1402,"./ga.js":1402,"./gd":6924,"./gd.js":6924,"./gl":6398,"./gl.js":6398,"./gom-deva":2457,"./gom-deva.js":2457,"./gom-latn":2545,"./gom-latn.js":2545,"./gu":2641,"./gu.js":2641,"./he":7536,"./he.js":7536,"./hi":6335,"./hi.js":6335,"./hr":7458,"./hr.js":7458,"./hu":6540,"./hu.js":6540,"./hy-am":5283,"./hy-am.js":5283,"./id":8780,"./id.js":8780,"./is":4205,"./is.js":4205,"./it":4211,"./it-ch":9985,"./it-ch.js":9985,"./it.js":4211,"./ja":1003,"./ja.js":1003,"./jv":420,"./jv.js":420,"./ka":851,"./ka.js":851,"./kk":6074,"./kk.js":6074,"./km":3343,"./km.js":3343,"./kn":4799,"./kn.js":4799,"./ko":3549,"./ko.js":3549,"./ku":1037,"./ku.js":1037,"./ky":3125,"./ky.js":3125,"./lb":9586,"./lb.js":9586,"./lo":2349,"./lo.js":2349,"./lt":2400,"./lt.js":2400,"./lv":9991,"./lv.js":9991,"./me":8477,"./me.js":8477,"./mi":5118,"./mi.js":5118,"./mk":5943,"./mk.js":5943,"./ml":3849,"./ml.js":3849,"./mn":1977,"./mn.js":1977,"./mr":6184,"./mr.js":6184,"./ms":485,"./ms-my":4524,"./ms-my.js":4524,"./ms.js":485,"./mt":6681,"./mt.js":6681,"./my":2024,"./my.js":2024,"./nb":2688,"./nb.js":2688,"./ne":8914,"./ne.js":8914,"./nl":1758,"./nl-be":2272,"./nl-be.js":2272,"./nl.js":1758,"./nn":1510,"./nn.js":1510,"./oc-lnc":2797,"./oc-lnc.js":2797,"./pa-in":7944,"./pa-in.js":7944,"./pl":1605,"./pl.js":1605,"./pt":4225,"./pt-br":3840,"./pt-br.js":3840,"./pt.js":4225,"./ro":5128,"./ro.js":5128,"./ru":5127,"./ru.js":5127,"./sd":2525,"./sd.js":2525,"./se":9893,"./se.js":9893,"./si":3123,"./si.js":3123,"./sk":9635,"./sk.js":9635,"./sl":8106,"./sl.js":8106,"./sq":8799,"./sq.js":8799,"./sr":7949,"./sr-cyrl":2872,"./sr-cyrl.js":2872,"./sr.js":7949,"./ss":6167,"./ss.js":6167,"./sv":9713,"./sv.js":9713,"./sw":1982,"./sw.js":1982,"./ta":2732,"./ta.js":2732,"./te":3636,"./te.js":3636,"./tet":2115,"./tet.js":2115,"./tg":9801,"./tg.js":9801,"./th":2868,"./th.js":2868,"./tk":1310,"./tk.js":1310,"./tl-ph":2360,"./tl-ph.js":2360,"./tlh":6645,"./tlh.js":6645,"./tr":8374,"./tr.js":8374,"./tzl":256,"./tzl.js":256,"./tzm":1595,"./tzm-latn":1631,"./tzm-latn.js":1631,"./tzm.js":1595,"./ug-cn":6050,"./ug-cn.js":6050,"./uk":5610,"./uk.js":5610,"./ur":6077,"./ur.js":6077,"./uz":2862,"./uz-latn":2207,"./uz-latn.js":2207,"./uz.js":2862,"./vi":8093,"./vi.js":8093,"./x-pseudo":5590,"./x-pseudo.js":5590,"./yo":9058,"./yo.js":9058,"./zh-cn":7908,"./zh-cn.js":7908,"./zh-hk":8867,"./zh-hk.js":8867,"./zh-mo":1133,"./zh-mo.js":1133,"./zh-tw":3291,"./zh-tw.js":3291};function e(f){var m=g(f);return r(m)}function g(f){if(!r.o(l,f)){var m=new Error("Cannot find module '"+f+"'");throw m.code="MODULE_NOT_FOUND",m}return l[f]}e.keys=function(){return Object.keys(l)},e.resolve=g,D.exports=e,e.id=6700}},D=>{D.O(0,[736],()=>D(D.s=1832)),D.O()}]);